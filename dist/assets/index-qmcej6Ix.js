(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var Nd={exports:{}},El={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function _A(){if(x_)return El;x_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return El.Fragment=e,El.jsx=n,El.jsxs=n,El}var D_;function vA(){return D_||(D_=1,Nd.exports=_A()),Nd.exports}var b=vA(),Od={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function EA(){if(N_)return Ce;N_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.iterator;function x(D){return D===null||typeof D!="object"?null:(D=R&&D[R]||D["@@iterator"],typeof D=="function"?D:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,te={};function W(D,Z,ne){this.props=D,this.context=Z,this.refs=te,this.updater=ne||q}W.prototype.isReactComponent={},W.prototype.setState=function(D,Z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Z,"setState")},W.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ue(){}ue.prototype=W.prototype;function le(D,Z,ne){this.props=D,this.context=Z,this.refs=te,this.updater=ne||q}var J=le.prototype=new ue;J.constructor=le,Y(J,W.prototype),J.isPureReactComponent=!0;var de=Array.isArray,pe={H:null,A:null,T:null,S:null,V:null},we=Object.prototype.hasOwnProperty;function M(D,Z,ne,ee,he,Ie){return ne=Ie.ref,{$$typeof:r,type:D,key:Z,ref:ne!==void 0?ne:null,props:Ie}}function w(D,Z){return M(D.type,Z,void 0,void 0,void 0,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function O(D){var Z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ne){return Z[ne]})}var V=/\/+/g;function P(D,Z){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):Z.toString(36)}function C(){}function Ct(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(Z){D.status==="pending"&&(D.status="fulfilled",D.value=Z)},function(Z){D.status==="pending"&&(D.status="rejected",D.reason=Z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function rt(D,Z,ne,ee,he){var Ie=typeof D;(Ie==="undefined"||Ie==="boolean")&&(D=null);var ye=!1;if(D===null)ye=!0;else switch(Ie){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(D.$$typeof){case r:case e:ye=!0;break;case T:return ye=D._init,rt(ye(D._payload),Z,ne,ee,he)}}if(ye)return he=he(D),ye=ee===""?"."+P(D,0):ee,de(he)?(ne="",ye!=null&&(ne=ye.replace(V,"$&/")+"/"),rt(he,Z,ne,"",function(Cn){return Cn})):he!=null&&(I(he)&&(he=w(he,ne+(he.key==null||D&&D.key===he.key?"":(""+he.key).replace(V,"$&/")+"/")+ye)),Z.push(he)),1;ye=0;var Et=ee===""?".":ee+":";if(de(D))for(var Ke=0;Ke<D.length;Ke++)ee=D[Ke],Ie=Et+P(ee,Ke),ye+=rt(ee,Z,ne,Ie,he);else if(Ke=x(D),typeof Ke=="function")for(D=Ke.call(D),Ke=0;!(ee=D.next()).done;)ee=ee.value,Ie=Et+P(ee,Ke++),ye+=rt(ee,Z,ne,Ie,he);else if(Ie==="object"){if(typeof D.then=="function")return rt(Ct(D),Z,ne,ee,he);throw Z=String(D),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ye}function G(D,Z,ne){if(D==null)return D;var ee=[],he=0;return rt(D,ee,"","",function(Ie){return Z.call(ne,Ie,he++)}),ee}function re(D){if(D._status===-1){var Z=D._result;Z=Z(),Z.then(function(ne){(D._status===0||D._status===-1)&&(D._status=1,D._result=ne)},function(ne){(D._status===0||D._status===-1)&&(D._status=2,D._result=ne)}),D._status===-1&&(D._status=0,D._result=Z)}if(D._status===1)return D._result.default;throw D._result}var ce=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Be(){}return Ce.Children={map:G,forEach:function(D,Z,ne){G(D,function(){Z.apply(this,arguments)},ne)},count:function(D){var Z=0;return G(D,function(){Z++}),Z},toArray:function(D){return G(D,function(Z){return Z})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ce.Component=W,Ce.Fragment=n,Ce.Profiler=l,Ce.PureComponent=le,Ce.StrictMode=s,Ce.Suspense=g,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=pe,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(D){return pe.H.useMemoCache(D)}},Ce.cache=function(D){return function(){return D.apply(null,arguments)}},Ce.cloneElement=function(D,Z,ne){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ee=Y({},D.props),he=D.key,Ie=void 0;if(Z!=null)for(ye in Z.ref!==void 0&&(Ie=void 0),Z.key!==void 0&&(he=""+Z.key),Z)!we.call(Z,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&Z.ref===void 0||(ee[ye]=Z[ye]);var ye=arguments.length-2;if(ye===1)ee.children=ne;else if(1<ye){for(var Et=Array(ye),Ke=0;Ke<ye;Ke++)Et[Ke]=arguments[Ke+2];ee.children=Et}return M(D.type,he,void 0,void 0,Ie,ee)},Ce.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Ce.createElement=function(D,Z,ne){var ee,he={},Ie=null;if(Z!=null)for(ee in Z.key!==void 0&&(Ie=""+Z.key),Z)we.call(Z,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(he[ee]=Z[ee]);var ye=arguments.length-2;if(ye===1)he.children=ne;else if(1<ye){for(var Et=Array(ye),Ke=0;Ke<ye;Ke++)Et[Ke]=arguments[Ke+2];he.children=Et}if(D&&D.defaultProps)for(ee in ye=D.defaultProps,ye)he[ee]===void 0&&(he[ee]=ye[ee]);return M(D,Ie,void 0,void 0,null,he)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(D){return{$$typeof:p,render:D}},Ce.isValidElement=I,Ce.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:re}},Ce.memo=function(D,Z){return{$$typeof:y,type:D,compare:Z===void 0?null:Z}},Ce.startTransition=function(D){var Z=pe.T,ne={};pe.T=ne;try{var ee=D(),he=pe.S;he!==null&&he(ne,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Be,ce)}catch(Ie){ce(Ie)}finally{pe.T=Z}},Ce.unstable_useCacheRefresh=function(){return pe.H.useCacheRefresh()},Ce.use=function(D){return pe.H.use(D)},Ce.useActionState=function(D,Z,ne){return pe.H.useActionState(D,Z,ne)},Ce.useCallback=function(D,Z){return pe.H.useCallback(D,Z)},Ce.useContext=function(D){return pe.H.useContext(D)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(D,Z){return pe.H.useDeferredValue(D,Z)},Ce.useEffect=function(D,Z,ne){var ee=pe.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(D,Z)},Ce.useId=function(){return pe.H.useId()},Ce.useImperativeHandle=function(D,Z,ne){return pe.H.useImperativeHandle(D,Z,ne)},Ce.useInsertionEffect=function(D,Z){return pe.H.useInsertionEffect(D,Z)},Ce.useLayoutEffect=function(D,Z){return pe.H.useLayoutEffect(D,Z)},Ce.useMemo=function(D,Z){return pe.H.useMemo(D,Z)},Ce.useOptimistic=function(D,Z){return pe.H.useOptimistic(D,Z)},Ce.useReducer=function(D,Z,ne){return pe.H.useReducer(D,Z,ne)},Ce.useRef=function(D){return pe.H.useRef(D)},Ce.useState=function(D){return pe.H.useState(D)},Ce.useSyncExternalStore=function(D,Z,ne){return pe.H.useSyncExternalStore(D,Z,ne)},Ce.useTransition=function(){return pe.H.useTransition()},Ce.version="19.1.1",Ce}var O_;function Rm(){return O_||(O_=1,Od.exports=EA()),Od.exports}var Me=Rm(),Md={exports:{}},Tl={},Vd={exports:{}},kd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function TA(){return M_||(M_=1,(function(r){function e(G,re){var ce=G.length;G.push(re);e:for(;0<ce;){var Be=ce-1>>>1,D=G[Be];if(0<l(D,re))G[Be]=re,G[ce]=D,ce=Be;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var re=G[0],ce=G.pop();if(ce!==re){G[0]=ce;e:for(var Be=0,D=G.length,Z=D>>>1;Be<Z;){var ne=2*(Be+1)-1,ee=G[ne],he=ne+1,Ie=G[he];if(0>l(ee,ce))he<D&&0>l(Ie,ee)?(G[Be]=Ie,G[he]=ce,Be=he):(G[Be]=ee,G[ne]=ce,Be=ne);else if(he<D&&0>l(Ie,ce))G[Be]=Ie,G[he]=ce,Be=he;else break e}}return re}function l(G,re){var ce=G.sortIndex-re.sortIndex;return ce!==0?ce:G.id-re.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],y=[],T=1,R=null,x=3,q=!1,Y=!1,te=!1,W=!1,ue=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function de(G){for(var re=n(y);re!==null;){if(re.callback===null)s(y);else if(re.startTime<=G)s(y),re.sortIndex=re.expirationTime,e(g,re);else break;re=n(y)}}function pe(G){if(te=!1,de(G),!Y)if(n(g)!==null)Y=!0,we||(we=!0,P());else{var re=n(y);re!==null&&rt(pe,re.startTime-G)}}var we=!1,M=-1,w=5,I=-1;function O(){return W?!0:!(r.unstable_now()-I<w)}function V(){if(W=!1,we){var G=r.unstable_now();I=G;var re=!0;try{e:{Y=!1,te&&(te=!1,le(M),M=-1),q=!0;var ce=x;try{t:{for(de(G),R=n(g);R!==null&&!(R.expirationTime>G&&O());){var Be=R.callback;if(typeof Be=="function"){R.callback=null,x=R.priorityLevel;var D=Be(R.expirationTime<=G);if(G=r.unstable_now(),typeof D=="function"){R.callback=D,de(G),re=!0;break t}R===n(g)&&s(g),de(G)}else s(g);R=n(g)}if(R!==null)re=!0;else{var Z=n(y);Z!==null&&rt(pe,Z.startTime-G),re=!1}}break e}finally{R=null,x=ce,q=!1}re=void 0}}finally{re?P():we=!1}}}var P;if(typeof J=="function")P=function(){J(V)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ct=C.port2;C.port1.onmessage=V,P=function(){Ct.postMessage(null)}}else P=function(){ue(V,0)};function rt(G,re){M=ue(function(){G(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(G){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var ce=x;x=re;try{return G()}finally{x=ce}},r.unstable_requestPaint=function(){W=!0},r.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ce=x;x=G;try{return re()}finally{x=ce}},r.unstable_scheduleCallback=function(G,re,ce){var Be=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Be+ce:Be):ce=Be,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ce+D,G={id:T++,callback:re,priorityLevel:G,startTime:ce,expirationTime:D,sortIndex:-1},ce>Be?(G.sortIndex=ce,e(y,G),n(g)===null&&G===n(y)&&(te?(le(M),M=-1):te=!0,rt(pe,ce-Be))):(G.sortIndex=D,e(g,G),Y||q||(Y=!0,we||(we=!0,P()))),G},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(G){var re=x;return function(){var ce=x;x=re;try{return G.apply(this,arguments)}finally{x=ce}}}})(kd)),kd}var V_;function AA(){return V_||(V_=1,Vd.exports=TA()),Vd.exports}var Pd={exports:{}},Wt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_;function bA(){if(k_)return Wt;k_=1;var r=Rm();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:R==null?null:""+R,children:g,containerInfo:y,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Wt.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,T)},Wt.flushSync=function(g){var y=d.T,T=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=T,s.d.f()}},Wt.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Wt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Wt.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,R=p(T,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:R,integrity:x,fetchPriority:q}):T==="script"&&s.d.X(g,{crossOrigin:R,integrity:x,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Wt.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Wt.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,R=p(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:R,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Wt.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Wt.requestFormReset=function(g){s.d.r(g)},Wt.unstable_batchedUpdates=function(g,y){return g(y)},Wt.useFormState=function(g,y,T){return d.H.useFormState(g,y,T)},Wt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Wt.version="19.1.1",Wt}var P_;function wA(){if(P_)return Pd.exports;P_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pd.exports=bA(),Pd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function SA(){if(U_)return Tl;U_=1;var r=AA(),e=Rm(),n=wA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),t;if(f===o)return p(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,R=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),le=Symbol.for("react.consumer"),J=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Ct(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Y:return"Fragment";case W:return"Profiler";case te:return"StrictMode";case pe:return"Suspense";case we:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case J:return(t.displayName||"Context")+".Provider";case le:return(t._context.displayName||"Context")+".Consumer";case de:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return i=t.displayName||null,i!==null?i:Ct(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return Ct(t(i))}catch{}}return null}var rt=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Be=[],D=-1;function Z(t){return{current:t}}function ne(t){0>D||(t.current=Be[D],Be[D]=null,D--)}function ee(t,i){D++,Be[D]=t.current,t.current=i}var he=Z(null),Ie=Z(null),ye=Z(null),Et=Z(null);function Ke(t,i){switch(ee(ye,i),ee(Ie,t),ee(he,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?i_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=i_(i),t=r_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ne(he),ee(he,t)}function Cn(){ne(he),ne(Ie),ne(ye)}function Se(t){t.memoizedState!==null&&ee(Et,t);var i=he.current,a=r_(i,t.type);i!==a&&(ee(Ie,t),ee(he,a))}function Re(t){Ie.current===t&&(ne(he),ne(Ie)),Et.current===t&&(ne(Et),pl._currentValue=ce)}var qe=Object.prototype.hasOwnProperty,at=r.unstable_scheduleCallback,gn=r.unstable_cancelCallback,Fn=r.unstable_shouldYield,yn=r.unstable_requestPaint,ht=r.unstable_now,rn=r.unstable_getCurrentPriorityLevel,cn=r.unstable_ImmediatePriority,$s=r.unstable_UserBlockingPriority,ns=r.unstable_NormalPriority,Nh=r.unstable_LowPriority,Zs=r.unstable_IdlePriority,mo=r.log,iu=r.unstable_setDisableYieldValue,ft=null,Ye=null;function _n(t){if(typeof mo=="function"&&iu(t),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ft,t)}catch{}}var $t=Math.clz32?Math.clz32:is,ru=Math.log,Oh=Math.LN2;function is(t){return t>>>=0,t===0?32:31-(ru(t)/Oh|0)|0}var rs=256,ss=4194304;function Qn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ws(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=Qn(o):(v&=E,v!==0?h=Qn(v):a||(a=E&~t,a!==0&&(h=Qn(a))))):(E=o&~f,E!==0?h=Qn(E):v!==0?h=Qn(v):a||(a=o&~t,a!==0&&(h=Qn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function as(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function po(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function go(){var t=rs;return rs<<=1,(rs&4194048)===0&&(rs=256),t}function yo(){var t=ss;return ss<<=1,(ss&62914560)===0&&(ss=4194304),t}function Si(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ri(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function _o(t,i,a,o,h,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,S=t.expirationTimes,j=t.hiddenUpdates;for(a=v&~a;0<a;){var F=31-$t(a),X=1<<F;E[F]=0,S[F]=-1;var z=j[F];if(z!==null)for(j[F]=null,F=0;F<z.length;F++){var B=z[F];B!==null&&(B.lane&=-536870913)}a&=~X}o!==0&&ti(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~i))}function ti(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-$t(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function vo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-$t(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function sr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Js(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ar(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:b_(t.type))}function su(t,i){var a=re.p;try{return re.p=t,i()}finally{re.p=a}}var ot=Math.random().toString(36).slice(2),xt="__reactFiber$"+ot,Tt="__reactProps$"+ot,xn="__reactContainer$"+ot,Eo="__reactEvents$"+ot,Mh="__reactListeners$"+ot,or="__reactHandles$"+ot,au="__reactResources$"+ot,os="__reactMarker$"+ot;function lr(t){delete t[xt],delete t[Tt],delete t[Eo],delete t[Mh],delete t[or]}function Ii(t){var i=t[xt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[xn]||a[xt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=l_(t);t!==null;){if(a=t[xt])return a;t=l_(t)}return i}t=a,a=t.parentNode}return null}function ni(t){if(t=t[xt]||t[xn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ii(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function sn(t){var i=t[au];return i||(i=t[au]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function gt(t){t[os]=!0}var To=new Set,ea={};function Kn(t,i){Ci(t,i),Ci(t+"Capture",i)}function Ci(t,i){for(ea[t]=i,t=0;t<i.length;t++)To.add(i[t])}var ou=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lu={},ls={};function uu(t){return qe.call(ls,t)?!0:qe.call(lu,t)?!1:ou.test(t)?ls[t]=!0:(lu[t]=!0,!1)}function ur(t,i,a){if(uu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ri(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function qt(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}var us,cu;function xi(t){if(us===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);us=i&&i[1]||"",cu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+us+t+cu}var ta=!1;function na(t,i){if(!t||ta)return"";ta=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(B){var z=B}Reflect.construct(t,[],X)}else{try{X.call()}catch(B){z=B}t.call(X.prototype)}}else{try{throw Error()}catch(B){z=B}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var S=v.split(`
`),j=E.split(`
`);for(h=o=0;o<S.length&&!S[o].includes("DetermineComponentFrameRoot");)o++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(o===S.length||h===j.length)for(o=S.length-1,h=j.length-1;1<=o&&0<=h&&S[o]!==j[h];)h--;for(;1<=o&&0<=h;o--,h--)if(S[o]!==j[h]){if(o!==1||h!==1)do if(o--,h--,0>h||S[o]!==j[h]){var F=`
`+S[o].replace(" at new "," at ");return t.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",t.displayName)),F}while(1<=o&&0<=h);break}}}finally{ta=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?xi(a):""}function Ao(t){switch(t.tag){case 26:case 27:case 5:return xi(t.type);case 16:return xi("Lazy");case 13:return xi("Suspense");case 19:return xi("SuspenseList");case 0:case 15:return na(t.type,!1);case 11:return na(t.type.render,!1);case 1:return na(t.type,!0);case 31:return xi("Activity");default:return""}}function ia(t){try{var i="";do i+=Ao(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Vh(t){var i=bo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ra(t){t._valueTracker||(t._valueTracker=Vh(t))}function wo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=bo(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function cs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var kh=/[\n"\\]/g;function At(t){return t.replace(kh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function vn(t,i,a,o,h,f,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+an(i)):t.value!==""+an(i)&&(t.value=""+an(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?cr(t,v,an(i)):a!=null?cr(t,v,an(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+an(E):t.removeAttribute("name")}function hs(t,i,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+an(a):"",i=i!=null?""+an(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function cr(t,i,a){i==="number"&&cs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Di(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+an(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ze(t,i,a){if(i!=null&&(i=""+an(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+an(a):""}function fs(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(rt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=an(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function Dn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ds=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hu(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||ds.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function So(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&hu(t,h,o)}else for(var f in i)i.hasOwnProperty(f)&&hu(t,f,i[f])}function Ro(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ph=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sa(t){return Uh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ni=null;function Nn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oi=null,Mi=null;function Io(t){var i=ni(t);if(i&&(t=i.stateNode)){var a=t[Tt]||null;e:switch(t=i.stateNode,i.type){case"input":if(vn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+At(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Tt]||null;if(!h)throw Error(s(90));vn(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&wo(o)}break e;case"textarea":Ze(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Di(t,!!a.multiple,i,!1)}}}var si=!1;function fu(t,i,a){if(si)return t(i,a);si=!0;try{var o=t(i);return o}finally{if(si=!1,(Oi!==null||Mi!==null)&&(sc(),Oi&&(i=Oi,t=Mi,Mi=Oi=null,Io(i),t)))for(i=0;i<t.length;i++)Io(t[i])}}function ms(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Tt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),On=!1;if(Yn)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){On=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{On=!1}var ai=null,hr=null,Vi=null;function Co(){if(Vi)return Vi;var t,i=hr,a=i.length,o,h="value"in ai?ai.value:ai.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&i[a-o]===h[f-o];o++);return Vi=h.slice(t,1<o?1-o:void 0)}function oi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function li(){return!0}function xo(){return!1}function Pt(t){function i(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?li:xo,this.isPropagationStopped=xo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=li)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=li)},persist:function(){},isPersistent:li}),i}var Fe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=Pt(Fe),gs=T({},Fe,{view:0,detail:0}),du=Pt(gs),oa,la,ui,ys=T({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Es,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ui&&(ui&&t.type==="mousemove"?(oa=t.screenX-ui.screenX,la=t.screenY-ui.screenY):la=oa=0,ui=t),oa)},movementY:function(t){return"movementY"in t?t.movementY:la}}),Mn=Pt(ys),mu=T({},ys,{dataTransfer:0}),Lh=Pt(mu),_s=T({},gs,{relatedTarget:0}),ua=Pt(_s),Do=T({},Fe,{animationName:0,elapsedTime:0,pseudoElement:0}),ca=Pt(Do),pu=T({},Fe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ha=Pt(pu),jh=T({},Fe,{data:0}),No=Pt(jh),vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=yu[t])?!!i[t]:!1}function Es(){return Oo}var _u=T({},gs,{key:function(t){if(t.key){var i=vs[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=oi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Es,charCode:function(t){return t.type==="keypress"?oi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?oi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fa=Pt(_u),vu=T({},ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mo=Pt(vu),ki=T({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Es}),Eu=Pt(ki),Tu=T({},Fe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Au=Pt(Tu),bu=T({},ys,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),da=Pt(bu),on=T({},Fe,{newState:0,oldState:0}),wu=Pt(on),Su=[9,13,27,32],ci=Yn&&"CompositionEvent"in window,u=null;Yn&&"documentMode"in document&&(u=document.documentMode);var m=Yn&&"TextEvent"in window&&!u,_=Yn&&(!ci||u&&8<u&&11>=u),A=" ",U=!1;function H(t,i){switch(t){case"keyup":return Su.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ie(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ue=!1;function Dt(t,i){switch(t){case"compositionend":return ie(i);case"keypress":return i.which!==32?null:(U=!0,A);case"textInput":return t=i.data,t===A&&U?null:t;default:return null}}function Le(t,i){if(Ue)return t==="compositionend"||!ci&&H(t,i)?(t=Co(),Vi=hr=ai=null,Ue=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Ut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ut[t.type]:i==="textarea"}function Pi(t,i,a,o){Oi?Mi?Mi.push(o):Mi=[o]:Oi=o,i=hc(i,"onChange"),0<i.length&&(a=new aa("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var Ht=null,hi=null;function Vo(t){Wy(t,0)}function Ru(t){var i=ii(t);if(wo(i))return t}function vp(t,i){if(t==="change")return i}var Ep=!1;if(Yn){var zh;if(Yn){var Bh="oninput"in document;if(!Bh){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),Bh=typeof Tp.oninput=="function"}zh=Bh}else zh=!1;Ep=zh&&(!document.documentMode||9<document.documentMode)}function Ap(){Ht&&(Ht.detachEvent("onpropertychange",bp),hi=Ht=null)}function bp(t){if(t.propertyName==="value"&&Ru(hi)){var i=[];Pi(i,hi,t,Nn(t)),fu(Vo,i)}}function YT(t,i,a){t==="focusin"?(Ap(),Ht=i,hi=a,Ht.attachEvent("onpropertychange",bp)):t==="focusout"&&Ap()}function XT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ru(hi)}function $T(t,i){if(t==="click")return Ru(i)}function ZT(t,i){if(t==="input"||t==="change")return Ru(i)}function WT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var En=typeof Object.is=="function"?Object.is:WT;function ko(t,i){if(En(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!qe.call(i,h)||!En(t[h],i[h]))return!1}return!0}function wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sp(t,i){var a=wp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wp(a)}}function Rp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Rp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Ip(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=cs(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=cs(t.document)}return i}function qh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var JT=Yn&&"documentMode"in document&&11>=document.documentMode,ma=null,Hh=null,Po=null,Gh=!1;function Cp(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gh||ma==null||ma!==cs(o)||(o=ma,"selectionStart"in o&&qh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Po&&ko(Po,o)||(Po=o,o=hc(Hh,"onSelect"),0<o.length&&(i=new aa("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=ma)))}function Ts(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var pa={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},Fh={},xp={};Yn&&(xp=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function As(t){if(Fh[t])return Fh[t];if(!pa[t])return t;var i=pa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in xp)return Fh[t]=i[a];return t}var Dp=As("animationend"),Np=As("animationiteration"),Op=As("animationstart"),e1=As("transitionrun"),t1=As("transitionstart"),n1=As("transitioncancel"),Mp=As("transitionend"),Vp=new Map,Qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qh.push("scrollEnd");function Xn(t,i){Vp.set(t,i),Kn(i,[t])}var kp=new WeakMap;function Vn(t,i){if(typeof t=="object"&&t!==null){var a=kp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ia(i)},kp.set(t,i),i)}return{value:t,source:i,stack:ia(i)}}var kn=[],ga=0,Kh=0;function Iu(){for(var t=ga,i=Kh=ga=0;i<t;){var a=kn[i];kn[i++]=null;var o=kn[i];kn[i++]=null;var h=kn[i];kn[i++]=null;var f=kn[i];if(kn[i++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&Pp(a,h,f)}}function Cu(t,i,a,o){kn[ga++]=t,kn[ga++]=i,kn[ga++]=a,kn[ga++]=o,Kh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Yh(t,i,a,o){return Cu(t,i,a,o),xu(t)}function ya(t,i){return Cu(t,null,null,i),xu(t)}function Pp(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-$t(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function xu(t){if(50<ol)throw ol=0,td=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var _a={};function i1(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,i,a,o){return new i1(t,i,a,o)}function Xh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ui(t,i){var a=t.alternate;return a===null?(a=Tn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Up(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Du(t,i,a,o,h,f){var v=0;if(o=t,typeof t=="function")Xh(t)&&(v=1);else if(typeof t=="string")v=sA(t,a,he.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Tn(31,a,i,h),t.elementType=I,t.lanes=f,t;case Y:return bs(a.children,h,f,i);case te:v=8,h|=24;break;case W:return t=Tn(12,a,i,h|2),t.elementType=W,t.lanes=f,t;case pe:return t=Tn(13,a,i,h),t.elementType=pe,t.lanes=f,t;case we:return t=Tn(19,a,i,h),t.elementType=we,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ue:case J:v=10;break e;case le:v=9;break e;case de:v=11;break e;case M:v=14;break e;case w:v=16,o=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),o=null}return i=Tn(v,a,i,h),i.elementType=t,i.type=o,i.lanes=f,i}function bs(t,i,a,o){return t=Tn(7,t,o,i),t.lanes=a,t}function $h(t,i,a){return t=Tn(6,t,null,i),t.lanes=a,t}function Zh(t,i,a){return i=Tn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var va=[],Ea=0,Nu=null,Ou=0,Pn=[],Un=0,ws=null,Li=1,ji="";function Ss(t,i){va[Ea++]=Ou,va[Ea++]=Nu,Nu=t,Ou=i}function Lp(t,i,a){Pn[Un++]=Li,Pn[Un++]=ji,Pn[Un++]=ws,ws=t;var o=Li;t=ji;var h=32-$t(o)-1;o&=~(1<<h),a+=1;var f=32-$t(i)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Li=1<<32-$t(i)+h|a<<h|o,ji=f+t}else Li=1<<f|a<<h|o,ji=t}function Wh(t){t.return!==null&&(Ss(t,1),Lp(t,1,0))}function Jh(t){for(;t===Nu;)Nu=va[--Ea],va[Ea]=null,Ou=va[--Ea],va[Ea]=null;for(;t===ws;)ws=Pn[--Un],Pn[Un]=null,ji=Pn[--Un],Pn[Un]=null,Li=Pn[--Un],Pn[Un]=null}var ln=null,dt=null,Ge=!1,Rs=null,fi=!1,ef=Error(s(519));function Is(t){var i=Error(s(418,""));throw jo(Vn(i,t)),ef}function jp(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[xt]=t,i[Tt]=o,a){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(a=0;a<ul.length;a++)Oe(ul[a],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),hs(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),ra(i);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),fs(i,o.value,o.defaultValue,o.children),ra(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||n_(i.textContent,a)?(o.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),o.onScroll!=null&&Oe("scroll",i),o.onScrollEnd!=null&&Oe("scrollend",i),o.onClick!=null&&(i.onclick=fc),i=!0):i=!1,i||Is(t)}function zp(t){for(ln=t.return;ln;)switch(ln.tag){case 5:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:ln=ln.return}}function Uo(t){if(t!==ln)return!1;if(!Ge)return zp(t),Ge=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||yd(t.type,t.memoizedProps)),a=!a),a&&dt&&Is(t),zp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){dt=Zn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}dt=null}}else i===27?(i=dt,Ir(t.type)?(t=Td,Td=null,dt=t):dt=i):dt=ln?Zn(t.stateNode.nextSibling):null;return!0}function Lo(){dt=ln=null,Ge=!1}function Bp(){var t=Rs;return t!==null&&(dn===null?dn=t:dn.push.apply(dn,t),Rs=null),t}function jo(t){Rs===null?Rs=[t]:Rs.push(t)}var tf=Z(null),Cs=null,zi=null;function fr(t,i,a){ee(tf,i._currentValue),i._currentValue=a}function Bi(t){t._currentValue=tf.current,ne(tf)}function nf(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function rf(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=h;for(var S=0;S<i.length;S++)if(E.context===i[S]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),nf(f.return,a,t),o||(v=null);break e}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),nf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function zo(t,i,a,o){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;En(h.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(h===Et.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(pl):t=[pl])}h=h.return}t!==null&&rf(i,t,a,o),i.flags|=262144}function Mu(t){for(t=t.firstContext;t!==null;){if(!En(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function xs(t){Cs=t,zi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zt(t){return qp(Cs,t)}function Vu(t,i){return Cs===null&&xs(t),qp(t,i)}function qp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},zi===null){if(t===null)throw Error(s(308));zi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else zi=zi.next=i;return a}var r1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},s1=r.unstable_scheduleCallback,a1=r.unstable_NormalPriority,Ot={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new r1,data:new Map,refCount:0}}function Bo(t){t.refCount--,t.refCount===0&&s1(a1,function(){t.controller.abort()})}var qo=null,af=0,Ta=0,Aa=null;function o1(t,i){if(qo===null){var a=qo=[];af=0,Ta=ld(),Aa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return af++,i.then(Hp,Hp),i}function Hp(){if(--af===0&&qo!==null){Aa!==null&&(Aa.status="fulfilled");var t=qo;qo=null,Ta=0,Aa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function l1(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Gp=G.S;G.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&o1(t,i),Gp!==null&&Gp(t,i)};var Ds=Z(null);function of(){var t=Ds.current;return t!==null?t:nt.pooledCache}function ku(t,i){i===null?ee(Ds,Ds.current):ee(Ds,i.pool)}function Fp(){var t=of();return t===null?null:{parent:Ot._currentValue,pool:t}}var Ho=Error(s(460)),Qp=Error(s(474)),Pu=Error(s(542)),lf={then:function(){}};function Kp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Uu(){}function Yp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Uu,Uu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$p(t),t;default:if(typeof i.status=="string")i.then(Uu,Uu);else{if(t=nt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$p(t),t}throw Go=i,Ho}}var Go=null;function Xp(){if(Go===null)throw Error(s(459));var t=Go;return Go=null,t}function $p(t){if(t===Ho||t===Pu)throw Error(s(483))}var dr=!1;function uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pr(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Xe&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=xu(t),Pp(t,null,a),i}return Cu(t,o,i,a),xu(t)}function Fo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,vo(t,a)}}function hf(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var ff=!1;function Qo(){if(ff){var t=Aa;if(t!==null)throw t}}function Ko(t,i,a,o){ff=!1;var h=t.updateQueue;dr=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var S=E,j=S.next;S.next=null,v===null?f=j:v.next=j,v=S;var F=t.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==v&&(E===null?F.firstBaseUpdate=j:E.next=j,F.lastBaseUpdate=S))}if(f!==null){var X=h.baseState;v=0,F=j=S=null,E=f;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(je&z)===z:(o&z)===z){z!==0&&z===Ta&&(ff=!0),F!==null&&(F=F.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Te=t,ge=E;z=i;var et=a;switch(ge.tag){case 1:if(Te=ge.payload,typeof Te=="function"){X=Te.call(et,X,z);break e}X=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=ge.payload,z=typeof Te=="function"?Te.call(et,X,z):Te,z==null)break e;X=T({},X,z);break e;case 2:dr=!0}}z=E.callback,z!==null&&(t.flags|=64,B&&(t.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(j=F=B,S=X):F=F.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);F===null&&(S=X),h.baseState=S,h.firstBaseUpdate=j,h.lastBaseUpdate=F,f===null&&(h.shared.lanes=0),br|=v,t.lanes=v,t.memoizedState=X}}function Zp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Wp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Zp(a[t],i)}var ba=Z(null),Lu=Z(0);function Jp(t,i){t=Yi,ee(Lu,t),ee(ba,i),Yi=t|i.baseLanes}function df(){ee(Lu,Yi),ee(ba,ba.current)}function mf(){Yi=Lu.current,ne(ba),ne(Lu)}var gr=0,xe=null,We=null,bt=null,ju=!1,wa=!1,Ns=!1,zu=0,Yo=0,Sa=null,u1=0;function yt(){throw Error(s(321))}function pf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!En(t[a],i[a]))return!1;return!0}function gf(t,i,a,o,h,f){return gr=f,xe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=t===null||t.memoizedState===null?Pg:Ug,Ns=!1,f=a(o,h),Ns=!1,wa&&(f=tg(i,a,o,h)),eg(t),f}function eg(t){G.H=Qu;var i=We!==null&&We.next!==null;if(gr=0,bt=We=xe=null,ju=!1,Yo=0,Sa=null,i)throw Error(s(300));t===null||Lt||(t=t.dependencies,t!==null&&Mu(t)&&(Lt=!0))}function tg(t,i,a,o){xe=t;var h=0;do{if(wa&&(Sa=null),Yo=0,wa=!1,25<=h)throw Error(s(301));if(h+=1,bt=We=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=g1,f=i(a,o)}while(wa);return f}function c1(){var t=G.H,i=t.useState()[0];return i=typeof i.then=="function"?Xo(i):i,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(xe.flags|=1024),i}function yf(){var t=zu!==0;return zu=0,t}function _f(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function vf(t){if(ju){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}ju=!1}gr=0,bt=We=xe=null,wa=!1,Yo=zu=0,Sa=null}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?xe.memoizedState=bt=t:bt=bt.next=t,bt}function wt(){if(We===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var i=bt===null?xe.memoizedState:bt.next;if(i!==null)bt=i,We=t;else{if(t===null)throw xe.alternate===null?Error(s(467)):Error(s(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},bt===null?xe.memoizedState=bt=t:bt=bt.next=t}return bt}function Ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xo(t){var i=Yo;return Yo+=1,Sa===null&&(Sa=[]),t=Yp(Sa,t,i),i=xe,(bt===null?i.memoizedState:bt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?Pg:Ug),t}function Bu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Xo(t);if(t.$$typeof===J)return Zt(t)}throw Error(s(438,String(t)))}function Tf(t){var i=null,a=xe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=xe.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ef(),xe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=O;return i.index++,a}function qi(t,i){return typeof i=="function"?i(t):i}function qu(t){var i=wt();return Af(i,We,t)}function Af(t,i,a){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}i.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var E=v=null,S=null,j=i,F=!1;do{var X=j.lane&-536870913;if(X!==j.lane?(je&X)===X:(gr&X)===X){var z=j.revertLane;if(z===0)S!==null&&(S=S.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),X===Ta&&(F=!0);else if((gr&z)===z){j=j.next,z===Ta&&(F=!0);continue}else X={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},S===null?(E=S=X,v=f):S=S.next=X,xe.lanes|=z,br|=z;X=j.action,Ns&&a(f,X),f=j.hasEagerState?j.eagerState:a(f,X)}else z={lane:X,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},S===null?(E=S=z,v=f):S=S.next=z,xe.lanes|=X,br|=X;j=j.next}while(j!==null&&j!==i);if(S===null?v=f:S.next=E,!En(f,t.memoizedState)&&(Lt=!0,F&&(a=Aa,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=S,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function bf(t){var i=wt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=t(f,v.action),v=v.next;while(v!==h);En(f,i.memoizedState)||(Lt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function ng(t,i,a){var o=xe,h=wt(),f=Ge;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!En((We||h).memoizedState,a);v&&(h.memoizedState=a,Lt=!0),h=h.queue;var E=sg.bind(null,o,h,t);if($o(2048,8,E,[t]),h.getSnapshot!==i||v||bt!==null&&bt.memoizedState.tag&1){if(o.flags|=2048,Ra(9,Hu(),rg.bind(null,o,h,a,i),null),nt===null)throw Error(s(349));f||(gr&124)!==0||ig(o,i,a)}return a}function ig(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=xe.updateQueue,i===null?(i=Ef(),xe.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function rg(t,i,a,o){i.value=a,i.getSnapshot=o,ag(i)&&og(t)}function sg(t,i,a){return a(function(){ag(i)&&og(t)})}function ag(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!En(t,a)}catch{return!0}}function og(t){var i=ya(t,2);i!==null&&Rn(i,t,2)}function wf(t){var i=hn();if(typeof t=="function"){var a=t;if(t=a(),Ns){_n(!0);try{a()}finally{_n(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:t},i}function lg(t,i,a,o){return t.baseState=a,Af(t,We,typeof o=="function"?o:qi)}function h1(t,i,a,o,h){if(Fu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};G.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,ug(i,f)):(f.next=a.next,i.pending=a.next=f)}}function ug(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var f=G.T,v={};G.T=v;try{var E=a(h,o),S=G.S;S!==null&&S(v,E),cg(t,i,E)}catch(j){Sf(t,i,j)}finally{G.T=f}}else try{f=a(h,o),cg(t,i,f)}catch(j){Sf(t,i,j)}}function cg(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){hg(t,i,o)},function(o){return Sf(t,i,o)}):hg(t,i,a)}function hg(t,i,a){i.status="fulfilled",i.value=a,fg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ug(t,a)))}function Sf(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,fg(i),i=i.next;while(i!==o)}t.action=null}function fg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function dg(t,i){return i}function mg(t,i){if(Ge){var a=nt.formState;if(a!==null){e:{var o=xe;if(Ge){if(dt){t:{for(var h=dt,f=fi;h.nodeType!==8;){if(!f){h=null;break t}if(h=Zn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){dt=Zn(h.nextSibling),o=h.data==="F!";break e}}Is(o)}o=!1}o&&(i=a[0])}}return a=hn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dg,lastRenderedState:i},a.queue=o,a=Mg.bind(null,xe,o),o.dispatch=a,o=wf(!1),f=Df.bind(null,xe,!1,o.queue),o=hn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=h1.bind(null,xe,h,f,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function pg(t){var i=wt();return gg(i,We,t)}function gg(t,i,a){if(i=Af(t,i,dg)[0],t=qu(qi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Xo(i)}catch(v){throw v===Ho?Pu:v}else o=i;i=wt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(xe.flags|=2048,Ra(9,Hu(),f1.bind(null,h,a),null)),[o,f,t]}function f1(t,i){t.action=i}function yg(t){var i=wt(),a=We;if(a!==null)return gg(i,a,t);wt(),i=i.memoizedState,a=wt();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Ra(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=xe.updateQueue,i===null&&(i=Ef(),xe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Hu(){return{destroy:void 0,resource:void 0}}function _g(){return wt().memoizedState}function Gu(t,i,a,o){var h=hn();o=o===void 0?null:o,xe.flags|=t,h.memoizedState=Ra(1|i,Hu(),a,o)}function $o(t,i,a,o){var h=wt();o=o===void 0?null:o;var f=h.memoizedState.inst;We!==null&&o!==null&&pf(o,We.memoizedState.deps)?h.memoizedState=Ra(i,f,a,o):(xe.flags|=t,h.memoizedState=Ra(1|i,f,a,o))}function vg(t,i){Gu(8390656,8,t,i)}function Eg(t,i){$o(2048,8,t,i)}function Tg(t,i){return $o(4,2,t,i)}function Ag(t,i){return $o(4,4,t,i)}function bg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function wg(t,i,a){a=a!=null?a.concat([t]):null,$o(4,4,bg.bind(null,i,t),a)}function Rf(){}function Sg(t,i){var a=wt();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&pf(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Rg(t,i){var a=wt();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&pf(i,o[1]))return o[0];if(o=t(),Ns){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[o,i],o}function If(t,i,a){return a===void 0||(gr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=xy(),xe.lanes|=t,br|=t,a)}function Ig(t,i,a,o){return En(a,i)?a:ba.current!==null?(t=If(t,a,o),En(t,i)||(Lt=!0),t):(gr&42)===0?(Lt=!0,t.memoizedState=a):(t=xy(),xe.lanes|=t,br|=t,i)}function Cg(t,i,a,o,h){var f=re.p;re.p=f!==0&&8>f?f:8;var v=G.T,E={};G.T=E,Df(t,!1,i,a);try{var S=h(),j=G.S;if(j!==null&&j(E,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var F=l1(S,o);Zo(t,i,F,Sn(t))}else Zo(t,i,o,Sn(t))}catch(X){Zo(t,i,{then:function(){},status:"rejected",reason:X},Sn())}finally{re.p=f,G.T=v}}function d1(){}function Cf(t,i,a,o){if(t.tag!==5)throw Error(s(476));var h=xg(t).queue;Cg(t,h,i,ce,a===null?d1:function(){return Dg(t),a(o)})}function xg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:ce},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Dg(t){var i=xg(t).next.queue;Zo(t,i,{},Sn())}function xf(){return Zt(pl)}function Ng(){return wt().memoizedState}function Og(){return wt().memoizedState}function m1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Sn();t=mr(a);var o=pr(i,t,a);o!==null&&(Rn(o,i,a),Fo(o,i,a)),i={cache:sf()},t.payload=i;return}i=i.return}}function p1(t,i,a){var o=Sn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Fu(t)?Vg(i,a):(a=Yh(t,i,a,o),a!==null&&(Rn(a,t,o),kg(a,i,o)))}function Mg(t,i,a){var o=Sn();Zo(t,i,a,o)}function Zo(t,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fu(t))Vg(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,En(E,v))return Cu(t,i,h,0),nt===null&&Iu(),!1}catch{}finally{}if(a=Yh(t,i,h,o),a!==null)return Rn(a,t,o),kg(a,i,o),!0}return!1}function Df(t,i,a,o){if(o={lane:2,revertLane:ld(),action:o,hasEagerState:!1,eagerState:null,next:null},Fu(t)){if(i)throw Error(s(479))}else i=Yh(t,a,o,2),i!==null&&Rn(i,t,2)}function Fu(t){var i=t.alternate;return t===xe||i!==null&&i===xe}function Vg(t,i){wa=ju=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function kg(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,vo(t,a)}}var Qu={readContext:Zt,use:Bu,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt},Pg={readContext:Zt,use:Bu,useCallback:function(t,i){return hn().memoizedState=[t,i===void 0?null:i],t},useContext:Zt,useEffect:vg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Gu(4194308,4,bg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Gu(4194308,4,t,i)},useInsertionEffect:function(t,i){Gu(4,2,t,i)},useMemo:function(t,i){var a=hn();i=i===void 0?null:i;var o=t();if(Ns){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=hn();if(a!==void 0){var h=a(i);if(Ns){_n(!0);try{a(i)}finally{_n(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=p1.bind(null,xe,t),[o.memoizedState,t]},useRef:function(t){var i=hn();return t={current:t},i.memoizedState=t},useState:function(t){t=wf(t);var i=t.queue,a=Mg.bind(null,xe,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Rf,useDeferredValue:function(t,i){var a=hn();return If(a,t,i)},useTransition:function(){var t=wf(!1);return t=Cg.bind(null,xe,t.queue,!0,!1),hn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=xe,h=hn();if(Ge){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),nt===null)throw Error(s(349));(je&124)!==0||ig(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,vg(sg.bind(null,o,f,t),[t]),o.flags|=2048,Ra(9,Hu(),rg.bind(null,o,f,a,i),null),a},useId:function(){var t=hn(),i=nt.identifierPrefix;if(Ge){var a=ji,o=Li;a=(o&~(1<<32-$t(o)-1)).toString(32)+a,i="«"+i+"R"+a,a=zu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=u1++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:xf,useFormState:mg,useActionState:mg,useOptimistic:function(t){var i=hn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Df.bind(null,xe,!0,a),a.dispatch=i,[t,i]},useMemoCache:Tf,useCacheRefresh:function(){return hn().memoizedState=m1.bind(null,xe)}},Ug={readContext:Zt,use:Bu,useCallback:Sg,useContext:Zt,useEffect:Eg,useImperativeHandle:wg,useInsertionEffect:Tg,useLayoutEffect:Ag,useMemo:Rg,useReducer:qu,useRef:_g,useState:function(){return qu(qi)},useDebugValue:Rf,useDeferredValue:function(t,i){var a=wt();return Ig(a,We.memoizedState,t,i)},useTransition:function(){var t=qu(qi)[0],i=wt().memoizedState;return[typeof t=="boolean"?t:Xo(t),i]},useSyncExternalStore:ng,useId:Ng,useHostTransitionStatus:xf,useFormState:pg,useActionState:pg,useOptimistic:function(t,i){var a=wt();return lg(a,We,t,i)},useMemoCache:Tf,useCacheRefresh:Og},g1={readContext:Zt,use:Bu,useCallback:Sg,useContext:Zt,useEffect:Eg,useImperativeHandle:wg,useInsertionEffect:Tg,useLayoutEffect:Ag,useMemo:Rg,useReducer:bf,useRef:_g,useState:function(){return bf(qi)},useDebugValue:Rf,useDeferredValue:function(t,i){var a=wt();return We===null?If(a,t,i):Ig(a,We.memoizedState,t,i)},useTransition:function(){var t=bf(qi)[0],i=wt().memoizedState;return[typeof t=="boolean"?t:Xo(t),i]},useSyncExternalStore:ng,useId:Ng,useHostTransitionStatus:xf,useFormState:yg,useActionState:yg,useOptimistic:function(t,i){var a=wt();return We!==null?lg(a,We,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Tf,useCacheRefresh:Og},Ia=null,Wo=0;function Ku(t){var i=Wo;return Wo+=1,Ia===null&&(Ia=[]),Yp(Ia,t,i)}function Jo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Yu(t,i){throw i.$$typeof===R?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Lg(t){var i=t._init;return i(t._payload)}function jg(t){function i(k,N){if(t){var L=k.deletions;L===null?(k.deletions=[N],k.flags|=16):L.push(N)}}function a(k,N){if(!t)return null;for(;N!==null;)i(k,N),N=N.sibling;return null}function o(k){for(var N=new Map;k!==null;)k.key!==null?N.set(k.key,k):N.set(k.index,k),k=k.sibling;return N}function h(k,N){return k=Ui(k,N),k.index=0,k.sibling=null,k}function f(k,N,L){return k.index=L,t?(L=k.alternate,L!==null?(L=L.index,L<N?(k.flags|=67108866,N):L):(k.flags|=67108866,N)):(k.flags|=1048576,N)}function v(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function E(k,N,L,Q){return N===null||N.tag!==6?(N=$h(L,k.mode,Q),N.return=k,N):(N=h(N,L),N.return=k,N)}function S(k,N,L,Q){var oe=L.type;return oe===Y?F(k,N,L.props.children,Q,L.key):N!==null&&(N.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===w&&Lg(oe)===N.type)?(N=h(N,L.props),Jo(N,L),N.return=k,N):(N=Du(L.type,L.key,L.props,null,k.mode,Q),Jo(N,L),N.return=k,N)}function j(k,N,L,Q){return N===null||N.tag!==4||N.stateNode.containerInfo!==L.containerInfo||N.stateNode.implementation!==L.implementation?(N=Zh(L,k.mode,Q),N.return=k,N):(N=h(N,L.children||[]),N.return=k,N)}function F(k,N,L,Q,oe){return N===null||N.tag!==7?(N=bs(L,k.mode,Q,oe),N.return=k,N):(N=h(N,L),N.return=k,N)}function X(k,N,L){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=$h(""+N,k.mode,L),N.return=k,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case x:return L=Du(N.type,N.key,N.props,null,k.mode,L),Jo(L,N),L.return=k,L;case q:return N=Zh(N,k.mode,L),N.return=k,N;case w:var Q=N._init;return N=Q(N._payload),X(k,N,L)}if(rt(N)||P(N))return N=bs(N,k.mode,L,null),N.return=k,N;if(typeof N.then=="function")return X(k,Ku(N),L);if(N.$$typeof===J)return X(k,Vu(k,N),L);Yu(k,N)}return null}function z(k,N,L,Q){var oe=N!==null?N.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return oe!==null?null:E(k,N,""+L,Q);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case x:return L.key===oe?S(k,N,L,Q):null;case q:return L.key===oe?j(k,N,L,Q):null;case w:return oe=L._init,L=oe(L._payload),z(k,N,L,Q)}if(rt(L)||P(L))return oe!==null?null:F(k,N,L,Q,null);if(typeof L.then=="function")return z(k,N,Ku(L),Q);if(L.$$typeof===J)return z(k,N,Vu(k,L),Q);Yu(k,L)}return null}function B(k,N,L,Q,oe){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return k=k.get(L)||null,E(N,k,""+Q,oe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return k=k.get(Q.key===null?L:Q.key)||null,S(N,k,Q,oe);case q:return k=k.get(Q.key===null?L:Q.key)||null,j(N,k,Q,oe);case w:var De=Q._init;return Q=De(Q._payload),B(k,N,L,Q,oe)}if(rt(Q)||P(Q))return k=k.get(L)||null,F(N,k,Q,oe,null);if(typeof Q.then=="function")return B(k,N,L,Ku(Q),oe);if(Q.$$typeof===J)return B(k,N,L,Vu(N,Q),oe);Yu(N,Q)}return null}function Te(k,N,L,Q){for(var oe=null,De=null,fe=N,_e=N=0,zt=null;fe!==null&&_e<L.length;_e++){fe.index>_e?(zt=fe,fe=null):zt=fe.sibling;var He=z(k,fe,L[_e],Q);if(He===null){fe===null&&(fe=zt);break}t&&fe&&He.alternate===null&&i(k,fe),N=f(He,N,_e),De===null?oe=He:De.sibling=He,De=He,fe=zt}if(_e===L.length)return a(k,fe),Ge&&Ss(k,_e),oe;if(fe===null){for(;_e<L.length;_e++)fe=X(k,L[_e],Q),fe!==null&&(N=f(fe,N,_e),De===null?oe=fe:De.sibling=fe,De=fe);return Ge&&Ss(k,_e),oe}for(fe=o(fe);_e<L.length;_e++)zt=B(fe,k,_e,L[_e],Q),zt!==null&&(t&&zt.alternate!==null&&fe.delete(zt.key===null?_e:zt.key),N=f(zt,N,_e),De===null?oe=zt:De.sibling=zt,De=zt);return t&&fe.forEach(function(Or){return i(k,Or)}),Ge&&Ss(k,_e),oe}function ge(k,N,L,Q){if(L==null)throw Error(s(151));for(var oe=null,De=null,fe=N,_e=N=0,zt=null,He=L.next();fe!==null&&!He.done;_e++,He=L.next()){fe.index>_e?(zt=fe,fe=null):zt=fe.sibling;var Or=z(k,fe,He.value,Q);if(Or===null){fe===null&&(fe=zt);break}t&&fe&&Or.alternate===null&&i(k,fe),N=f(Or,N,_e),De===null?oe=Or:De.sibling=Or,De=Or,fe=zt}if(He.done)return a(k,fe),Ge&&Ss(k,_e),oe;if(fe===null){for(;!He.done;_e++,He=L.next())He=X(k,He.value,Q),He!==null&&(N=f(He,N,_e),De===null?oe=He:De.sibling=He,De=He);return Ge&&Ss(k,_e),oe}for(fe=o(fe);!He.done;_e++,He=L.next())He=B(fe,k,_e,He.value,Q),He!==null&&(t&&He.alternate!==null&&fe.delete(He.key===null?_e:He.key),N=f(He,N,_e),De===null?oe=He:De.sibling=He,De=He);return t&&fe.forEach(function(yA){return i(k,yA)}),Ge&&Ss(k,_e),oe}function et(k,N,L,Q){if(typeof L=="object"&&L!==null&&L.type===Y&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case x:e:{for(var oe=L.key;N!==null;){if(N.key===oe){if(oe=L.type,oe===Y){if(N.tag===7){a(k,N.sibling),Q=h(N,L.props.children),Q.return=k,k=Q;break e}}else if(N.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===w&&Lg(oe)===N.type){a(k,N.sibling),Q=h(N,L.props),Jo(Q,L),Q.return=k,k=Q;break e}a(k,N);break}else i(k,N);N=N.sibling}L.type===Y?(Q=bs(L.props.children,k.mode,Q,L.key),Q.return=k,k=Q):(Q=Du(L.type,L.key,L.props,null,k.mode,Q),Jo(Q,L),Q.return=k,k=Q)}return v(k);case q:e:{for(oe=L.key;N!==null;){if(N.key===oe)if(N.tag===4&&N.stateNode.containerInfo===L.containerInfo&&N.stateNode.implementation===L.implementation){a(k,N.sibling),Q=h(N,L.children||[]),Q.return=k,k=Q;break e}else{a(k,N);break}else i(k,N);N=N.sibling}Q=Zh(L,k.mode,Q),Q.return=k,k=Q}return v(k);case w:return oe=L._init,L=oe(L._payload),et(k,N,L,Q)}if(rt(L))return Te(k,N,L,Q);if(P(L)){if(oe=P(L),typeof oe!="function")throw Error(s(150));return L=oe.call(L),ge(k,N,L,Q)}if(typeof L.then=="function")return et(k,N,Ku(L),Q);if(L.$$typeof===J)return et(k,N,Vu(k,L),Q);Yu(k,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,N!==null&&N.tag===6?(a(k,N.sibling),Q=h(N,L),Q.return=k,k=Q):(a(k,N),Q=$h(L,k.mode,Q),Q.return=k,k=Q),v(k)):a(k,N)}return function(k,N,L,Q){try{Wo=0;var oe=et(k,N,L,Q);return Ia=null,oe}catch(fe){if(fe===Ho||fe===Pu)throw fe;var De=Tn(29,fe,null,k.mode);return De.lanes=Q,De.return=k,De}finally{}}}var Ca=jg(!0),zg=jg(!1),Ln=Z(null),di=null;function yr(t){var i=t.alternate;ee(Mt,Mt.current&1),ee(Ln,t),di===null&&(i===null||ba.current!==null||i.memoizedState!==null)&&(di=t)}function Bg(t){if(t.tag===22){if(ee(Mt,Mt.current),ee(Ln,t),di===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(di=t)}}else _r()}function _r(){ee(Mt,Mt.current),ee(Ln,Ln.current)}function Hi(t){ne(Ln),di===t&&(di=null),ne(Mt)}var Mt=Z(0);function Xu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ed(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Nf(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Of={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=Sn(),h=mr(o);h.payload=i,a!=null&&(h.callback=a),i=pr(t,h,o),i!==null&&(Rn(i,t,o),Fo(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=Sn(),h=mr(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=pr(t,h,o),i!==null&&(Rn(i,t,o),Fo(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Sn(),o=mr(a);o.tag=2,i!=null&&(o.callback=i),i=pr(t,o,a),i!==null&&(Rn(i,t,a),Fo(i,t,a))}};function qg(t,i,a,o,h,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,v):i.prototype&&i.prototype.isPureReactComponent?!ko(a,o)||!ko(h,f):!0}function Hg(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Of.enqueueReplaceState(i,i.state,null)}function Os(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var $u=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Gg(t){$u(t)}function Fg(t){console.error(t)}function Qg(t){$u(t)}function Zu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Kg(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Mf(t,i,a){return a=mr(a),a.tag=3,a.payload={element:null},a.callback=function(){Zu(t,i)},a}function Yg(t){return t=mr(t),t.tag=3,t}function Xg(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){Kg(i,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Kg(i,a,o),typeof h!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function y1(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&zo(i,a,h,!0),a=Ln.current,a!==null){switch(a.tag){case 13:return di===null?id():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===lf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),sd(t,o,h)),!1;case 22:return a.flags|=65536,o===lf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),sd(t,o,h)),!1}throw Error(s(435,a.tag))}return sd(t,o,h),id(),!1}if(Ge)return i=Ln.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==ef&&(t=Error(s(422),{cause:o}),jo(Vn(t,a)))):(o!==ef&&(i=Error(s(423),{cause:o}),jo(Vn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Vn(o,a),h=Mf(t.stateNode,o,h),hf(t,h),mt!==4&&(mt=2)),!1;var f=Error(s(520),{cause:o});if(f=Vn(f,a),al===null?al=[f]:al.push(f),mt!==4&&(mt=2),i===null)return!0;o=Vn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Mf(a.stateNode,o,t),hf(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(wr===null||!wr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Yg(h),Xg(h,t,a,o),hf(a,h),!1}a=a.return}while(a!==null);return!1}var $g=Error(s(461)),Lt=!1;function Gt(t,i,a,o){i.child=t===null?zg(i,null,a,o):Ca(i,t.child,a,o)}function Zg(t,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return xs(i),o=gf(t,i,a,v,f,h),E=yf(),t!==null&&!Lt?(_f(t,i,h),Gi(t,i,h)):(Ge&&E&&Wh(i),i.flags|=1,Gt(t,i,o,h),i.child)}function Wg(t,i,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!Xh(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Jg(t,i,f,o,h)):(t=Du(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Bf(t,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:ko,a(v,o)&&t.ref===i.ref)return Gi(t,i,h)}return i.flags|=1,t=Ui(f,o),t.ref=i.ref,t.return=i,i.child=t}function Jg(t,i,a,o,h){if(t!==null){var f=t.memoizedProps;if(ko(f,o)&&t.ref===i.ref)if(Lt=!1,i.pendingProps=o=f,Bf(t,h))(t.flags&131072)!==0&&(Lt=!0);else return i.lanes=t.lanes,Gi(t,i,h)}return Vf(t,i,a,o,h)}function ey(t,i,a){var o=i.pendingProps,h=o.children,f=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return ty(t,i,o,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&ku(i,f!==null?f.cachePool:null),f!==null?Jp(i,f):df(),Bg(i);else return i.lanes=i.childLanes=536870912,ty(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(ku(i,f.cachePool),Jp(i,f),_r(),i.memoizedState=null):(t!==null&&ku(i,null),df(),_r());return Gt(t,i,h,a),i.child}function ty(t,i,a,o){var h=of();return h=h===null?null:{parent:Ot._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&ku(i,null),df(),Bg(i),t!==null&&zo(t,i,o,!0),null}function Wu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Vf(t,i,a,o,h){return xs(i),a=gf(t,i,a,o,void 0,h),o=yf(),t!==null&&!Lt?(_f(t,i,h),Gi(t,i,h)):(Ge&&o&&Wh(i),i.flags|=1,Gt(t,i,a,h),i.child)}function ny(t,i,a,o,h,f){return xs(i),i.updateQueue=null,a=tg(i,o,a,h),eg(t),o=yf(),t!==null&&!Lt?(_f(t,i,f),Gi(t,i,f)):(Ge&&o&&Wh(i),i.flags|=1,Gt(t,i,a,f),i.child)}function iy(t,i,a,o,h){if(xs(i),i.stateNode===null){var f=_a,v=a.contextType;typeof v=="object"&&v!==null&&(f=Zt(v)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Of,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},uf(i),v=a.contextType,f.context=typeof v=="object"&&v!==null?Zt(v):_a,f.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Nf(i,a,v,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Of.enqueueReplaceState(f,f.state,null),Ko(i,o,f,h),Qo(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){f=i.stateNode;var E=i.memoizedProps,S=Os(a,E);f.props=S;var j=f.context,F=a.contextType;v=_a,typeof F=="object"&&F!==null&&(v=Zt(F));var X=a.getDerivedStateFromProps;F=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||j!==v)&&Hg(i,f,o,v),dr=!1;var z=i.memoizedState;f.state=z,Ko(i,o,f,h),Qo(),j=i.memoizedState,E||z!==j||dr?(typeof X=="function"&&(Nf(i,a,X,o),j=i.memoizedState),(S=dr||qg(i,a,S,o,z,j,v))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=j),f.props=o,f.state=j,f.context=v,o=S):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,cf(t,i),v=i.memoizedProps,F=Os(a,v),f.props=F,X=i.pendingProps,z=f.context,j=a.contextType,S=_a,typeof j=="object"&&j!==null&&(S=Zt(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==X||z!==S)&&Hg(i,f,o,S),dr=!1,z=i.memoizedState,f.state=z,Ko(i,o,f,h),Qo();var B=i.memoizedState;v!==X||z!==B||dr||t!==null&&t.dependencies!==null&&Mu(t.dependencies)?(typeof E=="function"&&(Nf(i,a,E,o),B=i.memoizedState),(F=dr||qg(i,a,F,o,z,B,S)||t!==null&&t.dependencies!==null&&Mu(t.dependencies))?(j||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,S),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,S)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=B),f.props=o,f.state=B,f.context=S,o=F):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=1024),o=!1)}return f=o,Wu(t,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&o?(i.child=Ca(i,t.child,null,h),i.child=Ca(i,null,a,h)):Gt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=Gi(t,i,h),t}function ry(t,i,a,o){return Lo(),i.flags|=256,Gt(t,i,a,o),i.child}var kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pf(t){return{baseLanes:t,cachePool:Fp()}}function Uf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=jn),t}function sy(t,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(Mt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ge){if(h?yr(i):_r(),Ge){var E=dt,S;if(S=E){e:{for(S=E,E=fi;S.nodeType!==8;){if(!E){E=null;break e}if(S=Zn(S.nextSibling),S===null){E=null;break e}}E=S}E!==null?(i.memoizedState={dehydrated:E,treeContext:ws!==null?{id:Li,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},S=Tn(18,null,null,0),S.stateNode=E,S.return=i,i.child=S,ln=i,dt=null,S=!0):S=!1}S||Is(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Ed(E)?i.lanes=32:i.lanes=536870912,null;Hi(i)}return E=o.children,o=o.fallback,h?(_r(),h=i.mode,E=Ju({mode:"hidden",children:E},h),o=bs(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Pf(a),h.childLanes=Uf(t,v,a),i.memoizedState=kf,o):(yr(i),Lf(i,E))}if(S=t.memoizedState,S!==null&&(E=S.dehydrated,E!==null)){if(f)i.flags&256?(yr(i),i.flags&=-257,i=jf(t,i,a)):i.memoizedState!==null?(_r(),i.child=t.child,i.flags|=128,i=null):(_r(),h=o.fallback,E=i.mode,o=Ju({mode:"visible",children:o.children},E),h=bs(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,Ca(i,t.child,null,a),o=i.child,o.memoizedState=Pf(a),o.childLanes=Uf(t,v,a),i.memoizedState=kf,i=h);else if(yr(i),Ed(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(s(419)),o.stack="",o.digest=v,jo({value:o,source:null,stack:null}),i=jf(t,i,a)}else if(Lt||zo(t,i,a,!1),v=(a&t.childLanes)!==0,Lt||v){if(v=nt,v!==null&&(o=a&-a,o=(o&42)!==0?1:sr(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==S.retryLane))throw S.retryLane=o,ya(t,o),Rn(v,t,o),$g;E.data==="$?"||id(),i=jf(t,i,a)}else E.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=S.treeContext,dt=Zn(E.nextSibling),ln=i,Ge=!0,Rs=null,fi=!1,t!==null&&(Pn[Un++]=Li,Pn[Un++]=ji,Pn[Un++]=ws,Li=t.id,ji=t.overflow,ws=i),i=Lf(i,o.children),i.flags|=4096);return i}return h?(_r(),h=o.fallback,E=i.mode,S=t.child,j=S.sibling,o=Ui(S,{mode:"hidden",children:o.children}),o.subtreeFlags=S.subtreeFlags&65011712,j!==null?h=Ui(j,h):(h=bs(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=t.child.memoizedState,E===null?E=Pf(a):(S=E.cachePool,S!==null?(j=Ot._currentValue,S=S.parent!==j?{parent:j,pool:j}:S):S=Fp(),E={baseLanes:E.baseLanes|a,cachePool:S}),h.memoizedState=E,h.childLanes=Uf(t,v,a),i.memoizedState=kf,o):(yr(i),a=t.child,t=a.sibling,a=Ui(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Lf(t,i){return i=Ju({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ju(t,i){return t=Tn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function jf(t,i,a){return Ca(i,t.child,null,a),t=Lf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function ay(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),nf(t.return,i,a)}function zf(t,i,a,o,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function oy(t,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(Gt(t,i,o.children,a),o=Mt.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ay(t,a,i);else if(t.tag===19)ay(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(ee(Mt,o),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Xu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),zf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Xu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}zf(i,!0,a,null,f);break;case"together":zf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Gi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),br|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(zo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Ui(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ui(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Bf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Mu(t)))}function _1(t,i,a){switch(i.tag){case 3:Ke(i,i.stateNode.containerInfo),fr(i,Ot,t.memoizedState.cache),Lo();break;case 27:case 5:Se(i);break;case 4:Ke(i,i.stateNode.containerInfo);break;case 10:fr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(yr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?sy(t,i,a):(yr(i),t=Gi(t,i,a),t!==null?t.sibling:null);yr(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(zo(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return oy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(Mt,Mt.current),o)break;return null;case 22:case 23:return i.lanes=0,ey(t,i,a);case 24:fr(i,Ot,t.memoizedState.cache)}return Gi(t,i,a)}function ly(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Lt=!0;else{if(!Bf(t,a)&&(i.flags&128)===0)return Lt=!1,_1(t,i,a);Lt=(t.flags&131072)!==0}else Lt=!1,Ge&&(i.flags&1048576)!==0&&Lp(i,Ou,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")Xh(o)?(t=Os(o,t),i.tag=1,i=iy(null,i,o,t,a)):(i.tag=0,i=Vf(null,i,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===de){i.tag=11,i=Zg(null,i,o,t,a);break e}else if(h===M){i.tag=14,i=Wg(null,i,o,t,a);break e}}throw i=Ct(o)||o,Error(s(306,i,""))}}return i;case 0:return Vf(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=Os(o,i.pendingProps),iy(t,i,o,h,a);case 3:e:{if(Ke(i,i.stateNode.containerInfo),t===null)throw Error(s(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,cf(t,i),Ko(i,o,null,a);var v=i.memoizedState;if(o=v.cache,fr(i,Ot,o),o!==f.cache&&rf(i,[Ot],a,!0),Qo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=ry(t,i,o,a);break e}else if(o!==h){h=Vn(Error(s(424)),i),jo(h),i=ry(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=Zn(t.firstChild),ln=i,Ge=!0,Rs=null,fi=!0,a=zg(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Lo(),o===h){i=Gi(t,i,a);break e}Gt(t,i,o,a)}i=i.child}return i;case 26:return Wu(t,i),t===null?(a=f_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ge||(a=i.type,t=i.pendingProps,o=dc(ye.current).createElement(a),o[xt]=i,o[Tt]=t,Qt(o,a,t),gt(o),i.stateNode=o):i.memoizedState=f_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Se(i),t===null&&Ge&&(o=i.stateNode=u_(i.type,i.pendingProps,ye.current),ln=i,fi=!0,h=dt,Ir(i.type)?(Td=h,dt=Zn(o.firstChild)):dt=h),Gt(t,i,i.pendingProps.children,a),Wu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ge&&((h=o=dt)&&(o=Q1(o,i.type,i.pendingProps,fi),o!==null?(i.stateNode=o,ln=i,dt=Zn(o.firstChild),fi=!1,h=!0):h=!1),h||Is(i)),Se(i),h=i.type,f=i.pendingProps,v=t!==null?t.memoizedProps:null,o=f.children,yd(h,f)?o=null:v!==null&&yd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=gf(t,i,c1,null,null,a),pl._currentValue=h),Wu(t,i),Gt(t,i,o,a),i.child;case 6:return t===null&&Ge&&((t=a=dt)&&(a=K1(a,i.pendingProps,fi),a!==null?(i.stateNode=a,ln=i,dt=null,t=!0):t=!1),t||Is(i)),null;case 13:return sy(t,i,a);case 4:return Ke(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=Ca(i,null,o,a):Gt(t,i,o,a),i.child;case 11:return Zg(t,i,i.type,i.pendingProps,a);case 7:return Gt(t,i,i.pendingProps,a),i.child;case 8:return Gt(t,i,i.pendingProps.children,a),i.child;case 12:return Gt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,fr(i,i.type,o.value),Gt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,xs(i),h=Zt(h),o=o(h),i.flags|=1,Gt(t,i,o,a),i.child;case 14:return Wg(t,i,i.type,i.pendingProps,a);case 15:return Jg(t,i,i.type,i.pendingProps,a);case 19:return oy(t,i,a);case 31:return o=i.pendingProps,a=i.mode,o={mode:o.mode,children:o.children},t===null?(a=Ju(o,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ui(t.child,o),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ey(t,i,a);case 24:return xs(i),o=Zt(Ot),t===null?(h=of(),h===null&&(h=nt,f=sf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},uf(i),fr(i,Ot,h)):((t.lanes&a)!==0&&(cf(t,i),Ko(i,null,null,a),Qo()),h=t.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),fr(i,Ot,o)):(o=f.cache,fr(i,Ot,o),o!==h.cache&&rf(i,[Ot],a,!0))),Gt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Fi(t){t.flags|=4}function uy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!y_(i)){if(i=Ln.current,i!==null&&((je&4194048)===je?di!==null:(je&62914560)!==je&&(je&536870912)===0||i!==di))throw Go=lf,Qp;t.flags|=8192}}function ec(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?yo():536870912,t.lanes|=i,Oa|=i)}function el(t,i){if(!Ge)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function ut(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function v1(t,i,a){var o=i.pendingProps;switch(Jh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(i),null;case 1:return ut(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Bi(Ot),Cn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Uo(i)?Fi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bp())),ut(i),null;case 26:return a=i.memoizedState,t===null?(Fi(i),a!==null?(ut(i),uy(i,a)):(ut(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Fi(i),ut(i),uy(i,a)):(ut(i),i.flags&=-16777217):(t.memoizedProps!==o&&Fi(i),ut(i),i.flags&=-16777217),null;case 27:Re(i),a=ye.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Fi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ut(i),null}t=he.current,Uo(i)?jp(i):(t=u_(h,o,a),i.stateNode=t,Fi(i))}return ut(i),null;case 5:if(Re(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Fi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return ut(i),null}if(t=he.current,Uo(i))jp(i);else{switch(h=dc(ye.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[xt]=i,t[Tt]=o;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Qt(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Fi(i)}}return ut(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&Fi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(t=ye.current,Uo(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=ln,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[xt]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||n_(t.nodeValue,a)),t||Is(i)}else t=dc(t).createTextNode(o),t[xt]=i,i.stateNode=t}return ut(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Uo(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[xt]=i}else Lo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),h=!1}else h=Bp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Hi(i),i):(Hi(i),null)}if(Hi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),ec(i,i.updateQueue),ut(i),null;case 4:return Cn(),t===null&&fd(i.stateNode.containerInfo),ut(i),null;case 10:return Bi(i.type),ut(i),null;case 19:if(ne(Mt),h=i.memoizedState,h===null)return ut(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)el(h,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Xu(t),f!==null){for(i.flags|=128,el(h,!1),t=f.updateQueue,i.updateQueue=t,ec(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Up(a,t),a=a.sibling;return ee(Mt,Mt.current&1|2),i.child}t=t.sibling}h.tail!==null&&ht()>ic&&(i.flags|=128,o=!0,el(h,!1),i.lanes=4194304)}else{if(!o)if(t=Xu(f),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,ec(i,t),el(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Ge)return ut(i),null}else 2*ht()-h.renderingStartTime>ic&&a!==536870912&&(i.flags|=128,o=!0,el(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=ht(),i.sibling=null,t=Mt.current,ee(Mt,o?t&1|2:t&1),i):(ut(i),null);case 22:case 23:return Hi(i),mf(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(ut(i),i.subtreeFlags&6&&(i.flags|=8192)):ut(i),a=i.updateQueue,a!==null&&ec(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&ne(Ds),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Bi(Ot),ut(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function E1(t,i){switch(Jh(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Bi(Ot),Cn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Re(i),null;case 13:if(Hi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Lo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ne(Mt),null;case 4:return Cn(),null;case 10:return Bi(i.type),null;case 22:case 23:return Hi(i),mf(),t!==null&&ne(Ds),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Bi(Ot),null;case 25:return null;default:return null}}function cy(t,i){switch(Jh(i),i.tag){case 3:Bi(Ot),Cn();break;case 26:case 27:case 5:Re(i);break;case 4:Cn();break;case 13:Hi(i);break;case 19:ne(Mt);break;case 10:Bi(i.type);break;case 22:case 23:Hi(i),mf(),t!==null&&ne(Ds);break;case 24:Bi(Ot)}}function tl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){tt(i,i.return,E)}}function vr(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var S=a,j=E;try{j()}catch(F){tt(h,S,F)}}}o=o.next}while(o!==f)}}catch(F){tt(i,i.return,F)}}function hy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Wp(i,a)}catch(o){tt(t,t.return,o)}}}function fy(t,i,a){a.props=Os(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){tt(t,i,o)}}function nl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){tt(t,i,h)}}function mi(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){tt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){tt(t,i,h)}else a.current=null}function dy(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){tt(t,t.return,h)}}function qf(t,i,a){try{var o=t.stateNode;B1(o,t.type,a,i),o[Tt]=i}catch(h){tt(t,t.return,h)}}function my(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ir(t.type)||t.tag===4}function Hf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||my(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ir(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gf(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=fc));else if(o!==4&&(o===27&&Ir(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Gf(t,i,a),t=t.sibling;t!==null;)Gf(t,i,a),t=t.sibling}function tc(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&Ir(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(tc(t,i,a),t=t.sibling;t!==null;)tc(t,i,a),t=t.sibling}function py(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Qt(i,o,a),i[xt]=t,i[Tt]=a}catch(f){tt(t,t.return,f)}}var Qi=!1,_t=!1,Ff=!1,gy=typeof WeakSet=="function"?WeakSet:Set,jt=null;function T1(t,i){if(t=t.containerInfo,pd=vc,t=Ip(t),qh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,E=-1,S=-1,j=0,F=0,X=t,z=null;t:for(;;){for(var B;X!==a||h!==0&&X.nodeType!==3||(E=v+h),X!==f||o!==0&&X.nodeType!==3||(S=v+o),X.nodeType===3&&(v+=X.nodeValue.length),(B=X.firstChild)!==null;)z=X,X=B;for(;;){if(X===t)break t;if(z===a&&++j===h&&(E=v),z===f&&++F===o&&(S=v),(B=X.nextSibling)!==null)break;X=z,z=X.parentNode}X=B}a=E===-1||S===-1?null:{start:E,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(gd={focusedElem:t,selectionRange:a},vc=!1,jt=i;jt!==null;)if(i=jt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,jt=t;else for(;jt!==null;){switch(i=jt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Te=Os(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Te,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(ge){tt(a,a.return,ge)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)vd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":vd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,jt=t;break}jt=i.return}}function yy(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Er(t,a),o&4&&tl(5,a);break;case 1:if(Er(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){tt(a,a.return,v)}else{var h=Os(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){tt(a,a.return,v)}}o&64&&hy(a),o&512&&nl(a,a.return);break;case 3:if(Er(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Wp(t,i)}catch(v){tt(a,a.return,v)}}break;case 27:i===null&&o&4&&py(a);case 26:case 5:Er(t,a),i===null&&o&4&&dy(a),o&512&&nl(a,a.return);break;case 12:Er(t,a);break;case 13:Er(t,a),o&4&&Ey(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=D1.bind(null,a),Y1(t,a))));break;case 22:if(o=a.memoizedState!==null||Qi,!o){i=i!==null&&i.memoizedState!==null||_t,h=Qi;var f=_t;Qi=o,(_t=i)&&!f?Tr(t,a,(a.subtreeFlags&8772)!==0):Er(t,a),Qi=h,_t=f}break;case 30:break;default:Er(t,a)}}function _y(t){var i=t.alternate;i!==null&&(t.alternate=null,_y(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&lr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var lt=null,fn=!1;function Ki(t,i,a){for(a=a.child;a!==null;)vy(t,i,a),a=a.sibling}function vy(t,i,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:_t||mi(a,i),Ki(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_t||mi(a,i);var o=lt,h=fn;Ir(a.type)&&(lt=a.stateNode,fn=!1),Ki(t,i,a),hl(a.stateNode),lt=o,fn=h;break;case 5:_t||mi(a,i);case 6:if(o=lt,h=fn,lt=null,Ki(t,i,a),lt=o,fn=h,lt!==null)if(fn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(f){tt(a,i,f)}else try{lt.removeChild(a.stateNode)}catch(f){tt(a,i,f)}break;case 18:lt!==null&&(fn?(t=lt,o_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),vl(t)):o_(lt,a.stateNode));break;case 4:o=lt,h=fn,lt=a.stateNode.containerInfo,fn=!0,Ki(t,i,a),lt=o,fn=h;break;case 0:case 11:case 14:case 15:_t||vr(2,a,i),_t||vr(4,a,i),Ki(t,i,a);break;case 1:_t||(mi(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&fy(a,i,o)),Ki(t,i,a);break;case 21:Ki(t,i,a);break;case 22:_t=(o=_t)||a.memoizedState!==null,Ki(t,i,a),_t=o;break;default:Ki(t,i,a)}}function Ey(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{vl(t)}catch(a){tt(i,i.return,a)}}function A1(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new gy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new gy),i;default:throw Error(s(435,t.tag))}}function Qf(t,i){var a=A1(t);i.forEach(function(o){var h=N1.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function An(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(Ir(E.type)){lt=E.stateNode,fn=!1;break e}break;case 5:lt=E.stateNode,fn=!1;break e;case 3:case 4:lt=E.stateNode.containerInfo,fn=!0;break e}E=E.return}if(lt===null)throw Error(s(160));vy(f,v,h),lt=null,fn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ty(i,t),i=i.sibling}var $n=null;function Ty(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:An(i,t),bn(t),o&4&&(vr(3,t,t.return),tl(3,t),vr(5,t,t.return));break;case 1:An(i,t),bn(t),o&512&&(_t||a===null||mi(a,a.return)),o&64&&Qi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=$n;if(An(i,t),bn(t),o&512&&(_t||a===null||mi(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[os]||f[xt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Qt(f,o,a),f[xt]=t,gt(f),o=f;break e;case"link":var v=p_("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}f=h.createElement(o),Qt(f,o,a),h.head.appendChild(f);break;case"meta":if(v=p_("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}f=h.createElement(o),Qt(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[xt]=t,gt(f),o=f}t.stateNode=o}else g_(h,t.type,t.stateNode);else t.stateNode=m_(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?g_(h,t.type,t.stateNode):m_(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&qf(t,t.memoizedProps,a.memoizedProps)}break;case 27:An(i,t),bn(t),o&512&&(_t||a===null||mi(a,a.return)),a!==null&&o&4&&qf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(An(i,t),bn(t),o&512&&(_t||a===null||mi(a,a.return)),t.flags&32){h=t.stateNode;try{Dn(h,"")}catch(B){tt(t,t.return,B)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,qf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Ff=!0);break;case 6:if(An(i,t),bn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(B){tt(t,t.return,B)}}break;case 3:if(gc=null,h=$n,$n=mc(i.containerInfo),An(i,t),$n=h,bn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{vl(i.containerInfo)}catch(B){tt(t,t.return,B)}Ff&&(Ff=!1,Ay(t));break;case 4:o=$n,$n=mc(t.stateNode.containerInfo),An(i,t),bn(t),$n=o;break;case 12:An(i,t),bn(t);break;case 13:An(i,t),bn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Wf=ht()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Qf(t,o)));break;case 22:h=t.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,j=Qi,F=_t;if(Qi=j||h,_t=F||S,An(i,t),_t=F,Qi=j,bn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||S||Qi||_t||Ms(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){S=a=i;try{if(f=S.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=S.stateNode;var X=S.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){tt(S,S.return,B)}}}else if(i.tag===6){if(a===null){S=i;try{S.stateNode.nodeValue=h?"":S.memoizedProps}catch(B){tt(S,S.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Qf(t,a))));break;case 19:An(i,t),bn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Qf(t,o)));break;case 30:break;case 21:break;default:An(i,t),bn(t)}}function bn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(my(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Hf(t);tc(t,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(Dn(v,""),a.flags&=-33);var E=Hf(t);tc(t,E,v);break;case 3:case 4:var S=a.stateNode.containerInfo,j=Hf(t);Gf(t,j,S);break;default:throw Error(s(161))}}catch(F){tt(t,t.return,F)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Ay(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Ay(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Er(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)yy(t,i.alternate,i),i=i.sibling}function Ms(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:vr(4,i,i.return),Ms(i);break;case 1:mi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&fy(i,i.return,a),Ms(i);break;case 27:hl(i.stateNode);case 26:case 5:mi(i,i.return),Ms(i);break;case 22:i.memoizedState===null&&Ms(i);break;case 30:Ms(i);break;default:Ms(i)}t=t.sibling}}function Tr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:Tr(h,f,a),tl(4,f);break;case 1:if(Tr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){tt(o,o.return,j)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var S=h.shared.hiddenCallbacks;if(S!==null)for(h.shared.hiddenCallbacks=null,h=0;h<S.length;h++)Zp(S[h],E)}catch(j){tt(o,o.return,j)}}a&&v&64&&hy(f),nl(f,f.return);break;case 27:py(f);case 26:case 5:Tr(h,f,a),a&&o===null&&v&4&&dy(f),nl(f,f.return);break;case 12:Tr(h,f,a);break;case 13:Tr(h,f,a),a&&v&4&&Ey(h,f);break;case 22:f.memoizedState===null&&Tr(h,f,a),nl(f,f.return);break;case 30:break;default:Tr(h,f,a)}i=i.sibling}}function Kf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Bo(a))}function Yf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Bo(t))}function pi(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)by(t,i,a,o),i=i.sibling}function by(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:pi(t,i,a,o),h&2048&&tl(9,i);break;case 1:pi(t,i,a,o);break;case 3:pi(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Bo(t)));break;case 12:if(h&2048){pi(t,i,a,o),t=i.stateNode;try{var f=i.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(S){tt(i,i.return,S)}}else pi(t,i,a,o);break;case 13:pi(t,i,a,o);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?pi(t,i,a,o):il(t,i):f._visibility&2?pi(t,i,a,o):(f._visibility|=2,xa(t,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&Kf(v,i);break;case 24:pi(t,i,a,o),h&2048&&Yf(i.alternate,i);break;default:pi(t,i,a,o)}}function xa(t,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,v=i,E=a,S=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:xa(f,v,E,S,h),tl(8,v);break;case 23:break;case 22:var F=v.stateNode;v.memoizedState!==null?F._visibility&2?xa(f,v,E,S,h):il(f,v):(F._visibility|=2,xa(f,v,E,S,h)),h&&j&2048&&Kf(v.alternate,v);break;case 24:xa(f,v,E,S,h),h&&j&2048&&Yf(v.alternate,v);break;default:xa(f,v,E,S,h)}i=i.sibling}}function il(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:il(a,o),h&2048&&Kf(o.alternate,o);break;case 24:il(a,o),h&2048&&Yf(o.alternate,o);break;default:il(a,o)}i=i.sibling}}var rl=8192;function Da(t){if(t.subtreeFlags&rl)for(t=t.child;t!==null;)wy(t),t=t.sibling}function wy(t){switch(t.tag){case 26:Da(t),t.flags&rl&&t.memoizedState!==null&&oA($n,t.memoizedState,t.memoizedProps);break;case 5:Da(t);break;case 3:case 4:var i=$n;$n=mc(t.stateNode.containerInfo),Da(t),$n=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=rl,rl=16777216,Da(t),rl=i):Da(t));break;default:Da(t)}}function Sy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function sl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];jt=o,Iy(o,t)}Sy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ry(t),t=t.sibling}function Ry(t){switch(t.tag){case 0:case 11:case 15:sl(t),t.flags&2048&&vr(9,t,t.return);break;case 3:sl(t);break;case 12:sl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,nc(t)):sl(t);break;default:sl(t)}}function nc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];jt=o,Iy(o,t)}Sy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:vr(8,i,i.return),nc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,nc(i));break;default:nc(i)}t=t.sibling}}function Iy(t,i){for(;jt!==null;){var a=jt;switch(a.tag){case 0:case 11:case 15:vr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Bo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,jt=o;else e:for(a=t;jt!==null;){o=jt;var h=o.sibling,f=o.return;if(_y(o),o===a){jt=null;break e}if(h!==null){h.return=f,jt=h;break e}jt=f}}}var b1={getCacheForType:function(t){var i=Zt(Ot),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},w1=typeof WeakMap=="function"?WeakMap:Map,Xe=0,nt=null,Ne=null,je=0,$e=0,wn=null,Ar=!1,Na=!1,Xf=!1,Yi=0,mt=0,br=0,Vs=0,$f=0,jn=0,Oa=0,al=null,dn=null,Zf=!1,Wf=0,ic=1/0,rc=null,wr=null,Ft=0,Sr=null,Ma=null,Va=0,Jf=0,ed=null,Cy=null,ol=0,td=null;function Sn(){if((Xe&2)!==0&&je!==0)return je&-je;if(G.T!==null){var t=Ta;return t!==0?t:ld()}return ar()}function xy(){jn===0&&(jn=(je&536870912)===0||Ge?go():536870912);var t=Ln.current;return t!==null&&(t.flags|=32),jn}function Rn(t,i,a){(t===nt&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(ka(t,0),Rr(t,je,jn,!1)),Ri(t,a),((Xe&2)===0||t!==nt)&&(t===nt&&((Xe&2)===0&&(Vs|=a),mt===4&&Rr(t,je,jn,!1)),gi(t))}function Dy(t,i,a){if((Xe&6)!==0)throw Error(s(327));var o=!a&&(i&124)===0&&(i&t.expiredLanes)===0||as(t,i),h=o?I1(t,i):rd(t,i,!0),f=o;do{if(h===0){Na&&!o&&Rr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!S1(a)){h=rd(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var E=t;h=al;var S=E.current.memoizedState.isDehydrated;if(S&&(ka(E,v).flags|=256),v=rd(E,v,!1),v!==2){if(Xf&&!S){E.errorRecoveryDisabledLanes|=f,Vs|=f,h=4;break e}f=dn,dn=h,f!==null&&(dn===null?dn=f:dn.push.apply(dn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){ka(t,0),Rr(t,i,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Rr(o,i,jn,!Ar);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Wf+300-ht(),10<h)){if(Rr(o,i,jn,!Ar),Ws(o,0,!0)!==0)break e;o.timeoutHandle=s_(Ny.bind(null,o,a,dn,rc,Zf,i,jn,Vs,Oa,Ar,f,2,-0,0),h);break e}Ny(o,a,dn,rc,Zf,i,jn,Vs,Oa,Ar,f,0,-0,0)}}break}while(!0);gi(t)}function Ny(t,i,a,o,h,f,v,E,S,j,F,X,z,B){if(t.timeoutHandle=-1,X=i.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(ml={stylesheets:null,count:0,unsuspend:aA},wy(i),X=lA(),X!==null)){t.cancelPendingCommit=X(Ly.bind(null,t,i,f,a,o,h,v,E,S,F,1,z,B)),Rr(t,f,v,!j);return}Ly(t,i,f,a,o,h,v,E,S)}function S1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!En(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Rr(t,i,a,o){i&=~$f,i&=~Vs,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var f=31-$t(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&ti(t,a,i)}function sc(){return(Xe&6)===0?(ll(0),!1):!0}function nd(){if(Ne!==null){if($e===0)var t=Ne.return;else t=Ne,zi=Cs=null,vf(t),Ia=null,Wo=0,t=Ne;for(;t!==null;)cy(t.alternate,t),t=t.return;Ne=null}}function ka(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,H1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),nd(),nt=t,Ne=a=Ui(t.current,null),je=i,$e=0,wn=null,Ar=!1,Na=as(t,i),Xf=!1,Oa=jn=$f=Vs=br=mt=0,dn=al=null,Zf=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-$t(o),f=1<<h;i|=t[h],o&=~f}return Yi=i,Iu(),a}function Oy(t,i){xe=null,G.H=Qu,i===Ho||i===Pu?(i=Xp(),$e=3):i===Qp?(i=Xp(),$e=4):$e=i===$g?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,wn=i,Ne===null&&(mt=1,Zu(t,Vn(i,t.current)))}function My(){var t=G.H;return G.H=Qu,t===null?Qu:t}function Vy(){var t=G.A;return G.A=b1,t}function id(){mt=4,Ar||(je&4194048)!==je&&Ln.current!==null||(Na=!0),(br&134217727)===0&&(Vs&134217727)===0||nt===null||Rr(nt,je,jn,!1)}function rd(t,i,a){var o=Xe;Xe|=2;var h=My(),f=Vy();(nt!==t||je!==i)&&(rc=null,ka(t,i)),i=!1;var v=mt;e:do try{if($e!==0&&Ne!==null){var E=Ne,S=wn;switch($e){case 8:nd(),v=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(i=!0);var j=$e;if($e=0,wn=null,Pa(t,E,S,j),a&&Na){v=0;break e}break;default:j=$e,$e=0,wn=null,Pa(t,E,S,j)}}R1(),v=mt;break}catch(F){Oy(t,F)}while(!0);return i&&t.shellSuspendCounter++,zi=Cs=null,Xe=o,G.H=h,G.A=f,Ne===null&&(nt=null,je=0,Iu()),v}function R1(){for(;Ne!==null;)ky(Ne)}function I1(t,i){var a=Xe;Xe|=2;var o=My(),h=Vy();nt!==t||je!==i?(rc=null,ic=ht()+500,ka(t,i)):Na=as(t,i);e:do try{if($e!==0&&Ne!==null){i=Ne;var f=wn;t:switch($e){case 1:$e=0,wn=null,Pa(t,i,f,1);break;case 2:case 9:if(Kp(f)){$e=0,wn=null,Py(i);break}i=function(){$e!==2&&$e!==9||nt!==t||($e=7),gi(t)},f.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:Kp(f)?($e=0,wn=null,Py(i)):($e=0,wn=null,Pa(t,i,f,7));break;case 5:var v=null;switch(Ne.tag){case 26:v=Ne.memoizedState;case 5:case 27:var E=Ne;if(!v||y_(v)){$e=0,wn=null;var S=E.sibling;if(S!==null)Ne=S;else{var j=E.return;j!==null?(Ne=j,ac(j)):Ne=null}break t}}$e=0,wn=null,Pa(t,i,f,5);break;case 6:$e=0,wn=null,Pa(t,i,f,6);break;case 8:nd(),mt=6;break e;default:throw Error(s(462))}}C1();break}catch(F){Oy(t,F)}while(!0);return zi=Cs=null,G.H=o,G.A=h,Xe=a,Ne!==null?0:(nt=null,je=0,Iu(),mt)}function C1(){for(;Ne!==null&&!Fn();)ky(Ne)}function ky(t){var i=ly(t.alternate,t,Yi);t.memoizedProps=t.pendingProps,i===null?ac(t):Ne=i}function Py(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=ny(a,i,i.pendingProps,i.type,void 0,je);break;case 11:i=ny(a,i,i.pendingProps,i.type.render,i.ref,je);break;case 5:vf(i);default:cy(a,i),i=Ne=Up(i,Yi),i=ly(a,i,Yi)}t.memoizedProps=t.pendingProps,i===null?ac(t):Ne=i}function Pa(t,i,a,o){zi=Cs=null,vf(i),Ia=null,Wo=0;var h=i.return;try{if(y1(t,h,i,a,je)){mt=1,Zu(t,Vn(a,t.current)),Ne=null;return}}catch(f){if(h!==null)throw Ne=h,f;mt=1,Zu(t,Vn(a,t.current)),Ne=null;return}i.flags&32768?(Ge||o===1?t=!0:Na||(je&536870912)!==0?t=!1:(Ar=t=!0,(o===2||o===9||o===3||o===6)&&(o=Ln.current,o!==null&&o.tag===13&&(o.flags|=16384))),Uy(i,t)):ac(i)}function ac(t){var i=t;do{if((i.flags&32768)!==0){Uy(i,Ar);return}t=i.return;var a=v1(i.alternate,i,Yi);if(a!==null){Ne=a;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=t}while(i!==null);mt===0&&(mt=5)}function Uy(t,i){do{var a=E1(t.alternate,t);if(a!==null){a.flags&=32767,Ne=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=a}while(t!==null);mt=6,Ne=null}function Ly(t,i,a,o,h,f,v,E,S){t.cancelPendingCommit=null;do oc();while(Ft!==0);if((Xe&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Kh,_o(t,a,f,v,E,S),t===nt&&(Ne=nt=null,je=0),Ma=i,Sr=t,Va=a,Jf=f,ed=h,Cy=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,O1(ns,function(){return Hy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,h=re.p,re.p=2,v=Xe,Xe|=4;try{T1(t,i,a)}finally{Xe=v,re.p=h,G.T=o}}Ft=1,jy(),zy(),By()}}function jy(){if(Ft===1){Ft=0;var t=Sr,i=Ma,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=re.p;re.p=2;var h=Xe;Xe|=4;try{Ty(i,t);var f=gd,v=Ip(t.containerInfo),E=f.focusedElem,S=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&Rp(E.ownerDocument.documentElement,E)){if(S!==null&&qh(E)){var j=S.start,F=S.end;if(F===void 0&&(F=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(F,E.value.length);else{var X=E.ownerDocument||document,z=X&&X.defaultView||window;if(z.getSelection){var B=z.getSelection(),Te=E.textContent.length,ge=Math.min(S.start,Te),et=S.end===void 0?ge:Math.min(S.end,Te);!B.extend&&ge>et&&(v=et,et=ge,ge=v);var k=Sp(E,ge),N=Sp(E,et);if(k&&N&&(B.rangeCount!==1||B.anchorNode!==k.node||B.anchorOffset!==k.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var L=X.createRange();L.setStart(k.node,k.offset),B.removeAllRanges(),ge>et?(B.addRange(L),B.extend(N.node,N.offset)):(L.setEnd(N.node,N.offset),B.addRange(L))}}}}for(X=[],B=E;B=B.parentNode;)B.nodeType===1&&X.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var Q=X[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}vc=!!pd,gd=pd=null}finally{Xe=h,re.p=o,G.T=a}}t.current=i,Ft=2}}function zy(){if(Ft===2){Ft=0;var t=Sr,i=Ma,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=re.p;re.p=2;var h=Xe;Xe|=4;try{yy(t,i.alternate,i)}finally{Xe=h,re.p=o,G.T=a}}Ft=3}}function By(){if(Ft===4||Ft===3){Ft=0,yn();var t=Sr,i=Ma,a=Va,o=Cy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ft=5:(Ft=0,Ma=Sr=null,qy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(wr=null),Js(a),i=i.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ft,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=G.T,h=re.p,re.p=2,G.T=null;try{for(var f=t.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{G.T=i,re.p=h}}(Va&3)!==0&&oc(),gi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===td?ol++:(ol=0,td=t):ol=0,ll(0)}}function qy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Bo(i)))}function oc(t){return jy(),zy(),By(),Hy()}function Hy(){if(Ft!==5)return!1;var t=Sr,i=Jf;Jf=0;var a=Js(Va),o=G.T,h=re.p;try{re.p=32>a?32:a,G.T=null,a=ed,ed=null;var f=Sr,v=Va;if(Ft=0,Ma=Sr=null,Va=0,(Xe&6)!==0)throw Error(s(331));var E=Xe;if(Xe|=4,Ry(f.current),by(f,f.current,v,a),Xe=E,ll(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ft,f)}catch{}return!0}finally{re.p=h,G.T=o,qy(t,i)}}function Gy(t,i,a){i=Vn(a,i),i=Mf(t.stateNode,i,2),t=pr(t,i,2),t!==null&&(Ri(t,2),gi(t))}function tt(t,i,a){if(t.tag===3)Gy(t,t,a);else for(;i!==null;){if(i.tag===3){Gy(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(wr===null||!wr.has(o))){t=Vn(a,t),a=Yg(2),o=pr(i,a,2),o!==null&&(Xg(a,o,i,t),Ri(o,2),gi(o));break}}i=i.return}}function sd(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new w1;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Xf=!0,h.add(a),t=x1.bind(null,t,i,a),i.then(t,t))}function x1(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,nt===t&&(je&a)===a&&(mt===4||mt===3&&(je&62914560)===je&&300>ht()-Wf?(Xe&2)===0&&ka(t,0):$f|=a,Oa===je&&(Oa=0)),gi(t)}function Fy(t,i){i===0&&(i=yo()),t=ya(t,i),t!==null&&(Ri(t,i),gi(t))}function D1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Fy(t,a)}function N1(t,i){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),Fy(t,a)}function O1(t,i){return at(t,i)}var lc=null,Ua=null,ad=!1,uc=!1,od=!1,ks=0;function gi(t){t!==Ua&&t.next===null&&(Ua===null?lc=Ua=t:Ua=Ua.next=t),uc=!0,ad||(ad=!0,V1())}function ll(t,i){if(!od&&uc){od=!0;do for(var a=!1,o=lc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-$t(42|t)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Xy(o,f))}else f=je,f=Ws(o,o===nt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||as(o,f)||(a=!0,Xy(o,f));o=o.next}while(a);od=!1}}function M1(){Qy()}function Qy(){uc=ad=!1;var t=0;ks!==0&&(q1()&&(t=ks),ks=0);for(var i=ht(),a=null,o=lc;o!==null;){var h=o.next,f=Ky(o,i);f===0?(o.next=null,a===null?lc=h:a.next=h,h===null&&(Ua=a)):(a=o,(t!==0||(f&3)!==0)&&(uc=!0)),o=h}ll(t)}function Ky(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-$t(f),E=1<<v,S=h[v];S===-1?((E&a)===0||(E&o)!==0)&&(h[v]=po(E,i)):S<=i&&(t.expiredLanes|=E),f&=~E}if(i=nt,a=je,a=Ws(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&($e===2||$e===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&gn(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||as(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&gn(o),Js(a)){case 2:case 8:a=$s;break;case 32:a=ns;break;case 268435456:a=Zs;break;default:a=ns}return o=Yy.bind(null,t),a=at(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&gn(o),t.callbackPriority=2,t.callbackNode=null,2}function Yy(t,i){if(Ft!==0&&Ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(oc()&&t.callbackNode!==a)return null;var o=je;return o=Ws(t,t===nt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Dy(t,o,i),Ky(t,ht()),t.callbackNode!=null&&t.callbackNode===a?Yy.bind(null,t):null)}function Xy(t,i){if(oc())return null;Dy(t,i,!0)}function V1(){G1(function(){(Xe&6)!==0?at(cn,M1):Qy()})}function ld(){return ks===0&&(ks=go()),ks}function $y(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:sa(""+t)}function Zy(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function k1(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=$y((h[Tt]||null).action),v=o.submitter;v&&(i=(i=v[Tt]||null)?$y(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var E=new aa("action","action",null,o,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ks!==0){var S=v?Zy(h,v):new FormData(h);Cf(a,{pending:!0,data:S,method:h.method,action:f},null,S)}}else typeof f=="function"&&(E.preventDefault(),S=v?Zy(h,v):new FormData(h),Cf(a,{pending:!0,data:S,method:h.method,action:f},f,S))},currentTarget:h}]})}}for(var ud=0;ud<Qh.length;ud++){var cd=Qh[ud],P1=cd.toLowerCase(),U1=cd[0].toUpperCase()+cd.slice(1);Xn(P1,"on"+U1)}Xn(Dp,"onAnimationEnd"),Xn(Np,"onAnimationIteration"),Xn(Op,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(e1,"onTransitionRun"),Xn(t1,"onTransitionStart"),Xn(n1,"onTransitionCancel"),Xn(Mp,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ul));function Wy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(i)for(var v=o.length-1;0<=v;v--){var E=o[v],S=E.instance,j=E.currentTarget;if(E=E.listener,S!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=j;try{f(h)}catch(F){$u(F)}h.currentTarget=null,f=S}else for(v=0;v<o.length;v++){if(E=o[v],S=E.instance,j=E.currentTarget,E=E.listener,S!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=j;try{f(h)}catch(F){$u(F)}h.currentTarget=null,f=S}}}}function Oe(t,i){var a=i[Eo];a===void 0&&(a=i[Eo]=new Set);var o=t+"__bubble";a.has(o)||(Jy(i,t,2,!1),a.add(o))}function hd(t,i,a){var o=0;i&&(o|=4),Jy(a,t,o,i)}var cc="_reactListening"+Math.random().toString(36).slice(2);function fd(t){if(!t[cc]){t[cc]=!0,To.forEach(function(a){a!=="selectionchange"&&(L1.has(a)||hd(a,!1,t),hd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[cc]||(i[cc]=!0,hd("selectionchange",!1,i))}}function Jy(t,i,a,o){switch(b_(i)){case 2:var h=hA;break;case 8:h=fA;break;default:h=Rd}a=h.bind(null,i,a,t),h=void 0,!On||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function dd(t,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var S=v.tag;if((S===3||S===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Ii(E),v===null)return;if(S=v.tag,S===5||S===6||S===26||S===27){o=f=v;continue e}E=E.parentNode}}o=o.return}fu(function(){var j=f,F=Nn(a),X=[];e:{var z=Vp.get(t);if(z!==void 0){var B=aa,Te=t;switch(t){case"keypress":if(oi(a)===0)break e;case"keydown":case"keyup":B=fa;break;case"focusin":Te="focus",B=ua;break;case"focusout":Te="blur",B=ua;break;case"beforeblur":case"afterblur":B=ua;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=Eu;break;case Dp:case Np:case Op:B=ca;break;case Mp:B=Au;break;case"scroll":case"scrollend":B=du;break;case"wheel":B=da;break;case"copy":case"cut":case"paste":B=ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Mo;break;case"toggle":case"beforetoggle":B=wu}var ge=(i&4)!==0,et=!ge&&(t==="scroll"||t==="scrollend"),k=ge?z!==null?z+"Capture":null:z;ge=[];for(var N=j,L;N!==null;){var Q=N;if(L=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||L===null||k===null||(Q=ms(N,k),Q!=null&&ge.push(cl(N,Q,L))),et)break;N=N.return}0<ge.length&&(z=new B(z,Te,null,a,F),X.push({event:z,listeners:ge}))}}if((i&7)===0){e:{if(z=t==="mouseover"||t==="pointerover",B=t==="mouseout"||t==="pointerout",z&&a!==Ni&&(Te=a.relatedTarget||a.fromElement)&&(Ii(Te)||Te[xn]))break e;if((B||z)&&(z=F.window===F?F:(z=F.ownerDocument)?z.defaultView||z.parentWindow:window,B?(Te=a.relatedTarget||a.toElement,B=j,Te=Te?Ii(Te):null,Te!==null&&(et=c(Te),ge=Te.tag,Te!==et||ge!==5&&ge!==27&&ge!==6)&&(Te=null)):(B=null,Te=j),B!==Te)){if(ge=Mn,Q="onMouseLeave",k="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(ge=Mo,Q="onPointerLeave",k="onPointerEnter",N="pointer"),et=B==null?z:ii(B),L=Te==null?z:ii(Te),z=new ge(Q,N+"leave",B,a,F),z.target=et,z.relatedTarget=L,Q=null,Ii(F)===j&&(ge=new ge(k,N+"enter",Te,a,F),ge.target=L,ge.relatedTarget=et,Q=ge),et=Q,B&&Te)t:{for(ge=B,k=Te,N=0,L=ge;L;L=La(L))N++;for(L=0,Q=k;Q;Q=La(Q))L++;for(;0<N-L;)ge=La(ge),N--;for(;0<L-N;)k=La(k),L--;for(;N--;){if(ge===k||k!==null&&ge===k.alternate)break t;ge=La(ge),k=La(k)}ge=null}else ge=null;B!==null&&e_(X,z,B,ge,!1),Te!==null&&et!==null&&e_(X,et,Te,ge,!0)}}e:{if(z=j?ii(j):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var oe=vp;else if(Nt(z))if(Ep)oe=ZT;else{oe=XT;var De=YT}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?j&&Ro(j.elementType)&&(oe=vp):oe=$T;if(oe&&(oe=oe(t,j))){Pi(X,oe,a,F);break e}De&&De(t,z,j),t==="focusout"&&j&&z.type==="number"&&j.memoizedProps.value!=null&&cr(z,"number",z.value)}switch(De=j?ii(j):window,t){case"focusin":(Nt(De)||De.contentEditable==="true")&&(ma=De,Hh=j,Po=null);break;case"focusout":Po=Hh=ma=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,Cp(X,a,F);break;case"selectionchange":if(JT)break;case"keydown":case"keyup":Cp(X,a,F)}var fe;if(ci)e:{switch(t){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Ue?H(t,a)&&(_e="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(_&&a.locale!=="ko"&&(Ue||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Ue&&(fe=Co()):(ai=F,hr="value"in ai?ai.value:ai.textContent,Ue=!0)),De=hc(j,_e),0<De.length&&(_e=new No(_e,t,null,a,F),X.push({event:_e,listeners:De}),fe?_e.data=fe:(fe=ie(a),fe!==null&&(_e.data=fe)))),(fe=m?Dt(t,a):Le(t,a))&&(_e=hc(j,"onBeforeInput"),0<_e.length&&(De=new No("onBeforeInput","beforeinput",null,a,F),X.push({event:De,listeners:_e}),De.data=fe)),k1(X,t,j,a,F)}Wy(X,i)})}function cl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function hc(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ms(t,a),h!=null&&o.unshift(cl(t,h,f)),h=ms(t,i),h!=null&&o.push(cl(t,h,f))),t.tag===3)return o;t=t.return}return[]}function La(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function e_(t,i,a,o,h){for(var f=i._reactName,v=[];a!==null&&a!==o;){var E=a,S=E.alternate,j=E.stateNode;if(E=E.tag,S!==null&&S===o)break;E!==5&&E!==26&&E!==27||j===null||(S=j,h?(j=ms(a,f),j!=null&&v.unshift(cl(a,j,S))):h||(j=ms(a,f),j!=null&&v.push(cl(a,j,S)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var j1=/\r\n?/g,z1=/\u0000|\uFFFD/g;function t_(t){return(typeof t=="string"?t:""+t).replace(j1,`
`).replace(z1,"")}function n_(t,i){return i=t_(i),t_(t)===i}function fc(){}function Je(t,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Dn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Dn(t,""+o);break;case"className":ri(t,"class",o);break;case"tabIndex":ri(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(t,a,o);break;case"style":So(t,o,f);break;case"data":if(i!=="object"){ri(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=sa(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Je(t,i,"name",h.name,h,null),Je(t,i,"formEncType",h.formEncType,h,null),Je(t,i,"formMethod",h.formMethod,h,null),Je(t,i,"formTarget",h.formTarget,h,null)):(Je(t,i,"encType",h.encType,h,null),Je(t,i,"method",h.method,h,null),Je(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=sa(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=fc);break;case"onScroll":o!=null&&Oe("scroll",t);break;case"onScrollEnd":o!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=sa(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),ur(t,"popover",o);break;case"xlinkActuate":qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":qt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":qt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":qt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":qt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ur(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ph.get(a)||a,ur(t,a,o))}}function md(t,i,a,o,h,f){switch(a){case"style":So(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof o=="string"?Dn(t,o):(typeof o=="number"||typeof o=="bigint")&&Dn(t,""+o);break;case"onScroll":o!=null&&Oe("scroll",t);break;case"onScrollEnd":o!=null&&Oe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=fc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ea.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Tt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):ur(t,a,o)}}}function Qt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Je(t,i,f,v,a,null)}}h&&Je(t,i,"srcSet",a.srcSet,a,null),o&&Je(t,i,"src",a.src,a,null);return;case"input":Oe("invalid",t);var E=f=v=h=null,S=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var F=a[o];if(F!=null)switch(o){case"name":h=F;break;case"type":v=F;break;case"checked":S=F;break;case"defaultChecked":j=F;break;case"value":f=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:Je(t,i,o,F,a,null)}}hs(t,f,E,S,j,v,h,!1),ra(t);return;case"select":Oe("invalid",t),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Je(t,i,h,E,a,null)}i=f,a=v,t.multiple=!!o,i!=null?Di(t,!!o,i,!1):a!=null&&Di(t,!!o,a,!0);return;case"textarea":Oe("invalid",t),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Je(t,i,v,E,a,null)}fs(t,o,h,f),ra(t);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(o=a[S],o!=null))switch(S){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Je(t,i,S,o,a,null)}return;case"dialog":Oe("beforetoggle",t),Oe("toggle",t),Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(o=0;o<ul.length;o++)Oe(ul[o],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Je(t,i,j,o,a,null)}return;default:if(Ro(i)){for(F in a)a.hasOwnProperty(F)&&(o=a[F],o!==void 0&&md(t,i,F,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Je(t,i,E,o,a,null))}function B1(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,S=null,j=null,F=null;for(B in a){var X=a[B];if(a.hasOwnProperty(B)&&X!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":S=X;default:o.hasOwnProperty(B)||Je(t,i,B,null,o,X)}}for(var z in o){var B=o[z];if(X=a[z],o.hasOwnProperty(z)&&(B!=null||X!=null))switch(z){case"type":f=B;break;case"name":h=B;break;case"checked":j=B;break;case"defaultChecked":F=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==X&&Je(t,i,z,B,o,X)}}vn(t,v,E,S,j,F,f,h);return;case"select":B=v=E=z=null;for(f in a)if(S=a[f],a.hasOwnProperty(f)&&S!=null)switch(f){case"value":break;case"multiple":B=S;default:o.hasOwnProperty(f)||Je(t,i,f,null,o,S)}for(h in o)if(f=o[h],S=a[h],o.hasOwnProperty(h)&&(f!=null||S!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==S&&Je(t,i,h,f,o,S)}i=E,a=v,o=B,z!=null?Di(t,!!a,z,!1):!!o!=!!a&&(i!=null?Di(t,!!a,i,!0):Di(t,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Je(t,i,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Je(t,i,v,h,o,f)}Ze(t,z,B);return;case"option":for(var Te in a)if(z=a[Te],a.hasOwnProperty(Te)&&z!=null&&!o.hasOwnProperty(Te))switch(Te){case"selected":t.selected=!1;break;default:Je(t,i,Te,null,o,z)}for(S in o)if(z=o[S],B=a[S],o.hasOwnProperty(S)&&z!==B&&(z!=null||B!=null))switch(S){case"selected":t.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Je(t,i,S,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in a)z=a[ge],a.hasOwnProperty(ge)&&z!=null&&!o.hasOwnProperty(ge)&&Je(t,i,ge,null,o,z);for(j in o)if(z=o[j],B=a[j],o.hasOwnProperty(j)&&z!==B&&(z!=null||B!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Je(t,i,j,z,o,B)}return;default:if(Ro(i)){for(var et in a)z=a[et],a.hasOwnProperty(et)&&z!==void 0&&!o.hasOwnProperty(et)&&md(t,i,et,void 0,o,z);for(F in o)z=o[F],B=a[F],!o.hasOwnProperty(F)||z===B||z===void 0&&B===void 0||md(t,i,F,z,o,B);return}}for(var k in a)z=a[k],a.hasOwnProperty(k)&&z!=null&&!o.hasOwnProperty(k)&&Je(t,i,k,null,o,z);for(X in o)z=o[X],B=a[X],!o.hasOwnProperty(X)||z===B||z==null&&B==null||Je(t,i,X,z,o,B)}var pd=null,gd=null;function dc(t){return t.nodeType===9?t:t.ownerDocument}function i_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function yd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _d=null;function q1(){var t=window.event;return t&&t.type==="popstate"?t===_d?!1:(_d=t,!0):(_d=null,!1)}var s_=typeof setTimeout=="function"?setTimeout:void 0,H1=typeof clearTimeout=="function"?clearTimeout:void 0,a_=typeof Promise=="function"?Promise:void 0,G1=typeof queueMicrotask=="function"?queueMicrotask:typeof a_<"u"?function(t){return a_.resolve(null).then(t).catch(F1)}:s_;function F1(t){setTimeout(function(){throw t})}function Ir(t){return t==="head"}function o_(t,i){var a=i,o=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&hl(v.documentElement),a&2&&hl(v.body),a&4)for(a=v.head,hl(a),v=a.firstChild;v;){var E=v.nextSibling,S=v.nodeName;v[os]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){t.removeChild(f),vl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);vl(i)}function vd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":vd(a),lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Q1(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[os])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Zn(t.nextSibling),t===null)break}return null}function K1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Zn(t.nextSibling),t===null))return null;return t}function Ed(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Y1(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Zn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Td=null;function l_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function u_(t,i,a){switch(i=dc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function hl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);lr(t)}var zn=new Map,c_=new Set;function mc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xi=re.d;re.d={f:X1,r:$1,D:Z1,C:W1,L:J1,m:eA,X:nA,S:tA,M:iA};function X1(){var t=Xi.f(),i=sc();return t||i}function $1(t){var i=ni(t);i!==null&&i.tag===5&&i.type==="form"?Dg(i):Xi.r(t)}var ja=typeof document>"u"?null:document;function h_(t,i,a){var o=ja;if(o&&typeof i=="string"&&i){var h=At(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),c_.has(h)||(c_.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Qt(i,"link",t),gt(i),o.head.appendChild(i)))}}function Z1(t){Xi.D(t),h_("dns-prefetch",t,null)}function W1(t,i){Xi.C(t,i),h_("preconnect",t,i)}function J1(t,i,a){Xi.L(t,i,a);var o=ja;if(o&&t&&i){var h='link[rel="preload"][as="'+At(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+At(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+At(a.imageSizes)+'"]')):h+='[href="'+At(t)+'"]';var f=h;switch(i){case"style":f=za(t);break;case"script":f=Ba(t)}zn.has(f)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),zn.set(f,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(fl(f))||i==="script"&&o.querySelector(dl(f))||(i=o.createElement("link"),Qt(i,"link",t),gt(i),o.head.appendChild(i)))}}function eA(t,i){Xi.m(t,i);var a=ja;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+At(o)+'"][href="'+At(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ba(t)}if(!zn.has(f)&&(t=T({rel:"modulepreload",href:t},i),zn.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(dl(f)))return}o=a.createElement("link"),Qt(o,"link",t),gt(o),a.head.appendChild(o)}}}function tA(t,i,a){Xi.S(t,i,a);var o=ja;if(o&&t){var h=sn(o).hoistableStyles,f=za(t);i=i||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(fl(f)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=zn.get(f))&&Ad(t,a);var S=v=o.createElement("link");gt(S),Qt(S,"link",t),S._p=new Promise(function(j,F){S.onload=j,S.onerror=F}),S.addEventListener("load",function(){E.loading|=1}),S.addEventListener("error",function(){E.loading|=2}),E.loading|=4,pc(v,i,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function nA(t,i){Xi.X(t,i);var a=ja;if(a&&t){var o=sn(a).hoistableScripts,h=Ba(t),f=o.get(h);f||(f=a.querySelector(dl(h)),f||(t=T({src:t,async:!0},i),(i=zn.get(h))&&bd(t,i),f=a.createElement("script"),gt(f),Qt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function iA(t,i){Xi.M(t,i);var a=ja;if(a&&t){var o=sn(a).hoistableScripts,h=Ba(t),f=o.get(h);f||(f=a.querySelector(dl(h)),f||(t=T({src:t,async:!0,type:"module"},i),(i=zn.get(h))&&bd(t,i),f=a.createElement("script"),gt(f),Qt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function f_(t,i,a,o){var h=(h=ye.current)?mc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=za(a.href),a=sn(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=za(a.href);var f=sn(h).hoistableStyles,v=f.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=h.querySelector(fl(t)))&&!f._p&&(v.instance=f,v.state.loading=5),zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zn.set(t,a),f||rA(h,t,a,v.state))),i&&o===null)throw Error(s(528,""));return v}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ba(a),a=sn(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function za(t){return'href="'+At(t)+'"'}function fl(t){return'link[rel="stylesheet"]['+t+"]"}function d_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function rA(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Qt(i,"link",a),gt(i),t.head.appendChild(i))}function Ba(t){return'[src="'+At(t)+'"]'}function dl(t){return"script[async]"+t}function m_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+At(a.href)+'"]');if(o)return i.instance=o,gt(o),o;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),gt(o),Qt(o,"style",h),pc(o,a.precedence,t),i.instance=o;case"stylesheet":h=za(a.href);var f=t.querySelector(fl(h));if(f)return i.state.loading|=4,i.instance=f,gt(f),f;o=d_(a),(h=zn.get(h))&&Ad(o,h),f=(t.ownerDocument||t).createElement("link"),gt(f);var v=f;return v._p=new Promise(function(E,S){v.onload=E,v.onerror=S}),Qt(f,"link",o),i.state.loading|=4,pc(f,a.precedence,t),i.instance=f;case"script":return f=Ba(a.src),(h=t.querySelector(dl(f)))?(i.instance=h,gt(h),h):(o=a,(h=zn.get(f))&&(o=T({},a),bd(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),gt(h),Qt(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,pc(o,a.precedence,t));return i.instance}function pc(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Ad(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function bd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var gc=null;function p_(t,i,a){if(gc===null){var o=new Map,h=gc=new Map;h.set(a,o)}else h=gc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[os]||f[xt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=t+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function g_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function sA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function y_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ml=null;function aA(){}function oA(t,i,a){if(ml===null)throw Error(s(475));var o=ml;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=za(a.href),f=t.querySelector(fl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=yc.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=f,gt(f);return}f=t.ownerDocument||t,a=d_(a),(h=zn.get(h))&&Ad(a,h),f=f.createElement("link"),gt(f);var v=f;v._p=new Promise(function(E,S){v.onload=E,v.onerror=S}),Qt(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=yc.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function lA(){if(ml===null)throw Error(s(475));var t=ml;return t.stylesheets&&t.count===0&&wd(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&wd(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function yc(){if(this.count--,this.count===0){if(this.stylesheets)wd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var _c=null;function wd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,_c=new Map,i.forEach(uA,t),_c=null,yc.call(t))}function uA(t,i){if(!(i.state.loading&4)){var a=_c.get(t);if(a)var o=a.get(null);else{a=new Map,_c.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=i.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=yc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var pl={$$typeof:J,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function cA(t,i,a,o,h,f,v,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Si(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Si(0),this.hiddenUpdates=Si(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function __(t,i,a,o,h,f,v,E,S,j,F,X){return t=new cA(t,i,a,v,E,S,j,X),i=1,f===!0&&(i|=24),f=Tn(3,null,null,i),t.current=f,f.stateNode=t,i=sf(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},uf(f),t}function v_(t){return t?(t=_a,t):_a}function E_(t,i,a,o,h,f){h=v_(h),o.context===null?o.context=h:o.pendingContext=h,o=mr(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=pr(t,o,i),a!==null&&(Rn(a,t,i),Fo(a,t,i))}function T_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Sd(t,i){T_(t,i),(t=t.alternate)&&T_(t,i)}function A_(t){if(t.tag===13){var i=ya(t,67108864);i!==null&&Rn(i,t,67108864),Sd(t,67108864)}}var vc=!0;function hA(t,i,a,o){var h=G.T;G.T=null;var f=re.p;try{re.p=2,Rd(t,i,a,o)}finally{re.p=f,G.T=h}}function fA(t,i,a,o){var h=G.T;G.T=null;var f=re.p;try{re.p=8,Rd(t,i,a,o)}finally{re.p=f,G.T=h}}function Rd(t,i,a,o){if(vc){var h=Id(o);if(h===null)dd(t,i,o,Ec,a),w_(t,o);else if(mA(h,t,i,a,o))o.stopPropagation();else if(w_(t,o),i&4&&-1<dA.indexOf(t)){for(;h!==null;){var f=ni(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Qn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var S=1<<31-$t(v);E.entanglements[1]|=S,v&=~S}gi(f),(Xe&6)===0&&(ic=ht()+500,ll(0))}}break;case 13:E=ya(f,2),E!==null&&Rn(E,f,2),sc(),Sd(f,2)}if(f=Id(o),f===null&&dd(t,i,o,Ec,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else dd(t,i,o,null,a)}}function Id(t){return t=Nn(t),Cd(t)}var Ec=null;function Cd(t){if(Ec=null,t=Ii(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ec=t,null}function b_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rn()){case cn:return 2;case $s:return 8;case ns:case Nh:return 32;case Zs:return 268435456;default:return 32}default:return 32}}var xd=!1,Cr=null,xr=null,Dr=null,gl=new Map,yl=new Map,Nr=[],dA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w_(t,i){switch(t){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":gl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(i.pointerId)}}function _l(t,i,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=ni(i),i!==null&&A_(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function mA(t,i,a,o,h){switch(i){case"focusin":return Cr=_l(Cr,t,i,a,o,h),!0;case"dragenter":return xr=_l(xr,t,i,a,o,h),!0;case"mouseover":return Dr=_l(Dr,t,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return gl.set(f,_l(gl.get(f)||null,t,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,yl.set(f,_l(yl.get(f)||null,t,i,a,o,h)),!0}return!1}function S_(t){var i=Ii(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,su(t.priority,function(){if(a.tag===13){var o=Sn();o=sr(o);var h=ya(a,o);h!==null&&Rn(h,a,o),Sd(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Id(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Ni=o,a.target.dispatchEvent(o),Ni=null}else return i=ni(a),i!==null&&A_(i),t.blockedOn=a,!1;i.shift()}return!0}function R_(t,i,a){Tc(t)&&a.delete(i)}function pA(){xd=!1,Cr!==null&&Tc(Cr)&&(Cr=null),xr!==null&&Tc(xr)&&(xr=null),Dr!==null&&Tc(Dr)&&(Dr=null),gl.forEach(R_),yl.forEach(R_)}function Ac(t,i){t.blockedOn===i&&(t.blockedOn=null,xd||(xd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,pA)))}var bc=null;function I_(t){bc!==t&&(bc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){bc===t&&(bc=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Cd(o||a)===null)continue;break}var f=ni(a);f!==null&&(t.splice(i,3),i-=3,Cf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function vl(t){function i(S){return Ac(S,t)}Cr!==null&&Ac(Cr,t),xr!==null&&Ac(xr,t),Dr!==null&&Ac(Dr,t),gl.forEach(i),yl.forEach(i);for(var a=0;a<Nr.length;a++){var o=Nr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Nr.length&&(a=Nr[0],a.blockedOn===null);)S_(a),a.blockedOn===null&&Nr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[Tt]||null;if(typeof f=="function")v||I_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[Tt]||null)E=v.formAction;else if(Cd(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),I_(a)}}}function Dd(t){this._internalRoot=t}wc.prototype.render=Dd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=Sn();E_(a,o,t,i,null,null)},wc.prototype.unmount=Dd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;E_(t.current,2,null,t,null,null),sc(),i[xn]=null}};function wc(t){this._internalRoot=t}wc.prototype.unstable_scheduleHydration=function(t){if(t){var i=ar();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Nr.length&&i!==0&&i<Nr[a].priority;a++);Nr.splice(a,0,t),a===0&&S_(t)}};var C_=e.version;if(C_!=="19.1.1")throw Error(s(527,C_,"19.1.1"));re.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var gA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sc.isDisabled&&Sc.supportsFiber)try{ft=Sc.inject(gA),Ye=Sc}catch{}}return Tl.createRoot=function(t,i){if(!l(t))throw Error(s(299));var a=!1,o="",h=Gg,f=Fg,v=Qg,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=__(t,1,!1,null,null,a,o,h,f,v,E,null),t[xn]=i.current,fd(t),new Dd(i)},Tl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(s(299));var o=!1,h="",f=Gg,v=Fg,E=Qg,S=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=__(t,1,!0,i,a??null,o,h,f,v,E,S,j),i.context=v_(null),a=i.current,o=Sn(),o=sr(o),h=mr(o),h.callback=null,pr(a,h,o),a=o,i.current.lanes=a,Ri(i,a),gi(i),t[xn]=i.current,fd(t),new wc(i)},Tl.version="19.1.1",Tl}var L_;function RA(){if(L_)return Md.exports;L_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Md.exports=SA(),Md.exports}var IA=RA();const CA=()=>{};var j_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},xA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],p=r[n++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,p=d?r[l+1]:0,g=l+2<r.length,y=g?r[l+2]:0,T=c>>2,R=(c&3)<<4|p>>4;let x=(p&15)<<2|y>>6,q=y&63;g||(q=64,d||(x=64)),s.push(n[T],n[R],n[x],n[q])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(g0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):xA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],p=l<r.length?n[r.charAt(l)]:0;++l;const y=l<r.length?n[r.charAt(l)]:64;++l;const R=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||p==null||y==null||R==null)throw new DA;const x=c<<2|p>>4;if(s.push(x),y!==64){const q=p<<4&240|y>>2;if(s.push(q),R!==64){const Y=y<<6&192|R;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class DA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NA=function(r){const e=g0(r);return y0.encodeByteArray(e,!0)},Hc=function(r){return NA(r).replace(/\./g,"")},_0=function(r){try{return y0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=()=>OA().__FIREBASE_DEFAULTS__,VA=()=>{if(typeof process>"u"||typeof j_>"u")return;const r=j_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},kA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&_0(r[1]);return e&&JSON.parse(e)},uh=()=>{try{return CA()||MA()||VA()||kA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},v0=r=>uh()?.emulatorHosts?.[r],PA=r=>{const e=v0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},E0=()=>uh()?.config,T0=r=>uh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function A0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Hc(JSON.stringify(n)),Hc(JSON.stringify(d)),""].join(".")}const Cl={};function jA(){const r={prod:[],emulator:[]};for(const e of Object.keys(Cl))Cl[e]?r.emulator.push(e):r.prod.push(e);return r}function zA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let z_=!1;function b0(r,e){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||Cl[r]===e||Cl[r]||z_)return;Cl[r]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",c=jA().prod.length>0;function d(){const x=document.getElementById(s);x&&x.remove()}function p(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,q){x.setAttribute("width","24"),x.setAttribute("id",q),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{z_=!0,d()},x}function T(x,q){x.setAttribute("id",q),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function R(){const x=zA(s),q=n("text"),Y=document.getElementById(q)||document.createElement("span"),te=n("learnmore"),W=document.getElementById(te)||document.createElement("a"),ue=n("preprendIcon"),le=document.getElementById(ue)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const J=x.element;p(J),T(W,te);const de=y();g(le,ue),J.append(le,Y,W,de),document.body.appendChild(J)}c?(Y.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function qA(){const r=uh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function FA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QA(){const r=nn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function KA(){return!qA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YA(){try{return typeof indexedDB=="object"}catch{return!1}}function XA(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="FirebaseError";class rr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=$A,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fl.prototype.create)}}class Fl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?ZA(c,s):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new rr(l,p,s)}}function ZA(r,e){return r.replace(WA,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const WA=/\{\$([^}]+)}/g;function JA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function zs(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(B_(c)&&B_(d)){if(!zs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function B_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Al(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function bl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function eb(r,e){const n=new tb(r,e);return n.subscribe.bind(n)}class tb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let l;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");nb(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:s},l.next===void 0&&(l.next=Ud),l.error===void 0&&(l.error=Ud),l.complete===void 0&&(l.complete=Ud);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nb(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Ud(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(r){return r&&r._delegate?r._delegate:r}class Bs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new UA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sb(e))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=Ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ps){return this.instances.has(e)}getOptions(e=Ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&d.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rb(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ps){return this.component?this.component.multipleInstances?e:Ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rb(r){return r===Ps?void 0:r}function sb(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ib(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const ob={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},lb=Ve.INFO,ub={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},cb=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=ub[e];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Im{constructor(e){this.name=e,this._logLevel=lb,this._logHandler=cb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ob[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const hb=(r,e)=>e.some(n=>r instanceof n);let q_,H_;function fb(){return q_||(q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function db(){return H_||(H_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w0=new WeakMap,Wd=new WeakMap,S0=new WeakMap,Ld=new WeakMap,Cm=new WeakMap;function mb(r){const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(jr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&w0.set(n,r)}).catch(()=>{}),Cm.set(e,r),e}function pb(r){if(Wd.has(r))return;const e=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Wd.set(r,e)}let Jd={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Wd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||S0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function gb(r){Jd=r(Jd)}function yb(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(jd(this),e,...n);return S0.set(s,e.sort?e.sort():[e]),jr(s)}:db().includes(r)?function(...e){return r.apply(jd(this),e),jr(w0.get(this))}:function(...e){return jr(r.apply(jd(this),e))}}function _b(r){return typeof r=="function"?yb(r):(r instanceof IDBTransaction&&pb(r),hb(r,fb())?new Proxy(r,Jd):r)}function jr(r){if(r instanceof IDBRequest)return mb(r);if(Ld.has(r))return Ld.get(r);const e=_b(r);return e!==r&&(Ld.set(r,e),Cm.set(e,r)),e}const jd=r=>Cm.get(r);function vb(r,e,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),p=jr(d);return s&&d.addEventListener("upgradeneeded",g=>{s(jr(d.result),g.oldVersion,g.newVersion,jr(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const Eb=["get","getKey","getAll","getAllKeys","count"],Tb=["put","add","delete","clear"],zd=new Map;function G_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(zd.get(e))return zd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=Tb.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||Eb.includes(n)))return;const c=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return zd.set(e,c),c}gb(r=>({...r,get:(e,n,s)=>G_(e,n)||r.get(e,n,s),has:(e,n)=>!!G_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bb(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function bb(r){return r.getComponent()?.type==="VERSION"}const em="@firebase/app",F_="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new Im("@firebase/app"),wb="@firebase/app-compat",Sb="@firebase/analytics-compat",Rb="@firebase/analytics",Ib="@firebase/app-check-compat",Cb="@firebase/app-check",xb="@firebase/auth",Db="@firebase/auth-compat",Nb="@firebase/database",Ob="@firebase/data-connect",Mb="@firebase/database-compat",Vb="@firebase/functions",kb="@firebase/functions-compat",Pb="@firebase/installations",Ub="@firebase/installations-compat",Lb="@firebase/messaging",jb="@firebase/messaging-compat",zb="@firebase/performance",Bb="@firebase/performance-compat",qb="@firebase/remote-config",Hb="@firebase/remote-config-compat",Gb="@firebase/storage",Fb="@firebase/storage-compat",Qb="@firebase/firestore",Kb="@firebase/ai",Yb="@firebase/firestore-compat",Xb="firebase",$b="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="[DEFAULT]",Zb={[em]:"fire-core",[wb]:"fire-core-compat",[Rb]:"fire-analytics",[Sb]:"fire-analytics-compat",[Cb]:"fire-app-check",[Ib]:"fire-app-check-compat",[xb]:"fire-auth",[Db]:"fire-auth-compat",[Nb]:"fire-rtdb",[Ob]:"fire-data-connect",[Mb]:"fire-rtdb-compat",[Vb]:"fire-fn",[kb]:"fire-fn-compat",[Pb]:"fire-iid",[Ub]:"fire-iid-compat",[Lb]:"fire-fcm",[jb]:"fire-fcm-compat",[zb]:"fire-perf",[Bb]:"fire-perf-compat",[qb]:"fire-rc",[Hb]:"fire-rc-compat",[Gb]:"fire-gcs",[Fb]:"fire-gcs-compat",[Qb]:"fire-fst",[Yb]:"fire-fst-compat",[Kb]:"fire-vertex","fire-js":"fire-js",[Xb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Map,Wb=new Map,nm=new Map;function Q_(r,e){try{r.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Wa(r){const e=r.name;if(nm.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;nm.set(e,r);for(const n of Gc.values())Q_(n,r);for(const n of Wb.values())Q_(n,r);return!0}function xm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Bn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new Fl("app","Firebase",Jb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=$b;function R0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:tm,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw zr.create("bad-app-name",{appName:String(l)});if(n||(n=E0()),!n)throw zr.create("no-options");const c=Gc.get(l);if(c){if(zs(n,c.options)&&zs(s,c.config))return c;throw zr.create("duplicate-app",{appName:l})}const d=new ab(l);for(const g of nm.values())d.addComponent(g);const p=new ew(n,s,d);return Gc.set(l,p),p}function I0(r=tm){const e=Gc.get(r);if(!e&&r===tm&&E0())return R0();if(!e)throw zr.create("no-app",{appName:r});return e}function Br(r,e,n){let s=Zb[r]??r;n&&(s+=`-${n}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(d.join(" "));return}Wa(new Bs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="firebase-heartbeat-database",nw=1,Vl="firebase-heartbeat-store";let Bd=null;function C0(){return Bd||(Bd=vb(tw,nw,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(r=>{throw zr.create("idb-open",{originalErrorMessage:r.message})})),Bd}async function iw(r){try{const n=(await C0()).transaction(Vl),s=await n.objectStore(Vl).get(x0(r));return await n.done,s}catch(e){if(e instanceof rr)er.warn(e.message);else{const n=zr.create("idb-get",{originalErrorMessage:e?.message});er.warn(n.message)}}}async function K_(r,e){try{const s=(await C0()).transaction(Vl,"readwrite");await s.objectStore(Vl).put(e,x0(r)),await s.done}catch(n){if(n instanceof rr)er.warn(n.message);else{const s=zr.create("idb-set",{originalErrorMessage:n?.message});er.warn(s.message)}}}function x0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=1024,sw=30;class aw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Y_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>sw){const l=uw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){er.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Y_(),{heartbeatsToSend:n,unsentEntries:s}=ow(this._heartbeatsCache.heartbeats),l=Hc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return er.warn(e),""}}}function Y_(){return new Date().toISOString().substring(0,10)}function ow(r,e=rw){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),X_(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),X_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class lw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YA()?XA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return K_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return K_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function X_(r){return Hc(JSON.stringify({version:2,heartbeats:r})).length}function uw(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(r){Wa(new Bs("platform-logger",e=>new Ab(e),"PRIVATE")),Wa(new Bs("heartbeat",e=>new aw(e),"PRIVATE")),Br(em,F_,r),Br(em,F_,"esm2020"),Br("fire-js","")}cw("");var hw="firebase",fw="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(hw,fw,"app");function D0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dw=D0,N0=new Fl("auth","Firebase",D0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Im("@firebase/auth");function mw(r,...e){Fc.logLevel<=Ve.WARN&&Fc.warn(`Auth (${ao}): ${r}`,...e)}function Mc(r,...e){Fc.logLevel<=Ve.ERROR&&Fc.error(`Auth (${ao}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(r,...e){throw Dm(r,...e)}function _i(r,...e){return Dm(r,...e)}function O0(r,e,n){const s={...dw(),[e]:n};return new Fl("auth","Firebase",s).create(e,{appName:r.name})}function Ji(r){return O0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dm(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return N0.create(r,...e)}function ve(r,e,...n){if(!r)throw Dm(e,...n)}function Zi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mc(e),new Error(e)}function tr(r,e){r||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(){return typeof self<"u"&&self.location?.href||""}function pw(){return $_()==="http:"||$_()==="https:"}function $_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pw()||GA()||"connection"in navigator)?navigator.onLine:!0}function yw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.shortDelay=e,this.longDelay=n,tr(n>e,"Short delay should be less than long delay!"),this.isMobile=BA()||FA()}get(){return gw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(r,e){tr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ew=new Kl(3e4,6e4);function Wr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Jr(r,e,n,s,l={}){return V0(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const p=Ql({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...c};return HA()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&so(r.emulatorConfig.host)&&(y.credentials="include"),M0.fetch()(await k0(r,r.config.apiHost,n,p),y)})}async function V0(r,e,n){r._canInitEmulator=!1;const s={..._w,...e};try{const l=new Aw(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Rc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rc(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Rc(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Rc(r,"user-disabled",d);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw O0(r,T,y);Jn(r,T)}}catch(l){if(l instanceof rr)throw l;Jn(r,"network-request-failed",{message:String(l)})}}async function Yl(r,e,n,s,l={}){const c=await Jr(r,e,n,s,l);return"mfaPendingCredential"in c&&Jn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function k0(r,e,n,s){const l=`${e}${n}?${s}`,c=r,d=c.config.emulator?Nm(r.config,l):`${r.config.apiScheme}://${l}`;return vw.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function Tw(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Aw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(_i(this.auth,"network-request-failed")),Ew.get())})}}function Rc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=_i(r,e,s);return l.customData._tokenResponse=n,l}function Z_(r){return r!==void 0&&r.enterprise!==void 0}class bw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Tw(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ww(r,e){return Jr(r,"GET","/v2/recaptchaConfig",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sw(r,e){return Jr(r,"POST","/v1/accounts:delete",e)}async function Qc(r,e){return Jr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Rw(r,e=!1){const n=kt(r),s=await n.getIdToken(e),l=Om(s);ve(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:xl(qd(l.auth_time)),issuedAtTime:xl(qd(l.iat)),expirationTime:xl(qd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function qd(r){return Number(r)*1e3}function Om(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const l=_0(n);return l?JSON.parse(l):(Mc("Failed to decode base64 JWT payload"),null)}catch(l){return Mc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function W_(r){const e=Om(r);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof rr&&Iw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Iw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xl(this.lastLoginAt),this.creationTime=xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(r){const e=r.auth,n=await r.getIdToken(),s=await kl(r,Qc(e,{idToken:n}));ve(s?.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?P0(l.providerUserInfo):[],d=Dw(r.providerData,c),p=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!d?.length,y=p?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new rm(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(r,T)}async function xw(r){const e=kt(r);await Kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Dw(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function P0(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nw(r,e){const n=await V0(r,{},async()=>{const s=Ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await k0(r,l,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&so(r.emulatorConfig.host)&&(g.credentials="include"),M0.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ow(r,e){return Jr(r,"POST","/v2/accounts:revokeToken",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):W_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=W_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await Nw(e,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new Ka;return s&&(ve(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(ve(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(ve(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ka,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(r,e){ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Wn{constructor({uid:e,auth:n,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new Cw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new rm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await kl(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Rw(this,e)}reload(){return xw(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Kc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bn(this.auth.app))return Promise.reject(Ji(this.auth));const e=await this.getIdToken();return await kl(this,Sw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:R,emailVerified:x,isAnonymous:q,providerData:Y,stsTokenManager:te}=n;ve(R&&te,e,"internal-error");const W=Ka.fromJSON(this.name,te);ve(typeof R=="string",e,"internal-error"),Mr(s,e.name),Mr(l,e.name),ve(typeof x=="boolean",e,"internal-error"),ve(typeof q=="boolean",e,"internal-error"),Mr(c,e.name),Mr(d,e.name),Mr(p,e.name),Mr(g,e.name),Mr(y,e.name),Mr(T,e.name);const ue=new Wn({uid:R,auth:e,email:l,emailVerified:x,displayName:s,isAnonymous:q,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:W,createdAt:y,lastLoginAt:T});return Y&&Array.isArray(Y)&&(ue.providerData=Y.map(le=>({...le}))),g&&(ue._redirectEventId=g),ue}static async _fromIdTokenResponse(e,n,s=!1){const l=new Ka;l.updateFromServerResponse(n);const c=new Wn({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await Kc(c),c}static async _fromGetAccountInfoResponse(e,n,s){const l=n.users[0];ve(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?P0(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new Ka;p.updateFromIdToken(s);const g=new Wn({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new rm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=new Map;function Wi(r){tr(r instanceof Function,"Expected a class definition");let e=J_.get(r);return e?(tr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,J_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}U0.type="NONE";const ev=U0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(r,e,n){return`firebase:${r}:${e}:${n}`}class Ya{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Vc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Vc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qc(this.auth,{idToken:e}).catch(()=>{});return n?Wn._fromGetAccountInfoResponse(this.auth,n,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ya(Wi(ev),e,s);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Wi(ev);const d=Vc(s,e.config.apiKey,e.name);let p=null;for(const y of n)try{const T=await y._get(d);if(T){let R;if(typeof T=="string"){const x=await Qc(e,{idToken:T}).catch(()=>{});if(!x)break;R=await Wn._fromGetAccountInfoResponse(e,x,T)}else R=Wn._fromJSON(e,T);y!==c&&(p=R),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ya(c,e,s):(c=g[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Ya(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(B0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(L0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H0(e))return"Blackberry";if(G0(e))return"Webos";if(j0(e))return"Safari";if((e.includes("chrome/")||z0(e))&&!e.includes("edge/"))return"Chrome";if(q0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function L0(r=nn()){return/firefox\//i.test(r)}function j0(r=nn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function z0(r=nn()){return/crios\//i.test(r)}function B0(r=nn()){return/iemobile/i.test(r)}function q0(r=nn()){return/android/i.test(r)}function H0(r=nn()){return/blackberry/i.test(r)}function G0(r=nn()){return/webos/i.test(r)}function Mm(r=nn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Mw(r=nn()){return Mm(r)&&!!window.navigator?.standalone}function Vw(){return QA()&&document.documentMode===10}function F0(r=nn()){return Mm(r)||q0(r)||G0(r)||H0(r)||/windows phone/i.test(r)||B0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(r,e=[]){let n;switch(r){case"Browser":n=tv(nn());break;case"Worker":n=`${tv(nn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ao}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,p)=>{try{const g=e(c);d(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pw(r,e={}){return Jr(r,"GET","/v2/passwordPolicy",Wr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=6;class Lw{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Uw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n,s,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nv(this),this.idTokenSubscription=new nv(this),this.beforeStateQueue=new kw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ya.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qc(this,{idToken:e}),s=await Wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Bn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bn(this.app))return Promise.reject(Ji(this));const n=e?kt(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bn(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bn(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Pw(this),n=new Lw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Ow(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wi(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Ya.create(this,[Wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&mw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Qs(r){return kt(r)}class nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=eb(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zw(r){ch=r}function K0(r){return ch.loadJS(r)}function Bw(){return ch.recaptchaEnterpriseScript}function qw(){return ch.gapiScript}function Hw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Gw{constructor(){this.enterprise=new Fw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Fw{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Qw="recaptcha-enterprise",Y0="NO_RECAPTCHA";class Kw{constructor(e){this.type=Qw,this.auth=Qs(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{ww(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new bw(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(c,d,p){const g=window.grecaptcha;Z_(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(Y0)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Gw().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(p=>{if(!n&&Z_(window.grecaptcha))l(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Bw();g.length!==0&&(g+=p),K0(g).then(()=>{l(p,c,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function iv(r,e,n,s=!1,l=!1){const c=new Kw(r);let d;if(l)d=Y0;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function sm(r,e,n,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await iv(r,e,n,n==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await iv(r,e,n,n==="getOobCode");return s(r,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(r,e){const n=xm(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(zs(c,e??{}))return l;Jn(l,"already-initialized")}return n.initialize({options:e})}function Xw(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Wi);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function $w(r,e,n){const s=Qs(r);ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=X0(e),{host:d,port:p}=Zw(e),g=p===null?"":`:${p}`,y={url:`${c}//${d}${g}/`},T=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ve(zs(y,s.config.emulator)&&zs(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,so(d)?(A0(`${c}//${d}${g}`),b0("Auth",!0)):Ww()}function X0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Zw(r){const e=X0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:rv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:rv(d)}}}function rv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Ww(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,n){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}async function Jw(r,e){return Jr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(r,e){return Yl(r,"POST","/v1/accounts:signInWithPassword",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(r,e){return Yl(r,"POST","/v1/accounts:signInWithEmailLink",Wr(r,e))}async function nS(r,e){return Yl(r,"POST","/v1/accounts:signInWithEmailLink",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends Vm{constructor(e,n,s,l=null){super("password",s),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Pl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Pl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,n,"signInWithPassword",eS);case"emailLink":return tS(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,s,"signUpPassword",Jw);case"emailLink":return nS(e,{idToken:n,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(r,e){return Yl(r,"POST","/v1/accounts:signInWithIdp",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="http://localhost";class qs extends Vm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=n;if(!s||!l)return null;const d=new qs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Xa(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Xa(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xa(e,n)}buildRequest(){const e={requestUri:iS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ql(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sS(r){const e=Al(bl(r)).link,n=e?Al(bl(e)).deep_link_id:null,s=Al(bl(r)).deep_link_id;return(s?Al(bl(s)).link:null)||s||n||e||r}class km{constructor(e){const n=Al(bl(e)),s=n.apiKey??null,l=n.oobCode??null,c=rS(n.mode??null);ve(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=sS(e);try{return new km(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.providerId=oo.PROVIDER_ID}static credential(e,n){return Pl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=km.parseLink(n);return ve(s,"argument-error"),Pl._fromEmailAndCode(e,s.code,s.tenantId)}}oo.PROVIDER_ID="password";oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends $0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Xl{constructor(){super("facebook.com")}static credential(e){return qs._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qs._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return kr.credential(n,s)}catch{return null}}}kr.GOOGLE_SIGN_IN_METHOD="google.com";kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Xl{constructor(){super("github.com")}static credential(e){return qs._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Xl{constructor(){super("twitter.com")}static credential(e,n){return qs._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ur.credential(n,s)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aS(r,e){return Yl(r,"POST","/v1/accounts:signUp",Wr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,l=!1){const c=await Wn._fromIdTokenResponse(e,s,l),d=sv(s);return new Hs({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const l=sv(s);return new Hs({user:e,providerId:l,_tokenResponse:s,operationType:n})}}function sv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends rr{constructor(e,n,s,l){super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Yc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,l){return new Yc(e,n,s,l)}}function Z0(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Yc._fromErrorAndOperation(r,c,e,s):c})}async function oS(r,e,n=!1){const s=await kl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Hs._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(r,e,n=!1){const{auth:s}=r;if(Bn(s.app))return Promise.reject(Ji(s));const l="reauthenticate";try{const c=await kl(r,Z0(s,l,e,r),n);ve(c.idToken,s,"internal-error");const d=Om(c.idToken);ve(d,s,"internal-error");const{sub:p}=d;return ve(r.uid===p,s,"user-mismatch"),Hs._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Jn(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0(r,e,n=!1){if(Bn(r.app))return Promise.reject(Ji(r));const s="signIn",l=await Z0(r,s,e),c=await Hs._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}async function uS(r,e){return W0(Qs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J0(r){const e=Qs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cS(r,e,n){if(Bn(r.app))return Promise.reject(Ji(r));const s=Qs(r),d=await sm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aS).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&J0(r),g}),p=await Hs._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(p.user),p}function hS(r,e,n){return Bn(r.app)?Promise.reject(Ji(r)):uS(kt(r),oo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&J0(r),s})}function fS(r,e,n,s){return kt(r).onIdTokenChanged(e,n,s)}function dS(r,e,n){return kt(r).beforeAuthStateChanged(e,n)}function mS(r,e,n,s){return kt(r).onAuthStateChanged(e,n,s)}function pS(r){return kt(r).signOut()}const Xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xc,"1"),this.storage.removeItem(Xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=1e3,yS=10;class tE extends eE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=F0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&e(n,l,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Vw()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,yS):l()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},gS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tE.type="LOCAL";const _S=tE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE extends eE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nE.type="SESSION";const iE=nE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const s=new hh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,c)),g=await vS(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,g)=>{const y=Pm("",20);l.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(R){const x=R;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(x.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function TS(r){vi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function AS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bS(){return navigator?.serviceWorker?.controller||null}function wS(){return rE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="firebaseLocalStorageDb",SS=1,$c="firebaseLocalStorage",aE="fbase_key";class $l{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fh(r,e){return r.transaction([$c],e?"readwrite":"readonly").objectStore($c)}function RS(){const r=indexedDB.deleteDatabase(sE);return new $l(r).toPromise()}function am(){const r=indexedDB.open(sE,SS);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore($c,{keyPath:aE})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains($c)?e(s):(s.close(),await RS(),e(await am()))})})}async function av(r,e,n){const s=fh(r,!0).put({[aE]:e,value:n});return new $l(s).toPromise()}async function IS(r,e){const n=fh(r,!1).get(e),s=await new $l(n).toPromise();return s===void 0?null:s.value}function ov(r,e){const n=fh(r,!0).delete(e);return new $l(n).toPromise()}const CS=800,xS=3;class oE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>xS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hh._getInstance(wS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await AS(),!this.activeServiceWorker)return;this.sender=new ES(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await av(e,Xc,"1"),await ov(e,Xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>av(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>IS(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ov(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=fh(l,!1).getAll();return new $l(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oE.type="LOCAL";const DS=oE;new Kl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(r,e){return e?Wi(e):(ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um extends Vm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OS(r){return W0(r.auth,new Um(r),r.bypassAuthState)}function MS(r){const{auth:e,user:n}=r;return ve(n,e,"internal-error"),lS(n,new Um(r),r.bypassAuthState)}async function VS(r){const{auth:e,user:n}=r;return ve(n,e,"internal-error"),oS(n,new Um(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OS;case"linkViaPopup":case"linkViaRedirect":return VS;case"reauthViaPopup":case"reauthViaRedirect":return MS;default:Jn(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new Kl(2e3,1e4);class Qa extends lE{constructor(e,n,s,l,c){super(e,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Qa.currentPopupAction&&Qa.currentPopupAction.cancel(),Qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=Pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kS.get())};e()}}Qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="pendingRedirect",kc=new Map;class US extends lE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=kc.get(this.auth._key());if(!e){try{const s=await LS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}kc.set(this.auth._key(),e)}return this.bypassAuthState||kc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LS(r,e){const n=BS(e),s=zS(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function jS(r,e){kc.set(r._key(),e)}function zS(r){return Wi(r._redirectPersistence)}function BS(r){return Vc(PS,r.config.apiKey,r.name)}async function qS(r,e,n=!1){if(Bn(r.app))return Promise.reject(Ji(r));const s=Qs(r),l=NS(s,e),d=await new US(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=600*1e3;class GS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!uE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_i(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HS&&this.cachedEventUids.clear(),this.cachedEventUids.has(lv(e))}saveEventToCache(e){this.cachedEventUids.add(lv(e)),this.lastProcessedEventTime=Date.now()}}function lv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function uE({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function FS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(r,e={}){return Jr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YS=/^https?/;async function XS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await QS(r);for(const n of e)try{if($S(n))return}catch{}Jn(r,"unauthorized-domain")}function $S(r){const e=im(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!YS.test(n))return!1;if(KS.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=new Kl(3e4,6e4);function uv(){const r=vi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function WS(r){return new Promise((e,n)=>{function s(){uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uv(),n(_i(r,"network-request-failed"))},timeout:ZS.get()})}if(vi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vi().gapi?.load)s();else{const l=Hw("iframefcb");return vi()[l]=()=>{gapi.load?s():n(_i(r,"network-request-failed"))},K0(`${qw()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Pc=null,e})}let Pc=null;function JS(r){return Pc=Pc||WS(r),Pc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new Kl(5e3,15e3),tR="__/auth/iframe",nR="emulator/auth/iframe",iR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sR(r){const e=r.config;ve(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Nm(e,nR):`https://${r.config.authDomain}/${tR}`,s={apiKey:e.apiKey,appName:r.name,v:ao},l=rR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Ql(s).slice(1)}`}async function aR(r){const e=await JS(r),n=vi().gapi;return ve(n,r,"internal-error"),e.open({where:document.body,url:sR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=_i(r,"network-request-failed"),p=vi().setTimeout(()=>{c(d)},eR.get());function g(){vi().clearTimeout(p),l(s)}s.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lR=500,uR=600,cR="_blank",hR="http://localhost";class cv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fR(r,e,n,s=lR,l=uR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...oR,width:s.toString(),height:l.toString(),top:c,left:d},y=nn().toLowerCase();n&&(p=z0(y)?cR:n),L0(y)&&(e=e||hR,g.scrollbars="yes");const T=Object.entries(g).reduce((x,[q,Y])=>`${x}${q}=${Y},`,"");if(Mw(y)&&p!=="_self")return dR(e||"",p),new cv(null);const R=window.open(e||"",p,T);ve(R,r,"popup-blocked");try{R.focus()}catch{}return new cv(R)}function dR(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="__/auth/handler",pR="emulator/auth/handler",gR=encodeURIComponent("fac");async function hv(r,e,n,s,l,c){ve(r.config.authDomain,r,"auth-domain-config-required"),ve(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ao,eventId:l};if(e instanceof $0){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",JA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,R]of Object.entries({}))d[T]=R}if(e instanceof Xl){const T=e.getScopes().filter(R=>R!=="");T.length>0&&(d.scopes=T.join(","))}r.tenantId&&(d.tid=r.tenantId);const p=d;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),y=g?`#${gR}=${encodeURIComponent(g)}`:"";return`${yR(r)}?${Ql(p).slice(1)}${y}`}function yR({config:r}){return r.emulator?Nm(r,pR):`https://${r.authDomain}/${mR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="webStorageSupport";class _R{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iE,this._completeRedirectFn=qS,this._overrideRedirectResult=jS}async _openPopup(e,n,s,l){tr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await hv(e,n,s,im(),l);return fR(e,c,Pm())}async _openRedirect(e,n,s,l){await this._originValidation(e);const c=await hv(e,n,s,im(),l);return TS(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(tr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await aR(e),s=new GS(e);return n.register("authEvent",l=>(ve(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hd,{type:Hd},l=>{const c=l?.[0]?.[Hd];c!==void 0&&n(!!c),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=XS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return F0()||j0()||Mm()}}const vR=_R;var fv="@firebase/auth",dv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AR(r){Wa(new Bs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=s.options;ve(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q0(r)},y=new jw(s,l,c,g);return Xw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Wa(new Bs("auth-internal",e=>{const n=Qs(e.getProvider("auth").getImmediate());return(s=>new ER(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(fv,dv,TR(r)),Br(fv,dv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=300,wR=T0("authIdTokenMaxAge")||bR;let mv=null;const SR=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>wR)return;const l=n?.token;mv!==l&&(mv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function RR(r=I0()){const e=xm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=Yw(r,{popupRedirectResolver:vR,persistence:[DS,_S,iE]}),s=T0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=SR(c.toString());dS(n,d,()=>d(n.currentUser)),fS(n,p=>d(p))}}const l=v0("auth");return l&&$w(n,`http://${l}`),n}function IR(){return document.getElementsByTagName("head")?.[0]??document}zw({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=_i("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",IR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AR("Browser");var pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,cE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,w){function I(){}I.prototype=w.prototype,M.D=w.prototype,M.prototype=new I,M.prototype.constructor=M,M.C=function(O,V,P){for(var C=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)C[Ct-2]=arguments[Ct];return w.prototype[V].apply(O,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,w,I){I||(I=0);var O=Array(16);if(typeof w=="string")for(var V=0;16>V;++V)O[V]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(V=0;16>V;++V)O[V]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=M.g[0],I=M.g[1],V=M.g[2];var P=M.g[3],C=w+(P^I&(V^P))+O[0]+3614090360&4294967295;w=I+(C<<7&4294967295|C>>>25),C=P+(V^w&(I^V))+O[1]+3905402710&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(I^P&(w^I))+O[2]+606105819&4294967295,V=P+(C<<17&4294967295|C>>>15),C=I+(w^V&(P^w))+O[3]+3250441966&4294967295,I=V+(C<<22&4294967295|C>>>10),C=w+(P^I&(V^P))+O[4]+4118548399&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(V^w&(I^V))+O[5]+1200080426&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(I^P&(w^I))+O[6]+2821735955&4294967295,V=P+(C<<17&4294967295|C>>>15),C=I+(w^V&(P^w))+O[7]+4249261313&4294967295,I=V+(C<<22&4294967295|C>>>10),C=w+(P^I&(V^P))+O[8]+1770035416&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(V^w&(I^V))+O[9]+2336552879&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(I^P&(w^I))+O[10]+4294925233&4294967295,V=P+(C<<17&4294967295|C>>>15),C=I+(w^V&(P^w))+O[11]+2304563134&4294967295,I=V+(C<<22&4294967295|C>>>10),C=w+(P^I&(V^P))+O[12]+1804603682&4294967295,w=I+(C<<7&4294967295|C>>>25),C=P+(V^w&(I^V))+O[13]+4254626195&4294967295,P=w+(C<<12&4294967295|C>>>20),C=V+(I^P&(w^I))+O[14]+2792965006&4294967295,V=P+(C<<17&4294967295|C>>>15),C=I+(w^V&(P^w))+O[15]+1236535329&4294967295,I=V+(C<<22&4294967295|C>>>10),C=w+(V^P&(I^V))+O[1]+4129170786&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^V&(w^I))+O[6]+3225465664&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^I&(P^w))+O[11]+643717713&4294967295,V=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(V^P))+O[0]+3921069994&4294967295,I=V+(C<<20&4294967295|C>>>12),C=w+(V^P&(I^V))+O[5]+3593408605&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^V&(w^I))+O[10]+38016083&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^I&(P^w))+O[15]+3634488961&4294967295,V=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(V^P))+O[4]+3889429448&4294967295,I=V+(C<<20&4294967295|C>>>12),C=w+(V^P&(I^V))+O[9]+568446438&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^V&(w^I))+O[14]+3275163606&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^I&(P^w))+O[3]+4107603335&4294967295,V=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(V^P))+O[8]+1163531501&4294967295,I=V+(C<<20&4294967295|C>>>12),C=w+(V^P&(I^V))+O[13]+2850285829&4294967295,w=I+(C<<5&4294967295|C>>>27),C=P+(I^V&(w^I))+O[2]+4243563512&4294967295,P=w+(C<<9&4294967295|C>>>23),C=V+(w^I&(P^w))+O[7]+1735328473&4294967295,V=P+(C<<14&4294967295|C>>>18),C=I+(P^w&(V^P))+O[12]+2368359562&4294967295,I=V+(C<<20&4294967295|C>>>12),C=w+(I^V^P)+O[5]+4294588738&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^V)+O[8]+2272392833&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^I)+O[11]+1839030562&4294967295,V=P+(C<<16&4294967295|C>>>16),C=I+(V^P^w)+O[14]+4259657740&4294967295,I=V+(C<<23&4294967295|C>>>9),C=w+(I^V^P)+O[1]+2763975236&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^V)+O[4]+1272893353&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^I)+O[7]+4139469664&4294967295,V=P+(C<<16&4294967295|C>>>16),C=I+(V^P^w)+O[10]+3200236656&4294967295,I=V+(C<<23&4294967295|C>>>9),C=w+(I^V^P)+O[13]+681279174&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^V)+O[0]+3936430074&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^I)+O[3]+3572445317&4294967295,V=P+(C<<16&4294967295|C>>>16),C=I+(V^P^w)+O[6]+76029189&4294967295,I=V+(C<<23&4294967295|C>>>9),C=w+(I^V^P)+O[9]+3654602809&4294967295,w=I+(C<<4&4294967295|C>>>28),C=P+(w^I^V)+O[12]+3873151461&4294967295,P=w+(C<<11&4294967295|C>>>21),C=V+(P^w^I)+O[15]+530742520&4294967295,V=P+(C<<16&4294967295|C>>>16),C=I+(V^P^w)+O[2]+3299628645&4294967295,I=V+(C<<23&4294967295|C>>>9),C=w+(V^(I|~P))+O[0]+4096336452&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~V))+O[7]+1126891415&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~I))+O[14]+2878612391&4294967295,V=P+(C<<15&4294967295|C>>>17),C=I+(P^(V|~w))+O[5]+4237533241&4294967295,I=V+(C<<21&4294967295|C>>>11),C=w+(V^(I|~P))+O[12]+1700485571&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~V))+O[3]+2399980690&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~I))+O[10]+4293915773&4294967295,V=P+(C<<15&4294967295|C>>>17),C=I+(P^(V|~w))+O[1]+2240044497&4294967295,I=V+(C<<21&4294967295|C>>>11),C=w+(V^(I|~P))+O[8]+1873313359&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~V))+O[15]+4264355552&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~I))+O[6]+2734768916&4294967295,V=P+(C<<15&4294967295|C>>>17),C=I+(P^(V|~w))+O[13]+1309151649&4294967295,I=V+(C<<21&4294967295|C>>>11),C=w+(V^(I|~P))+O[4]+4149444226&4294967295,w=I+(C<<6&4294967295|C>>>26),C=P+(I^(w|~V))+O[11]+3174756917&4294967295,P=w+(C<<10&4294967295|C>>>22),C=V+(w^(P|~I))+O[2]+718787259&4294967295,V=P+(C<<15&4294967295|C>>>17),C=I+(P^(V|~w))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+w&4294967295,M.g[1]=M.g[1]+(V+(C<<21&4294967295|C>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+P&4294967295}s.prototype.u=function(M,w){w===void 0&&(w=M.length);for(var I=w-this.blockSize,O=this.B,V=this.h,P=0;P<w;){if(V==0)for(;P<=I;)l(this,M,P),P+=this.blockSize;if(typeof M=="string"){for(;P<w;)if(O[V++]=M.charCodeAt(P++),V==this.blockSize){l(this,O),V=0;break}}else for(;P<w;)if(O[V++]=M[P++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=w},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var w=1;w<M.length-8;++w)M[w]=0;var I=8*this.o;for(w=M.length-8;w<M.length;++w)M[w]=I&255,I/=256;for(this.u(M),M=Array(16),w=I=0;4>w;++w)for(var O=0;32>O;O+=8)M[I++]=this.g[w]>>>O&255;return M};function c(M,w){var I=p;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=w(M)}function d(M,w){this.h=w;for(var I=[],O=!0,V=M.length-1;0<=V;V--){var P=M[V]|0;O&&P==w||(I[V]=P,O=!1)}this.g=I}var p={};function g(M){return-128<=M&&128>M?c(M,function(w){return new d([w|0],0>w?-1:0)}):new d([M|0],0>M?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return R;if(0>M)return W(y(-M));for(var w=[],I=1,O=0;M>=I;O++)w[O]=M/I|0,I*=4294967296;return new d(w,0)}function T(M,w){if(M.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(M.charAt(0)=="-")return W(T(M.substring(1),w));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(w,8)),O=R,V=0;V<M.length;V+=8){var P=Math.min(8,M.length-V),C=parseInt(M.substring(V,V+P),w);8>P?(P=y(Math.pow(w,P)),O=O.j(P).add(y(C))):(O=O.j(I),O=O.add(y(C)))}return O}var R=g(0),x=g(1),q=g(16777216);r=d.prototype,r.m=function(){if(te(this))return-W(this).m();for(var M=0,w=1,I=0;I<this.g.length;I++){var O=this.i(I);M+=(0<=O?O:4294967296+O)*w,w*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(Y(this))return"0";if(te(this))return"-"+W(this).toString(M);for(var w=y(Math.pow(M,6)),I=this,O="";;){var V=de(I,w).g;I=ue(I,V.j(w));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(M);if(I=V,Y(I))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function Y(M){if(M.h!=0)return!1;for(var w=0;w<M.g.length;w++)if(M.g[w]!=0)return!1;return!0}function te(M){return M.h==-1}r.l=function(M){return M=ue(this,M),te(M)?-1:Y(M)?0:1};function W(M){for(var w=M.g.length,I=[],O=0;O<w;O++)I[O]=~M.g[O];return new d(I,~M.h).add(x)}r.abs=function(){return te(this)?W(this):this},r.add=function(M){for(var w=Math.max(this.g.length,M.g.length),I=[],O=0,V=0;V<=w;V++){var P=O+(this.i(V)&65535)+(M.i(V)&65535),C=(P>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=C>>>16,P&=65535,C&=65535,I[V]=C<<16|P}return new d(I,I[I.length-1]&-2147483648?-1:0)};function ue(M,w){return M.add(W(w))}r.j=function(M){if(Y(this)||Y(M))return R;if(te(this))return te(M)?W(this).j(W(M)):W(W(this).j(M));if(te(M))return W(this.j(W(M)));if(0>this.l(q)&&0>M.l(q))return y(this.m()*M.m());for(var w=this.g.length+M.g.length,I=[],O=0;O<2*w;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<M.g.length;V++){var P=this.i(O)>>>16,C=this.i(O)&65535,Ct=M.i(V)>>>16,rt=M.i(V)&65535;I[2*O+2*V]+=C*rt,le(I,2*O+2*V),I[2*O+2*V+1]+=P*rt,le(I,2*O+2*V+1),I[2*O+2*V+1]+=C*Ct,le(I,2*O+2*V+1),I[2*O+2*V+2]+=P*Ct,le(I,2*O+2*V+2)}for(O=0;O<w;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=w;O<2*w;O++)I[O]=0;return new d(I,0)};function le(M,w){for(;(M[w]&65535)!=M[w];)M[w+1]+=M[w]>>>16,M[w]&=65535,w++}function J(M,w){this.g=M,this.h=w}function de(M,w){if(Y(w))throw Error("division by zero");if(Y(M))return new J(R,R);if(te(M))return w=de(W(M),w),new J(W(w.g),W(w.h));if(te(w))return w=de(M,W(w)),new J(W(w.g),w.h);if(30<M.g.length){if(te(M)||te(w))throw Error("slowDivide_ only works with positive integers.");for(var I=x,O=w;0>=O.l(M);)I=pe(I),O=pe(O);var V=we(I,1),P=we(O,1);for(O=we(O,2),I=we(I,2);!Y(O);){var C=P.add(O);0>=C.l(M)&&(V=V.add(I),P=C),O=we(O,1),I=we(I,1)}return w=ue(M,V.j(w)),new J(V,w)}for(V=R;0<=M.l(w);){for(I=Math.max(1,Math.floor(M.m()/w.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=y(I),C=P.j(w);te(C)||0<C.l(M);)I-=O,P=y(I),C=P.j(w);Y(P)&&(P=x),V=V.add(P),M=ue(M,C)}return new J(V,M)}r.A=function(M){return de(this,M).h},r.and=function(M){for(var w=Math.max(this.g.length,M.g.length),I=[],O=0;O<w;O++)I[O]=this.i(O)&M.i(O);return new d(I,this.h&M.h)},r.or=function(M){for(var w=Math.max(this.g.length,M.g.length),I=[],O=0;O<w;O++)I[O]=this.i(O)|M.i(O);return new d(I,this.h|M.h)},r.xor=function(M){for(var w=Math.max(this.g.length,M.g.length),I=[],O=0;O<w;O++)I[O]=this.i(O)^M.i(O);return new d(I,this.h^M.h)};function pe(M){for(var w=M.g.length+1,I=[],O=0;O<w;O++)I[O]=M.i(O)<<1|M.i(O-1)>>>31;return new d(I,M.h)}function we(M,w){var I=w>>5;w%=32;for(var O=M.g.length-I,V=[],P=0;P<O;P++)V[P]=0<w?M.i(P+I)>>>w|M.i(P+I+1)<<32-w:M.i(P+I);return new d(V,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,cE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,qr=d}).apply(typeof pv<"u"?pv:typeof self<"u"?self:typeof window<"u"?window:{});var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hE,wl,fE,Uc,om,dE,mE,pE;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ic=="object"&&Ic];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)e:{var _=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var U=u[A];if(!(U in _))break e;_=_[U]}u=u[u.length-1],A=_[u],m=m(A),m!=A&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var _=0,A=!1,U={next:function(){if(!A&&_<u.length){var H=_++;return{value:m(H,u[H]),done:!1}}return A=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},p=this||self;function g(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,_){return u.call.apply(u.bind,arguments)}function R(u,m,_){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,A),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function x(u,m,_){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:R,x.apply(null,arguments)}function q(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function Y(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(A,U,H){for(var ie=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ie[Ue-2]=arguments[Ue];return m.prototype[U].apply(A,ie)}}function te(u){const m=u.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=u[A];return _}return[]}function W(u,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(g(A)){const U=u.length||0,H=A.length||0;u.length=U+H;for(let ie=0;ie<H;ie++)u[U+ie]=A[ie]}else u.push(A)}}class ue{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function le(u){return/^[\s\xa0]*$/.test(u)}function J(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function de(u){return de[" "](u),u}de[" "]=function(){};var pe=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function we(u,m,_){for(const A in u)m.call(_,u[A],A,u)}function M(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function w(u){const m={};for(const _ in u)m[_]=u[_];return m}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let _,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(_ in A)u[_]=A[_];for(let H=0;H<I.length;H++)_=I[H],Object.prototype.hasOwnProperty.call(A,_)&&(u[_]=A[_])}}function V(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function P(u){p.setTimeout(()=>{throw u},0)}function C(){var u=Be;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ct{constructor(){this.h=this.g=null}add(m,_){const A=rt.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var rt=new ue(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ce=!1,Be=new Ct,D=()=>{const u=p.Promise.resolve(void 0);re=()=>{u.then(Z)}};var Z=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){P(_)}var m=rt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ce=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return u})();function Ie(u,m){if(ee.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(pe){e:{try{de(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ye[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ie.aa.h.call(this)}}Y(Ie,ee);var ye={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Cn(u,m,_,A,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=U,this.key=++Ke,this.da=this.fa=!1}function Se(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Re(u){this.src=u,this.g={},this.h=0}Re.prototype.add=function(u,m,_,A,U){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var ie=at(u,m,A,U);return-1<ie?(m=u[ie],_||(m.fa=!1)):(m=new Cn(m,this.src,H,!!A,U),m.fa=_,u.push(m)),m};function qe(u,m){var _=m.type;if(_ in u.g){var A=u.g[_],U=Array.prototype.indexOf.call(A,m,void 0),H;(H=0<=U)&&Array.prototype.splice.call(A,U,1),H&&(Se(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function at(u,m,_,A){for(var U=0;U<u.length;++U){var H=u[U];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==A)return U}return-1}var gn="closure_lm_"+(1e6*Math.random()|0),Fn={};function yn(u,m,_,A,U){if(Array.isArray(m)){for(var H=0;H<m.length;H++)yn(u,m[H],_,A,U);return null}return _=iu(_),u&&u[Et]?u.K(m,_,y(A)?!!A.capture:!1,U):ht(u,m,_,!1,A,U)}function ht(u,m,_,A,U,H){if(!m)throw Error("Invalid event type");var ie=y(U)?!!U.capture:!!U,Ue=Zs(u);if(Ue||(u[gn]=Ue=new Re(u)),_=Ue.add(m,_,A,ie,H),_.proxy)return _;if(A=rn(),_.proxy=A,A.src=u,A.listener=_,u.addEventListener)he||(U=ie),U===void 0&&(U=!1),u.addEventListener(m.toString(),A,U);else if(u.attachEvent)u.attachEvent(ns(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function rn(){function u(_){return m.call(u.src,u.listener,_)}const m=Nh;return u}function cn(u,m,_,A,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)cn(u,m[H],_,A,U);else A=y(A)?!!A.capture:!!A,_=iu(_),u&&u[Et]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],_=at(H,_,A,U),-1<_&&(Se(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=Zs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=at(m,_,A,U)),(_=-1<u?m[u]:null)&&$s(_))}function $s(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Et])qe(m.i,u);else{var _=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(_,A,u.capture):m.detachEvent?m.detachEvent(ns(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Zs(m))?(qe(_,u),_.h==0&&(_.src=null,m[gn]=null)):Se(u)}}}function ns(u){return u in Fn?Fn[u]:Fn[u]="on"+u}function Nh(u,m){if(u.da)u=!0;else{m=new Ie(m,this);var _=u.listener,A=u.ha||u.src;u.fa&&$s(u),u=_.call(A,m)}return u}function Zs(u){return u=u[gn],u instanceof Re?u:null}var mo="__closure_events_fn_"+(1e9*Math.random()>>>0);function iu(u){return typeof u=="function"?u:(u[mo]||(u[mo]=function(m){return u.handleEvent(m)}),u[mo])}function ft(){ne.call(this),this.i=new Re(this),this.M=this,this.F=null}Y(ft,ne),ft.prototype[Et]=!0,ft.prototype.removeEventListener=function(u,m,_,A){cn(this,u,m,_,A)};function Ye(u,m){var _,A=u.F;if(A)for(_=[];A;A=A.F)_.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new ee(m,u);else if(m instanceof ee)m.target=m.target||u;else{var U=m;m=new ee(A,u),O(m,U)}if(U=!0,_)for(var H=_.length-1;0<=H;H--){var ie=m.g=_[H];U=_n(ie,A,!0,m)&&U}if(ie=m.g=u,U=_n(ie,A,!0,m)&&U,U=_n(ie,A,!1,m)&&U,_)for(H=0;H<_.length;H++)ie=m.g=_[H],U=_n(ie,A,!1,m)&&U}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],A=0;A<_.length;A++)Se(_[A]);delete u.g[m],u.h--}}this.F=null},ft.prototype.K=function(u,m,_,A){return this.i.add(String(u),m,!1,_,A)},ft.prototype.L=function(u,m,_,A){return this.i.add(String(u),m,!0,_,A)};function _n(u,m,_,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,H=0;H<m.length;++H){var ie=m[H];if(ie&&!ie.da&&ie.capture==_){var Ue=ie.listener,Dt=ie.ha||ie.src;ie.fa&&qe(u.i,ie),U=Ue.call(Dt,A)!==!1&&U}}return U&&!A.defaultPrevented}function $t(u,m,_){if(typeof u=="function")_&&(u=x(u,_));else if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(u,m||0)}function ru(u){u.g=$t(()=>{u.g=null,u.i&&(u.i=!1,ru(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Oh extends ne{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ru(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(u){ne.call(this),this.h=u,this.g={}}Y(is,ne);var rs=[];function ss(u){we(u.g,function(m,_){this.g.hasOwnProperty(_)&&$s(m)},u),u.g={}}is.prototype.N=function(){is.aa.N.call(this),ss(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=p.JSON.stringify,Ws=p.JSON.parse,as=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function po(){}po.prototype.h=null;function go(u){return u.h||(u.h=u.i())}function yo(){}var Si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ri(){ee.call(this,"d")}Y(Ri,ee);function _o(){ee.call(this,"c")}Y(_o,ee);var ti={},vo=null;function sr(){return vo=vo||new ft}ti.La="serverreachability";function Js(u){ee.call(this,ti.La,u)}Y(Js,ee);function ar(u){const m=sr();Ye(m,new Js(m))}ti.STAT_EVENT="statevent";function su(u,m){ee.call(this,ti.STAT_EVENT,u),this.stat=m}Y(su,ee);function ot(u){const m=sr();Ye(m,new su(m,u))}ti.Ma="timingevent";function xt(u,m){ee.call(this,ti.Ma,u),this.size=m}Y(xt,ee);function Tt(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},m)}function xn(){this.g=!0}xn.prototype.xa=function(){this.g=!1};function Eo(u,m,_,A,U,H){u.info(function(){if(u.g)if(H)for(var ie="",Ue=H.split("&"),Dt=0;Dt<Ue.length;Dt++){var Le=Ue[Dt].split("=");if(1<Le.length){var Ut=Le[0];Le=Le[1];var Nt=Ut.split("_");ie=2<=Nt.length&&Nt[1]=="type"?ie+(Ut+"="+Le+"&"):ie+(Ut+"=redacted&")}}else ie=null;else ie=H;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+m+`
`+_+`
`+ie})}function Mh(u,m,_,A,U,H,ie){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+m+`
`+_+`
`+H+" "+ie})}function or(u,m,_,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+os(u,_)+(A?" "+A:"")})}function au(u,m){u.info(function(){return"TIMEOUT: "+m})}xn.prototype.info=function(){};function os(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var A=_[u];if(!(2>A.length)){var U=A[1];if(Array.isArray(U)&&!(1>U.length)){var H=U[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ie=1;ie<U.length;ie++)U[ie]=""}}}}return Qn(_)}catch{return m}}var lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ii={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ni;function ii(){}Y(ii,po),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},ni=new ii;function sn(u,m,_,A){this.j=u,this.i=m,this.l=_,this.R=A||1,this.U=new is(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}var To={},ea={};function Kn(u,m,_){u.L=1,u.v=fs(vn(m)),u.m=_,u.P=!0,Ci(u,null)}function Ci(u,m){u.F=Date.now(),ls(u),u.A=vn(u.v);var _=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Io(_.i,"t",A),u.C=0,_=u.j.J,u.h=new gt,u.g=Au(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Oh(x(u.Y,u,u.g),u.O)),m=u.U,_=u.g,A=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(rs[0]=U.toString()),U=rs);for(var H=0;H<U.length;H++){var ie=yn(_,U[H],A||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ar(),Eo(u.i,u.u,u.A,u.l,u.R,u.m)}sn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Mn(u)==3?m.j():this.Y(u)},sn.prototype.Y=function(u){try{if(u==this.g)e:{const Nt=Mn(this.g);var m=this.g.Ba();const Pi=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||mu(this.g)))){this.J||Nt!=4||m==7||(m==8||0>=Pi?ar(3):ar(2)),ur(this);var _=this.g.Z();this.X=_;t:if(ou(this)){var A=mu(this.g);u="";var U=A.length,H=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qt(this),ri(this);var ie="";break t}this.h.i=new p.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(H&&m==U-1)});A.length=0,this.h.g+=u,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=_==200,Mh(this.i,this.u,this.A,this.l,this.R,Nt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Dt=this.g;if((Ue=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!le(Ue)){var Le=Ue;break t}}Le=null}if(_=Le)or(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,us(this,_);else{this.o=!1,this.s=3,ot(12),qt(this),ri(this);break e}}if(this.P){_=!0;let Ht;for(;!this.J&&this.C<ie.length;)if(Ht=lu(this,ie),Ht==ea){Nt==4&&(this.s=4,ot(14),_=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==To){this.s=4,ot(15),or(this.i,this.l,ie,"[Invalid Chunk]"),_=!1;break}else or(this.i,this.l,Ht,null),us(this,Ht);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ie.length!=0||this.h.h||(this.s=1,ot(16),_=!1),this.o=this.o&&_,!_)or(this.i,this.l,ie,"[Invalid Chunked Response]"),qt(this),ri(this);else if(0<ie.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),Es(Ut),Ut.M=!0,ot(11))}}else or(this.i,this.l,ie,null),us(this,ie);Nt==4&&qt(this),this.o&&!this.J&&(Nt==4?vu(this.j,this):(this.o=!1,ls(this)))}else Lh(this.g),_==400&&0<ie.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),qt(this),ri(this)}}}catch{}finally{}};function ou(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function lu(u,m){var _=u.C,A=m.indexOf(`
`,_);return A==-1?ea:(_=Number(m.substring(_,A)),isNaN(_)?To:(A+=1,A+_>m.length?ea:(m=m.slice(A,A+_),u.C=A+_,m)))}sn.prototype.cancel=function(){this.J=!0,qt(this)};function ls(u){u.S=Date.now()+u.I,uu(u,u.I)}function uu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Tt(x(u.ba,u),m)}function ur(u){u.B&&(p.clearTimeout(u.B),u.B=null)}sn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(au(this.i,this.A),this.L!=2&&(ar(),ot(17)),qt(this),this.s=2,ri(this)):uu(this,this.S-u)};function ri(u){u.j.G==0||u.J||vu(u.j,u)}function qt(u){ur(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ss(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function us(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Ao(_.h,u))){if(!u.K&&Ao(_.h,u)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)fa(_),ca(_);else break e;Oo(_),ot(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=Tt(x(_.Za,_),6e3));if(1>=na(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ki(_,11)}else if((u.K||_.g==u)&&fa(_),!le(m))for(U=_.Da.g.parse(m),m=0;m<U.length;m++){let Le=U[m];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const Ut=Le[3];Ut!=null&&(_.la=Ut,_.j.info("VER="+_.la));const Nt=Le[4];Nt!=null&&(_.Aa=Nt,_.j.info("SVER="+_.Aa));const Pi=Le[5];Pi!=null&&typeof Pi=="number"&&0<Pi&&(A=1.5*Pi,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Ht=u.g;if(Ht){const hi=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var H=A.h;H.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ia(H,H.h),H.h=null))}if(A.D){const Vo=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(A.ya=Vo,Ze(A.I,A.D,Vo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var ie=u;if(A.qa=Tu(A,A.J?A.ia:null,A.W),ie.K){an(A.h,ie);var Ue=ie,Dt=A.L;Dt&&(Ue.I=Dt),Ue.B&&(ur(Ue),ls(Ue)),A.g=ie}else yu(A);0<_.i.length&&ha(_)}else Le[0]!="stop"&&Le[0]!="close"||ki(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?ki(_,7):Do(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}ar(4)}catch{}}var cu=class{constructor(u,m){this.g=u,this.map=m}};function xi(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ta(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function na(u){return u.h?1:u.g?u.g.size:0}function Ao(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ia(u,m){u.g?u.g.add(m):u.h=m}function an(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}xi.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function bo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return te(u.i)}function Vh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var m=[],_=u.length,A=0;A<_;A++)m.push(u[A]);return m}m=[],_=0;for(A in u)m[_++]=u[A];return m}function ra(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const A in u)m[_++]=A;return m}}}function wo(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=ra(u),A=Vh(u),U=A.length,H=0;H<U;H++)m.call(void 0,A[H],_&&_[H],u)}var cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var A=u[_].indexOf("="),U=null;if(0<=A){var H=u[_].substring(0,A);U=u[_].substring(A+1)}else H=u[_];m(H,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function At(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof At){this.h=u.h,hs(this,u.j),this.o=u.o,this.g=u.g,cr(this,u.s),this.l=u.l;var m=u.i,_=new Ni;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Di(this,_),this.m=u.m}else u&&(m=String(u).match(cs))?(this.h=!1,hs(this,m[1]||"",!0),this.o=Dn(m[2]||""),this.g=Dn(m[3]||"",!0),cr(this,m[4]),this.l=Dn(m[5]||"",!0),Di(this,m[6]||"",!0),this.m=Dn(m[7]||"")):(this.h=!1,this.i=new Ni(null,this.h))}At.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ds(m,So,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ds(m,So,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ds(_,_.charAt(0)=="/"?Ph:Ro,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ds(_,sa)),u.join("")};function vn(u){return new At(u)}function hs(u,m,_){u.j=_?Dn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function cr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Di(u,m,_){m instanceof Ni?(u.i=m,fu(u.i,u.h)):(_||(m=ds(m,Uh)),u.i=new Ni(m,u.h))}function Ze(u,m,_){u.i.set(m,_)}function fs(u){return Ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Dn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ds(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,hu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var So=/[#\/\?@]/g,Ro=/[#\?:]/g,Ph=/[#\?]/g,Uh=/[#\?@]/g,sa=/#/g;function Ni(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Nn(u){u.g||(u.g=new Map,u.h=0,u.i&&kh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Ni.prototype,r.add=function(u,m){Nn(this),this.i=null,u=si(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Oi(u,m){Nn(u),m=si(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Mi(u,m){return Nn(u),m=si(u,m),u.g.has(m)}r.forEach=function(u,m){Nn(this),this.g.forEach(function(_,A){_.forEach(function(U){u.call(m,U,A,this)},this)},this)},r.na=function(){Nn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const U=u[A];for(let H=0;H<U.length;H++)_.push(m[A])}return _},r.V=function(u){Nn(this);let m=[];if(typeof u=="string")Mi(this,u)&&(m=m.concat(this.g.get(si(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return Nn(this),this.i=null,u=si(this,u),Mi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Io(u,m,_){Oi(u,m),0<_.length&&(u.i=null,u.g.set(si(u,m),te(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const H=encodeURIComponent(String(A)),ie=this.V(A);for(A=0;A<ie.length;A++){var U=H;ie[A]!==""&&(U+="="+encodeURIComponent(String(ie[A]))),u.push(U)}}return this.i=u.join("&")};function si(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function fu(u,m){m&&!u.j&&(Nn(u),u.i=null,u.g.forEach(function(_,A){var U=A.toLowerCase();A!=U&&(Oi(this,A),Io(this,U,_))},u)),u.j=m}function ms(u,m){const _=new xn;if(p.Image){const A=new Image;A.onload=q(On,_,"TestLoadImage: loaded",!0,m,A),A.onerror=q(On,_,"TestLoadImage: error",!1,m,A),A.onabort=q(On,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=q(On,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function Yn(u,m){const _=new xn,A=new AbortController,U=setTimeout(()=>{A.abort(),On(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(H=>{clearTimeout(U),H.ok?On(_,"TestPingServer: ok",!0,m):On(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),On(_,"TestPingServer: error",!1,m)})}function On(u,m,_,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(_)}catch{}}function ps(){this.g=new as}function ai(u,m,_){const A=_||"";try{wo(u,function(U,H){let ie=U;y(U)&&(ie=Qn(U)),m.push(A+H+"="+encodeURIComponent(ie))})}catch(U){throw m.push(A+"type="+encodeURIComponent("_badmap")),U}}function hr(u){this.l=u.Ub||null,this.j=u.eb||!1}Y(hr,po),hr.prototype.g=function(){return new Vi(this.l,this.j)},hr.prototype.i=(function(u){return function(){return u}})({});function Vi(u,m){ft.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(Vi,ft),r=Vi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,li(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Co(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Co(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?oi(this):li(this),this.readyState==3&&Co(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,oi(this))},r.Qa=function(u){this.g&&(this.response=u,oi(this))},r.ga=function(){this.g&&oi(this)};function oi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,li(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function li(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function xo(u){let m="";return we(u,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function Pt(u,m,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=xo(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ze(u,m,_))}function Fe(u){ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(Fe,ft);var aa=/^https?$/i,gs=["POST","PUT"];r=Fe.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ni.g(),this.v=this.o?go(this.o):go(ni),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){du(this,H);return}if(u=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)_.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())_.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),U=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(gs,m,void 0))||A||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of _)this.g.setRequestHeader(H,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ys(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){du(this,H)}};function du(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,oa(u),ui(u)}function oa(u){u.A||(u.A=!0,Ye(u,"complete"),Ye(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ye(this,"complete"),Ye(this,"abort"),ui(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ui(this,!0)),Fe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?la(this):this.bb())},r.bb=function(){la(this)};function la(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Mn(u)!=4||u.Z()!=2)){if(u.u&&Mn(u)==4)$t(u.Ea,0,u);else if(Ye(u,"readystatechange"),Mn(u)==4){u.h=!1;try{const ie=u.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var A;if(A=ie===0){var U=String(u.D).match(cs)[1]||null;!U&&p.self&&p.self.location&&(U=p.self.location.protocol.slice(0,-1)),A=!aa.test(U?U.toLowerCase():"")}_=A}if(_)Ye(u,"complete"),Ye(u,"success");else{u.m=6;try{var H=2<Mn(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",oa(u)}}finally{ui(u)}}}}function ui(u,m){if(u.g){ys(u);const _=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ye(u,"ready");try{_.onreadystatechange=A}catch{}}}function ys(u){u.I&&(p.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Mn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ws(m)}};function mu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Lh(u){const m={};u=(u.g&&2<=Mn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(le(u[A]))continue;var _=V(u[A]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[U]||[];m[U]=H,H.push(_)}M(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ua(u){this.Aa=0,this.i=[],this.j=new xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_s("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_s("baseRetryDelayMs",5e3,u),this.cb=_s("retryDelaySeedMs",1e4,u),this.Wa=_s("forwardChannelMaxRetries",2,u),this.wa=_s("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new xi(u&&u.concurrentRequestLimit),this.Da=new ps,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ua.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,A){ot(0),this.W=u,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=Tu(this,null,this.W),ha(this)};function Do(u){if(pu(u),u.G==3){var m=u.U++,_=vn(u.I);if(Ze(_,"SID",u.K),Ze(_,"RID",m),Ze(_,"TYPE","terminate"),vs(u,_),m=new sn(u,u.j,m),m.L=2,m.v=fs(vn(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=Au(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ls(m)}Eu(u)}function ca(u){u.g&&(Es(u),u.g.cancel(),u.g=null)}function pu(u){ca(u),u.u&&(p.clearTimeout(u.u),u.u=null),fa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function ha(u){if(!ta(u.h)&&!u.s){u.s=!0;var m=u.Ga;re||D(),ce||(re(),ce=!0),Be.add(m,u),u.B=0}}function jh(u,m){return na(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Tt(x(u.Ga,u,m),Mo(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new sn(this,this.j,u);let H=this.o;if(this.S&&(H?(H=w(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(U.H=H,H=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=gu(this,U,m),_=vn(this.I),Ze(_,"RID",u),Ze(_,"CVER",22),this.D&&Ze(_,"X-HTTP-Session-Id",this.D),vs(this,_),H&&(this.O?m="headers="+encodeURIComponent(String(xo(H)))+"&"+m:this.m&&Pt(_,this.m,H)),ia(this.h,U),this.Ua&&Ze(_,"TYPE","init"),this.P?(Ze(_,"$req",m),Ze(_,"SID","null"),U.T=!0,Kn(U,_,null)):Kn(U,_,m),this.G=2}}else this.G==3&&(u?No(this,u):this.i.length==0||ta(this.h)||No(this))};function No(u,m){var _;m?_=m.l:_=u.U++;const A=vn(u.I);Ze(A,"SID",u.K),Ze(A,"RID",_),Ze(A,"AID",u.T),vs(u,A),u.m&&u.o&&Pt(A,u.m,u.o),_=new sn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=gu(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ia(u.h,_),Kn(_,A,m)}function vs(u,m){u.H&&we(u.H,function(_,A){Ze(m,A,_)}),u.l&&wo({},function(_,A){Ze(m,A,_)})}function gu(u,m,_){_=Math.min(u.i.length,_);var A=u.l?x(u.l.Na,u.l,u):null;e:{var U=u.i;let H=-1;for(;;){const ie=["count="+_];H==-1?0<_?(H=U[0].g,ie.push("ofs="+H)):H=0:ie.push("ofs="+H);let Ue=!0;for(let Dt=0;Dt<_;Dt++){let Le=U[Dt].g;const Ut=U[Dt].map;if(Le-=H,0>Le)H=Math.max(0,U[Dt].g-100),Ue=!1;else try{ai(Ut,ie,"req"+Le+"_")}catch{A&&A(Ut)}}if(Ue){A=ie.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,A}function yu(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;re||D(),ce||(re(),ce=!0),Be.add(m,u),u.v=0}}function Oo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Tt(x(u.Fa,u),Mo(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,_u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Tt(x(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),ca(this),_u(this))};function Es(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function _u(u){u.g=new sn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=vn(u.qa);Ze(m,"RID","rpc"),Ze(m,"SID",u.K),Ze(m,"AID",u.T),Ze(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ze(m,"TO",u.ja),Ze(m,"TYPE","xmlhttp"),vs(u,m),u.m&&u.o&&Pt(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=fs(vn(m)),_.m=null,_.P=!0,Ci(_,u)}r.Za=function(){this.C!=null&&(this.C=null,ca(this),Oo(this),ot(19))};function fa(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function vu(u,m){var _=null;if(u.g==m){fa(u),Es(u),u.g=null;var A=2}else if(Ao(u.h,m))_=m.D,an(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;A=sr(),Ye(A,new xt(A,_)),ha(u)}else yu(u);else if(U=m.s,U==3||U==0&&0<m.X||!(A==1&&jh(u,m)||A==2&&Oo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),U){case 1:ki(u,5);break;case 4:ki(u,10);break;case 3:ki(u,6);break;default:ki(u,2)}}}function Mo(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function ki(u,m){if(u.j.info("Error code "+m),m==2){var _=x(u.fb,u),A=u.Xa;const U=!A;A=new At(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||hs(A,"https"),fs(A),U?ms(A.toString(),_):Yn(A.toString(),_)}else ot(2);u.G=0,u.l&&u.l.sa(m),Eu(u),pu(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Eu(u){if(u.G=0,u.ka=[],u.l){const m=bo(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ka,m),W(u.ka,u.i),u.h.i.length=0,te(u.i),u.i.length=0),u.l.ra()}}function Tu(u,m,_){var A=_ instanceof At?vn(_):new At(_);if(A.g!="")m&&(A.g=m+"."+A.g),cr(A,A.s);else{var U=p.location;A=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var H=new At(null);A&&hs(H,A),m&&(H.g=m),U&&cr(H,U),_&&(H.l=_),A=H}return _=u.D,m=u.ya,_&&m&&Ze(A,_,m),Ze(A,"VER",u.la),vs(u,A),A}function Au(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Fe(new hr({eb:_})):new Fe(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function bu(){}r=bu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function da(){}da.prototype.g=function(u,m){return new on(u,m)};function on(u,m){ft.call(this),this.g=new ua(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!le(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!le(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ci(this)}Y(on,ft),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Do(this.g)},on.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Qn(u),u=_);m.i.push(new cu(m.Ya++,u)),m.G==3&&ha(m)},on.prototype.N=function(){this.g.l=null,delete this.j,Do(this.g),delete this.g,on.aa.N.call(this)};function wu(u){Ri.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}Y(wu,Ri);function Su(){_o.call(this),this.status=1}Y(Su,_o);function ci(u){this.g=u}Y(ci,bu),ci.prototype.ua=function(){Ye(this.g,"a")},ci.prototype.ta=function(u){Ye(this.g,new wu(u))},ci.prototype.sa=function(u){Ye(this.g,new Su)},ci.prototype.ra=function(){Ye(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,pE=function(){return new da},mE=function(){return sr()},dE=ti,om={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,Uc=lr,Ii.COMPLETE="complete",fE=Ii,yo.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",ft.prototype.listen=ft.prototype.K,wl=yo,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,hE=Fe}).apply(typeof Ic<"u"?Ic:typeof self<"u"?self:typeof window<"u"?window:{});const gv="@firebase/firestore",yv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Im("@firebase/firestore");function qa(){return Gs.logLevel}function ae(r,...e){if(Gs.logLevel<=Ve.DEBUG){const n=e.map(Lm);Gs.debug(`Firestore (${lo}): ${r}`,...n)}}function nr(r,...e){if(Gs.logLevel<=Ve.ERROR){const n=e.map(Lm);Gs.error(`Firestore (${lo}): ${r}`,...n)}}function Ja(r,...e){if(Gs.logLevel<=Ve.WARN){const n=e.map(Lm);Gs.warn(`Firestore (${lo}): ${r}`,...n)}}function Lm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,gE(r,s,n)}function gE(r,e,n){let s=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw nr(s),new Error(s)}function Qe(r,e,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,r||gE(e,l,s)}function be(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(en.UNAUTHENTICATED)))}shutdown(){}}class xR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class DR{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Hr,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Hr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qe(typeof s.accessToken=="string",31837,{l:s}),new yE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class NR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new NR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const s=c=>{c.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ae("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _v(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _v(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=VR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=e.charAt(l[c]%62))}return s}}function ke(r,e){return r<e?-1:r>e?1:0}function lm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return Gd(l)===Gd(c)?ke(l,c):Gd(l)?1:-1}return ke(r.length,e.length)}const kR=55296,PR=57343;function Gd(r){const e=r.charCodeAt(0);return e>=kR&&e<=PR}function eo(r,e,n){return r.length===e.length&&r.every(((s,l)=>n(s,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="__name__";class yi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ee(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ee(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return yi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const c=yi.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return ke(e.length,n.length)}static compareSegments(e,n){const s=yi.isNumericId(e),l=yi.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?yi.extractNumericId(e).compare(yi.extractNumericId(n)):lm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qr.fromString(e.substring(4,e.length-2))}}class it extends yi{construct(e,n,s){return new it(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new se(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new it(n)}static emptyPath(){return new it([])}}const UR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends yi{construct(e,n,s){return new Yt(e,n,s)}static isValidIdentifier(e){return UR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vv}static keyField(){return new Yt([vv])}static fromServerFormat(e){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new se(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new se(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new se(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(s+=p,l++):(c(),l++)}if(c(),d)throw new se(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(it.fromString(e))}static fromName(e){return new me(it.fromString(e).popFirst(5))}static empty(){return new me(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(r,e,n){if(!n)throw new se(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function LR(r,e,n,s){if(e===!0&&s===!0)throw new se(K.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Ev(r){if(!me.isDocumentKey(r))throw new se(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Tv(r){if(me.isDocumentKey(r))throw new se(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function vE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function dh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ee(12329,{type:typeof r})}function Hn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new se(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dh(r);throw new se(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(r,e){const n={typeString:r};return e&&(n.value=e),n}function Zl(r,e){if(!vE(r))throw new se(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new se(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=-62135596800,bv=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*bv);return new st(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Av)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bv}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zl(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Av;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:It("string",st._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new st(0,0))}static max(){return new Ae(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;function jR(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=Ae.fromTimestamp(s===1e9?new st(n+1,0):new st(n,s));return new Fr(l,me.empty(),e)}function zR(r){return new Fr(r.readTime,r.key,Ul)}class Fr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Fr(Ae.min(),me.empty(),Ul)}static max(){return new Fr(Ae.max(),me.empty(),Ul)}}function BR(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(r.documentKey,e.documentKey),n!==0?n:ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==qR)throw r;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):$.reject(n)}static resolve(e){return new $(((n,s)=>{n(e)}))}static reject(e){return new $(((n,s)=>{s(e)}))}static waitFor(e){return new $(((n,s)=>{let l=0,c=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(g=>s(g)))})),d=!0,c===l&&n()}))}static or(e){let n=$.resolve(!1);for(const s of e)n=n.next((l=>l?$.resolve(l):s()));return n}static forEach(e,n){const s=[];return e.forEach(((l,c)=>{s.push(n.call(this,l,c))})),this.waitFor(s)}static mapArray(e,n){return new $(((s,l)=>{const c=e.length,d=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((T=>{d[y]=T,++p,p===c&&s(d)}),(T=>l(T)))}}))}static doWhile(e,n){return new $(((s,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):s()};c()}))}}function GR(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function co(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=-1;function ph(r){return r==null}function Zc(r){return r===0&&1/r==-1/0}function FR(r){return typeof r=="number"&&Number.isInteger(r)&&!Zc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="";function QR(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=wv(e)),e=KR(r.get(n),e);return wv(e)}function KR(r,e){let n=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case EE:n+="";break;default:n+=c}}return n}function wv(r){return r+EE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function es(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function TE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cc(this.root,e,this.comparator,!0)}}class Cc{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,s,l,c){this.key=e,this.value=n,this.color=s??Kt.RED,this.left=l??Kt.EMPTY,this.right=c??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,c){return new Kt(e??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Kt.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,n,s,l,c){return this}insert(e,n,s){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rv(this.data.getIterator())}getIteratorFrom(e){return new Rv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class Rv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new In([])}unionWith(e){let n=new Vt(Yt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return eo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new AE("Invalid base64 string: "+c):c}})(e);return new Xt(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const YR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(r){if(Qe(!!r,39018),typeof r=="string"){let e=0;const n=YR.exec(r);if(Qe(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:vt(r.seconds),nanos:vt(r.nanos)}}function vt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Kr(r){return typeof r=="string"?Xt.fromBase64String(r):Xt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="server_timestamp",wE="__type__",SE="__previous_value__",RE="__local_write_time__";function Bm(r){return(r?.mapValue?.fields||{})[wE]?.stringValue===bE}function gh(r){const e=r.mapValue.fields[SE];return Bm(e)?gh(e):e}function Ll(r){const e=Qr(r.mapValue.fields[RE].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,s,l,c,d,p,g,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const Wc="(default)";class jl{constructor(e,n){this.projectId=e,this.database=n||Wc}static empty(){return new jl("","")}get isDefaultDatabase(){return this.database===Wc}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="__type__",$R="__max__",xc={mapValue:{}},CE="__vector__",Jc="value";function Yr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bm(r)?4:WR(r)?9007199254740991:ZR(r)?10:11:Ee(28295,{value:r})}function wi(r,e){if(r===e)return!0;const n=Yr(r);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ll(r).isEqual(Ll(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Qr(l.timestampValue),p=Qr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return Kr(l.bytesValue).isEqual(Kr(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return vt(l.geoPointValue.latitude)===vt(c.geoPointValue.latitude)&&vt(l.geoPointValue.longitude)===vt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return vt(l.integerValue)===vt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=vt(l.doubleValue),p=vt(c.doubleValue);return d===p?Zc(d)===Zc(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return eo(r.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Sv(d)!==Sv(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!wi(d[g],p[g])))return!1;return!0})(r,e);default:return Ee(52216,{left:r})}}function zl(r,e){return(r.values||[]).find((n=>wi(n,e)))!==void 0}function to(r,e){if(r===e)return 0;const n=Yr(r),s=Yr(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=vt(c.integerValue||c.doubleValue),g=vt(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return Iv(r.timestampValue,e.timestampValue);case 4:return Iv(Ll(r),Ll(e));case 5:return lm(r.stringValue,e.stringValue);case 6:return(function(c,d){const p=Kr(c),g=Kr(d);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const T=ke(p[y],g[y]);if(T!==0)return T}return ke(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=ke(vt(c.latitude),vt(d.latitude));return p!==0?p:ke(vt(c.longitude),vt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Cv(r.arrayValue,e.arrayValue);case 10:return(function(c,d){const p=c.fields||{},g=d.fields||{},y=p[Jc]?.arrayValue,T=g[Jc]?.arrayValue,R=ke(y?.values?.length||0,T?.values?.length||0);return R!==0?R:Cv(y,T)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===xc.mapValue&&d===xc.mapValue)return 0;if(c===xc.mapValue)return 1;if(d===xc.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=d.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let R=0;R<g.length&&R<T.length;++R){const x=lm(g[R],T[R]);if(x!==0)return x;const q=to(p[g[R]],y[T[R]]);if(q!==0)return q}return ke(g.length,T.length)})(r.mapValue,e.mapValue);default:throw Ee(23264,{he:n})}}function Iv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ke(r,e);const n=Qr(r),s=Qr(e),l=ke(n.seconds,s.seconds);return l!==0?l:ke(n.nanos,s.nanos)}function Cv(r,e){const n=r.values||[],s=e.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=to(n[l],s[l]);if(c)return c}return ke(n.length,s.length)}function no(r){return um(r)}function um(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Qr(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Kr(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return me.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=um(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${um(n.fields[d])}`;return l+"}"})(r.mapValue):Ee(61005,{value:r})}function Lc(r){switch(Yr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gh(r);return e?16+Lc(e):16;case 5:return 2*r.stringValue.length;case 6:return Kr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Lc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return es(s.fields,((c,d)=>{l+=c.length+Lc(d)})),l})(r.mapValue);default:throw Ee(13486,{value:r})}}function xv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function cm(r){return!!r&&"integerValue"in r}function qm(r){return!!r&&"arrayValue"in r}function Dv(r){return!!r&&"nullValue"in r}function Nv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function jc(r){return!!r&&"mapValue"in r}function ZR(r){return(r?.mapValue?.fields||{})[IE]?.stringValue===CE}function Dl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return es(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Dl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dl(r.arrayValue.values[n]);return e}return{...r}}function WR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===$R}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!jc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dl(n)}setAll(e){let n=Yt.emptyPath(),s={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,l),s={},l=[],n=p.popLast()}d?s[p.lastSegment()]=Dl(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(e){const n=this.field(e.popLast());jc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];jc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){es(n,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new pn(Dl(this.value))}}function xE(r){const e=[];return es(r.fields,((n,s)=>{const l=new Yt([n]);if(jc(s)){const c=xE(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,s,l,c,d,p){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new tn(e,0,Ae.min(),Ae.min(),Ae.min(),pn.empty(),0)}static newFoundDocument(e,n,s,l){return new tn(e,1,n,Ae.min(),s,l,0)}static newNoDocument(e,n){return new tn(e,2,n,Ae.min(),Ae.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,Ae.min(),Ae.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n){this.position=e,this.inclusive=n}}function Ov(r,e,n){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=me.comparator(me.fromName(d.referenceValue),n.key):s=to(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Mv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!wi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n="asc"){this.field=e,this.dir=n}}function JR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{}class Rt extends DE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new tI(e,n,s):n==="array-contains"?new rI(e,s):n==="in"?new sI(e,s):n==="not-in"?new aI(e,s):n==="array-contains-any"?new oI(e,s):new Rt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new nI(e,s):new iI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(to(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(to(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ei extends DE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ei(e,n)}matches(e){return NE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function NE(r){return r.op==="and"}function OE(r){return eI(r)&&NE(r)}function eI(r){for(const e of r.filters)if(e instanceof ei)return!1;return!0}function hm(r){if(r instanceof Rt)return r.field.canonicalString()+r.op.toString()+no(r.value);if(OE(r))return r.filters.map((e=>hm(e))).join(",");{const e=r.filters.map((n=>hm(n))).join(",");return`${r.op}(${e})`}}function ME(r,e){return r instanceof Rt?(function(s,l){return l instanceof Rt&&s.op===l.op&&s.field.isEqual(l.field)&&wi(s.value,l.value)})(r,e):r instanceof ei?(function(s,l){return l instanceof ei&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,p)=>c&&ME(d,l.filters[p])),!0):!1})(r,e):void Ee(19439)}function VE(r){return r instanceof Rt?(function(n){return`${n.field.canonicalString()} ${n.op} ${no(n.value)}`})(r):r instanceof ei?(function(n){return n.op.toString()+" {"+n.getFilters().map(VE).join(" ,")+"}"})(r):"Filter"}class tI extends Rt{constructor(e,n,s){super(e,n,s),this.key=me.fromName(s.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class nI extends Rt{constructor(e,n){super(e,"in",n),this.keys=kE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class iI extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=kE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function kE(r,e){return(e.arrayValue?.values||[]).map((n=>me.fromName(n.referenceValue)))}class rI extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qm(n)&&zl(n.arrayValue,this.value)}}class sI extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}}class aI extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zl(this.value.arrayValue,n)}}class oI extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>zl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n=null,s=[],l=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Vv(r,e=null,n=[],s=[],l=null,c=null,d=null){return new lI(r,e,n,s,l,c,d)}function Hm(r){const e=be(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>hm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>no(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>no(s))).join(",")),e.Te=n}return e.Te}function Gm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!JR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!ME(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Mv(r.startAt,e.startAt)&&Mv(r.endAt,e.endAt)}function fm(r){return me.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n=null,s=[],l=[],c=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uI(r,e,n,s,l,c,d,p){return new ho(r,e,n,s,l,c,d,p)}function yh(r){return new ho(r)}function kv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function PE(r){return r.collectionGroup!==null}function Nl(r){const e=be(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Vt(Yt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Bl(c,s))})),n.has(Yt.keyField().canonicalString())||e.Ie.push(new Bl(Yt.keyField(),s))}return e.Ie}function Ei(r){const e=be(r);return e.Ee||(e.Ee=cI(e,Nl(r))),e.Ee}function cI(r,e){if(r.limitType==="F")return Vv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Bl(l.field,c)}));const n=r.endAt?new eh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new eh(r.startAt.position,r.startAt.inclusive):null;return Vv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function dm(r,e){const n=r.filters.concat([e]);return new ho(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function mm(r,e,n){return new ho(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function _h(r,e){return Gm(Ei(r),Ei(e))&&r.limitType===e.limitType}function UE(r){return`${Hm(Ei(r))}|lt:${r.limitType}`}function Ha(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>VE(l))).join(", ")}]`),ph(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>no(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>no(l))).join(",")),`Target(${s})`})(Ei(r))}; limitType=${r.limitType})`}function vh(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):me.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of Nl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,p,g){const y=Ov(d,p,g);return d.inclusive?y<=0:y<0})(s.startAt,Nl(s),l)||s.endAt&&!(function(d,p,g){const y=Ov(d,p,g);return d.inclusive?y>=0:y>0})(s.endAt,Nl(s),l))})(r,e)}function hI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function LE(r){return(e,n)=>{let s=!1;for(const l of Nl(r)){const c=fI(l,e,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function fI(r,e,n){const s=r.field.isKeyField()?me.comparator(e.key,n.key):(function(c,d,p){const g=d.data.field(c),y=p.data.field(c);return g!==null&&y!==null?to(g,y):Ee(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,((n,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return TE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new ct(me.comparator);function ir(){return dI}const jE=new ct(me.comparator);function Sl(...r){let e=jE;for(const n of r)e=e.insert(n.key,n);return e}function zE(r){let e=jE;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Us(){return Ol()}function BE(){return Ol()}function Ol(){return new Ks((r=>r.toString()),((r,e)=>r.isEqual(e)))}const mI=new ct(me.comparator),pI=new Vt(me.comparator);function Pe(...r){let e=pI;for(const n of r)e=e.add(n);return e}const gI=new Vt(ke);function yI(){return gI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zc(e)?"-0":e}}function qE(r){return{integerValue:""+r}}function _I(r,e){return FR(e)?qE(e):Fm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function vI(r,e,n){return r instanceof th?(function(l,c){const d={fields:{[wE]:{stringValue:bE},[RE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Bm(c)&&(c=gh(c)),c&&(d.fields[SE]=c),{mapValue:d}})(n,e):r instanceof ql?GE(r,e):r instanceof Hl?FE(r,e):(function(l,c){const d=HE(l,c),p=Pv(d)+Pv(l.Ae);return cm(d)&&cm(l.Ae)?qE(p):Fm(l.serializer,p)})(r,e)}function EI(r,e,n){return r instanceof ql?GE(r,e):r instanceof Hl?FE(r,e):n}function HE(r,e){return r instanceof nh?(function(s){return cm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class th extends Eh{}class ql extends Eh{constructor(e){super(),this.elements=e}}function GE(r,e){const n=QE(e);for(const s of r.elements)n.some((l=>wi(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Hl extends Eh{constructor(e){super(),this.elements=e}}function FE(r,e){let n=QE(e);for(const s of r.elements)n=n.filter((l=>!wi(l,s)));return{arrayValue:{values:n}}}class nh extends Eh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Pv(r){return vt(r.integerValue||r.doubleValue)}function QE(r){return qm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function TI(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof ql&&l instanceof ql||s instanceof Hl&&l instanceof Hl?eo(s.elements,l.elements,wi):s instanceof nh&&l instanceof nh?wi(s.Ae,l.Ae):s instanceof th&&l instanceof th})(r.transform,e.transform)}class AI{constructor(e,n){this.version=e,this.transformResults=n}}class Gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Th{}function KE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Qm(r.key,Gn.none()):new Wl(r.key,r.data,Gn.none());{const n=r.data,s=pn.empty();let l=new Vt(Yt.comparator);for(let c of e.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new ts(r.key,s,new In(l.toArray()),Gn.none())}}function bI(r,e,n){r instanceof Wl?(function(l,c,d){const p=l.value.clone(),g=Lv(l.fieldTransforms,c,d.transformResults);p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,n):r instanceof ts?(function(l,c,d){if(!zc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=Lv(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(YE(l)),g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Ml(r,e,n,s){return r instanceof Wl?(function(c,d,p,g){if(!zc(c.precondition,d))return p;const y=c.value.clone(),T=jv(c.fieldTransforms,g,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof ts?(function(c,d,p,g){if(!zc(c.precondition,d))return p;const y=jv(c.fieldTransforms,g,d),T=d.data;return T.setAll(YE(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((R=>R.field)))})(r,e,n,s):(function(c,d,p){return zc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,n)}function wI(r,e){let n=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=HE(s.transform,l||null);c!=null&&(n===null&&(n=pn.empty()),n.set(s.field,c))}return n||null}function Uv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&eo(s,l,((c,d)=>TI(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Wl extends Th{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ts extends Th{constructor(e,n,s,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function YE(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function Lv(r,e,n){const s=new Map;Qe(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,p=e.data.field(c.field);s.set(c.field,EI(d,p,n[l]))}return s}function jv(r,e,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,vI(c,d,e))}return s}class Qm extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SI extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&bI(c,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ml(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ml(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=BE();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const g=KE(d,p);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Ae.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,((n,s)=>Uv(n,s)))&&eo(this.baseMutations,e.baseMutations,((n,s)=>Uv(n,s)))}}class Km{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){Qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return mI})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Km(e,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,ze;function xI(r){switch(r){case K.OK:return Ee(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Ee(15467,{code:r})}}function XE(r){if(r===void 0)return nr("GRPC error has no .code"),K.UNKNOWN;switch(r){case St.OK:return K.OK;case St.CANCELLED:return K.CANCELLED;case St.UNKNOWN:return K.UNKNOWN;case St.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case St.INTERNAL:return K.INTERNAL;case St.UNAVAILABLE:return K.UNAVAILABLE;case St.UNAUTHENTICATED:return K.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case St.NOT_FOUND:return K.NOT_FOUND;case St.ALREADY_EXISTS:return K.ALREADY_EXISTS;case St.PERMISSION_DENIED:return K.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case St.ABORTED:return K.ABORTED;case St.OUT_OF_RANGE:return K.OUT_OF_RANGE;case St.UNIMPLEMENTED:return K.UNIMPLEMENTED;case St.DATA_LOSS:return K.DATA_LOSS;default:return Ee(39323,{code:r})}}(ze=St||(St={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=new qr([4294967295,4294967295],0);function zv(r){const e=DI().encode(r),n=new cE;return n.update(e),new Uint8Array(n.digest())}function Bv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new qr([n,s],0),new qr([l,c],0)]}class Ym{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(s<0)throw new Rl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qr.fromNumber(this.ge)}ye(e,n,s){let l=e.add(n.multiply(qr.fromNumber(s)));return l.compare(NI)===1&&(l=new qr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=zv(e),[s,l]=Bv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Ym(c,l,n);return s.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=zv(e),[s,l]=Bv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,s,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,Jl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ah(Ae.min(),l,new ct(ke),ir(),Pe())}}class Jl{constructor(e,n,s,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Jl(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,s,l){this.be=e,this.removedTargetIds=n,this.key=s,this.De=l}}class $E{constructor(e,n){this.targetId=e,this.Ce=n}}class ZE{constructor(e,n,s=Xt.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class qv{constructor(){this.ve=0,this.Fe=Hv(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Ee(38017,{changeType:c})}})),new Jl(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Hv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class OI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.Je=Dc(),this.He=Dc(),this.Ye=new ct(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,s=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(fm(c))if(s===0){const d=new me(c.path);this.et(n,d,tn.newNoDocument(d,Ae.min()))}else Qe(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=Kr(s).toUint8Array()}catch(g){if(g instanceof AE)return Ja("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Ym(d,l,c)}catch(g){return Ja(g instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&fm(p.target)){const g=new me(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,tn.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Pe();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Ah(e,n,this.Ye,this.je,s);return this.je=ir(),this.Je=Dc(),this.He=Dc(),this.Ye=new ct(ke),l}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new qv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Vt(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Vt(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Dc(){return new ct(me.comparator)}function Hv(){return new ct(me.comparator)}const MI={asc:"ASCENDING",desc:"DESCENDING"},VI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kI={and:"AND",or:"OR"};class PI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pm(r,e){return r.useProto3Json||ph(e)?e:{value:e}}function ih(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function UI(r,e){return ih(r,e.toTimestamp())}function Ti(r){return Qe(!!r,49232),Ae.fromTimestamp((function(n){const s=Qr(n);return new st(s.seconds,s.nanos)})(r))}function Xm(r,e){return gm(r,e).canonicalString()}function gm(r,e){const n=(function(l){return new it(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?n:n.child(e)}function JE(r){const e=it.fromString(r);return Qe(rT(e),10190,{key:e.toString()}),e}function ym(r,e){return Xm(r.databaseId,e.path)}function Fd(r,e){const n=JE(e);if(n.get(1)!==r.databaseId.projectId)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new se(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new me(tT(n))}function eT(r,e){return Xm(r.databaseId,e)}function LI(r){const e=JE(r);return e.length===4?it.emptyPath():tT(e)}function _m(r){return new it(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function tT(r){return Qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Gv(r,e,n){return{name:ym(r,e),fields:n.value.mapValue.fields}}function jI(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Qe(T===void 0||typeof T=="string",58123),Xt.fromBase64String(T||"")):(Qe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Xt.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const T=y.code===void 0?K.UNKNOWN:XE(y.code);return new se(T,y.message||"")})(d);n=new ZE(s,l,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=Fd(r,s.document.name),c=Ti(s.document.updateTime),d=s.document.createTime?Ti(s.document.createTime):Ae.min(),p=new pn({mapValue:{fields:s.document.fields}}),g=tn.newFoundDocument(l,c,d,p),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Bc(y,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=Fd(r,s.document),c=s.readTime?Ti(s.readTime):Ae.min(),d=tn.newNoDocument(l,c),p=s.removedTargetIds||[];n=new Bc([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=Fd(r,s.document),c=s.removedTargetIds||[];n=new Bc([],c,l,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new CI(l,c),p=s.targetId;n=new $E(p,d)}}return n}function zI(r,e){let n;if(e instanceof Wl)n={update:Gv(r,e.key,e.value)};else if(e instanceof Qm)n={delete:ym(r,e.key)};else if(e instanceof ts)n={update:Gv(r,e.key,e.data),updateMask:XI(e.fieldMask)};else{if(!(e instanceof SI))return Ee(16599,{Vt:e.type});n={verify:ym(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const p=d.transform;if(p instanceof th)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ql)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Hl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof nh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Ee(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:UI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ee(27497)})(r,e.precondition)),n}function BI(r,e){return r&&r.length>0?(Qe(e!==void 0,14353),r.map((n=>(function(l,c){let d=l.updateTime?Ti(l.updateTime):Ti(c);return d.isEqual(Ae.min())&&(d=Ti(c)),new AI(d,l.transformResults||[])})(n,e)))):[]}function qI(r,e){return{documents:[eT(r,e.path)]}}function HI(r,e){const n={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=eT(r,l);const c=(function(y){if(y.length!==0)return iT(ei.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(x){return{field:Ga(x.field),direction:QI(x.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=pm(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function GI(r){let e=LI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Qe(s===1,65062);const T=n.from[0];T.allDescendants?l=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(R){const x=nT(R);return x instanceof ei&&OE(x)?x.getFilters():[x]})(n.where));let d=[];n.orderBy&&(d=(function(R){return R.map((x=>(function(Y){return new Bl(Fa(Y.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(x)))})(n.orderBy));let p=null;n.limit&&(p=(function(R){let x;return x=typeof R=="object"?R.value:R,ph(x)?null:x})(n.limit));let g=null;n.startAt&&(g=(function(R){const x=!!R.before,q=R.values||[];return new eh(q,x)})(n.startAt));let y=null;return n.endAt&&(y=(function(R){const x=!R.before,q=R.values||[];return new eh(q,x)})(n.endAt)),uI(e,l,d,c,p,"F",g,y)}function FI(r,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nT(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Fa(n.unaryFilter.field);return Rt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Fa(n.unaryFilter.field);return Rt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Fa(n.unaryFilter.field);return Rt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Fa(n.unaryFilter.field);return Rt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Rt.create(Fa(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return ei.create(n.compositeFilter.filters.map((s=>nT(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(n.compositeFilter.op))})(r):Ee(30097,{filter:r})}function QI(r){return MI[r]}function KI(r){return VI[r]}function YI(r){return kI[r]}function Ga(r){return{fieldPath:r.canonicalString()}}function Fa(r){return Yt.fromServerFormat(r.fieldPath)}function iT(r){return r instanceof Rt?(function(n){if(n.op==="=="){if(Nv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NAN"}};if(Dv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NAN"}};if(Dv(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(n.field),op:KI(n.op),value:n.value}}})(r):r instanceof ei?(function(n){const s=n.getFilters().map((l=>iT(l)));return s.length===1?s[0]:{compositeFilter:{op:YI(n.op),filters:s}}})(r):Ee(54877,{filter:r})}function XI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function rT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,s,l,c=Ae.min(),d=Ae.min(),p=Xt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.yt=e}}function ZI(r){const e=GI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?mm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.Cn=new JI}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Fr.min())}updateCollectionGroup(e,n,s){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class JI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new Vt(it.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Vt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sT=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(sT,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new io(0)}static cr(){return new io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="LruGarbageCollector",e2=1048576;function Kv([r,e],[n,s]){const l=ke(r,n);return l===0?ke(e,s):l}class t2{constructor(e){this.Ir=e,this.buffer=new Vt(Kv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Kv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class n2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(Qv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){co(n)?ae(Qv,"Ignoring IndexedDB error during garbage collection: ",n):await uo(n)}await this.Vr(3e5)}))}}class i2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return $.resolve(mh.ce);const s=new t2(n);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Fv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,l,c,d,p,g,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),l=this.params.maximumSequenceNumbersToCollect):l=R,d=Date.now(),this.nthSequenceNumber(e,l)))).next((R=>(s=R,p=Date.now(),this.removeTargets(e,s,n)))).next((R=>(c=R,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((R=>(y=Date.now(),qa()<=Ve.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${R} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:R}))))}}function r2(r,e){return new i2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.changes=new Ks((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(s!==null&&Ml(s.mutation,l,In.empty(),st.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const l=Us();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,s).next((c=>{let d=Sl();return c.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=Us();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const l=[];return s.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,s,l){let c=ir();const d=Ol(),p=(function(){return Ol()})();return n.forEach(((g,y)=>{const T=s.get(y.key);l.has(y.key)&&(T===void 0||T.mutation instanceof ts)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),Ml(T.mutation,y,T.mutation.getFieldMask(),st.now())):d.set(y.key,In.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>p.set(y,new a2(T,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=Ol();let l=new ct(((d,p)=>d-p)),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||In.empty();T=p.applyToLocalView(y,T),s.set(g,T);const R=(l.get(p.batchId)||Pe()).add(g);l=l.insert(p.batchId,R)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,T=g.value,R=BE();T.forEach((x=>{if(!c.has(x)){const q=KE(n.get(x),s.get(x));q!==null&&R.set(x,q),c=c.add(x)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,R))}return $.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,l){return(function(d){return me.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,l):this.getDocumentsMatchingCollectionQuery(e,n,s,l)}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-c.size):$.resolve(Us());let p=Ul,g=c;return d.next((y=>$.forEach(y,((T,R)=>(p<R.largestBatchId&&(p=R.largestBatchId),c.get(T)?$.resolve():this.remoteDocumentCache.getEntry(e,T).next((x=>{g=g.insert(T,x)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Pe()))).next((T=>({batchId:p,changes:zE(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next((s=>{let l=Sl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,l){const c=n.collectionGroup;let d=Sl();return this.indexManager.getCollectionParents(e,c).next((p=>$.forEach(p,(g=>{const y=(function(R,x){return new ho(x,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,l).next((T=>{T.forEach(((R,x)=>{d=d.insert(R,x)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,l)))).next((d=>{c.forEach(((g,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,tn.newInvalidDocument(T)))}));let p=Sl();return d.forEach(((g,y)=>{const T=c.get(g);T!==void 0&&Ml(T.mutation,y,In.empty(),st.now()),vh(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Ti(l.createTime)}})(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:ZI(l.bundledQuery),readTime:Ti(l.readTime)}})(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.overlays=new ct(me.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Us();return $.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((l,c)=>{this.St(e,n,c)})),$.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(e,n,s){const l=Us(),c=n.length+1,d=new me(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return $.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let c=new ct(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=c.get(y.largestBatchId);T===null&&(T=Us(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const p=Us(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,T)=>p.set(y,T))),!(p.size()>=l)););return $.resolve(p)}St(e,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new II(n,s));let c=this.qr.get(n);c===void 0&&(c=Pe(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.Qr=new Vt(Bt.$r),this.Ur=new Vt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Bt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Bt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new me(new it([])),s=new Bt(n,e),l=new Bt(n,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new it([])),s=new Bt(n,e),l=new Bt(n,e+1);let c=Pe();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Bt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(Bt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new RI(c,n,s,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new Bt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return $.resolve(d)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=this.ei(s),c=l<0?0:l;return $.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?zm:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Bt(n,0),l=new Bt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),$.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Vt(ke);return n.forEach((l=>{const c=new Bt(l,0),d=new Bt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{s=s.add(p.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let c=s;me.isDocumentKey(c)||(c=c.child(""));const d=new Bt(new me(c),0);let p=new Vt(ke);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Yr)),!0)}),d),$.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(n.mutations,(l=>{const c=new Bt(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Bt(n,0),l=this.Zr.firstAfterOrEqual(s);return $.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.ri=e,this.docs=(function(){return new ct(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let s=ir();return n.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():tn.newInvalidDocument(l))})),$.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let c=ir();const d=n.path,p=new me(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||BR(zR(T),s)<=0||(l.has(T.key)||vh(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return $.resolve(c)}getAllFromCollectionGroup(e,n,s,l){Ee(9500)}ii(e,n){return $.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new d2(this)}getSize(e){return $.resolve(this.size)}}class d2 extends s2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.persistence=e,this.si=new Ks((n=>Hm(n)),Gm),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new $m,this.targetCount=0,this.ai=io.ur()}forEachTarget(e,n){return this.si.forEach(((s,l)=>n(l))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new io(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,s){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),$.waitFor(c).next((()=>l))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return $.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),$.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),$.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return $.resolve(s)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.ui={},this.overlays={},this.ci=new mh(0),this.li=!1,this.li=!0,this.hi=new c2,this.referenceDelegate=e(this),this.Pi=new m2(this),this.indexManager=new WI,this.remoteDocumentCache=(function(l){return new f2(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new $I(n),this.Ii=new l2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new u2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new h2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ae("MemoryPersistence","Starting transaction:",e);const l=new p2(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class p2 extends HR{constructor(e){super(),this.currentSequenceNumber=e}}class Zm{constructor(e){this.persistence=e,this.Ri=new $m,this.Vi=null}static mi(e){return new Zm(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),$.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const l=me.fromPath(s);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Ae.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class rh{constructor(e,n){this.persistence=e,this.pi=new Ks((s=>QR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=r2(this,n)}static mi(e,n){return new rh(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((l=>s+l))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return $.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?$.resolve():n(l)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,n).next((p=>{p||(s++,c.removeEntry(d,Ae.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Lc(e.data.value)),n}br(e,n,s){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return $.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=l}static As(e,n){let s=Pe(),l=Pe();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Wm(e,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KA()?8:GR(nn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,l){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new g2;return this.Ss(e,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>c.result))}bs(e,n,s,l){return s.documentReadCount<this.fs?(qa()<=Ve.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Ha(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(qa()<=Ve.DEBUG&&ae("QueryEngine","Query:",Ha(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(qa()<=Ve.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Ha(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(n))):$.resolve())}ys(e,n){if(kv(n))return $.resolve(null);let s=Ei(n);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=mm(n,null,"F"),s=Ei(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Pe(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,d,g.readTime)?this.ys(e,mm(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,s,l){return kv(n)||l.isEqual(Ae.min())?$.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,l)?$.resolve(null):(qa()<=Ve.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ha(n)),this.vs(e,d,n,jR(l,Ul)).next((p=>p)))}))}Ds(e,n){let s=new Vt(LE(e));return n.forEach(((l,c)=>{vh(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,l){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,s){return qa()<=Ve.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Ha(n)),this.ps.getDocumentsMatchingQuery(e,n,Fr.min(),s)}vs(e,n,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",_2=3e8;class v2{constructor(e,n,s,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new ct(ke),this.xs=new Ks((c=>Hm(c)),Gm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function E2(r,e,n,s){return new v2(r,e,n,s)}async function oT(r,e){const n=be(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],p=[];let g=Pe();for(const y of l){d.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of c){p.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function T2(r,e){const n=be(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,T){const R=y.batch,x=R.keys();let q=$.resolve();return x.forEach((Y=>{q=q.next((()=>T.getEntry(g,Y))).next((te=>{const W=y.docVersions.get(Y);Qe(W!==null,48541),te.version.compareTo(W)<0&&(R.applyToRemoteDocument(te,y),te.isValidDocument()&&(te.setReadTime(y.commitVersion),T.addEntry(te)))}))})),q.next((()=>p.mutationQueue.removeMutationBatch(g,R)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Pe();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function lT(r){const e=be(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function A2(r,e){const n=be(r),s=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((T,R)=>{const x=l.get(R);if(!x)return;p.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,R).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,R))));let q=x.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(R)!==null?q=q.withResumeToken(Xt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):T.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(T.resumeToken,s)),l=l.insert(R,q),(function(te,W,ue){return te.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=_2?!0:ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0})(x,q,T)&&p.push(n.Pi.updateTargetData(c,q))}));let g=ir(),y=Pe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(b2(c,d,e.documentUpdates).next((T=>{g=T.ks,y=T.qs}))),!s.isEqual(Ae.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((R=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(T)}return $.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=l,c)))}function b2(r,e,n){let s=Pe(),l=Pe();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=ir();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):ae(Jm,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function w2(r,e){const n=be(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=zm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function S2(r,e){const n=be(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,e).next((c=>c?(l=c,$.resolve(l)):n.Pi.allocateTargetId(s).next((d=>(l=new Lr(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function vm(r,e,n){const s=be(r),l=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!co(d))throw d;ae(Jm,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function Yv(r,e,n){const s=be(r);let l=Ae.min(),c=Pe();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,T){const R=be(g),x=R.xs.get(T);return x!==void 0?$.resolve(R.Ms.get(x)):R.Pi.getTargetData(y,T)})(s,d,Ei(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?l:Ae.min(),n?c:Pe()))).next((p=>(R2(s,hI(e),p),{documents:p,Qs:c})))))}function R2(r,e,n){let s=r.Os.get(e)||Ae.min();n.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class Xv{constructor(){this.activeTargetIds=yI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I2{constructor(){this.Mo=new Xv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="ConnectivityMonitor";class Zv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae($v,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae($v,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc=null;function Em(){return Nc===null?Nc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nc++,"0x"+Nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="RestConnection",x2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Wc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,n,s,l,c){const d=Em(),p=this.zo(e,n.toUriEncodedString());ae(Qd,`Sending RPC '${e}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:y}=new URL(p),T=so(y);return this.Jo(e,p,g,s,T).then((R=>(ae(Qd,`Received RPC '${e}' ${d}: `,R),R)),(R=>{throw Ja(Qd,`RPC '${e}' ${d} failed with error: `,R,"url: ",p,"request:",s),R}))}Ho(e,n,s,l,c,d){return this.Go(e,n,s,l,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+lo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const s=x2[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class O2 extends D2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,l,c){const d=Em();return new Promise(((p,g)=>{const y=new hE;y.setWithCredentials(!0),y.listenOnce(fE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Uc.NO_ERROR:const R=y.getResponseJson();ae(Jt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(R)),p(R);break;case Uc.TIMEOUT:ae(Jt,`RPC '${e}' ${d} timed out`),g(new se(K.DEADLINE_EXCEEDED,"Request time out"));break;case Uc.HTTP_ERROR:const x=y.getStatus();if(ae(Jt,`RPC '${e}' ${d} failed with status:`,x,"response text:",y.getResponseText()),x>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const Y=q?.error;if(Y&&Y.status&&Y.message){const te=(function(ue){const le=ue.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(le)>=0?le:K.UNKNOWN})(Y.status);g(new se(te,Y.message))}else g(new se(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new se(K.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ae(Jt,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(l);ae(Jt,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",T,s,15)}))}T_(e,n,s){const l=Em(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=pE(),p=mE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=c.join("");ae(Jt,`Creating RPC '${e}' stream ${l}: ${T}`,g);const R=d.createWebChannel(T,g);this.I_(R);let x=!1,q=!1;const Y=new N2({Yo:W=>{q?ae(Jt,`Not sending because RPC '${e}' stream ${l} is closed:`,W):(x||(ae(Jt,`Opening RPC '${e}' stream ${l} transport.`),R.open(),x=!0),ae(Jt,`RPC '${e}' stream ${l} sending:`,W),R.send(W))},Zo:()=>R.close()}),te=(W,ue,le)=>{W.listen(ue,(J=>{try{le(J)}catch(de){setTimeout((()=>{throw de}),0)}}))};return te(R,wl.EventType.OPEN,(()=>{q||(ae(Jt,`RPC '${e}' stream ${l} transport opened.`),Y.o_())})),te(R,wl.EventType.CLOSE,(()=>{q||(q=!0,ae(Jt,`RPC '${e}' stream ${l} transport closed`),Y.a_(),this.E_(R))})),te(R,wl.EventType.ERROR,(W=>{q||(q=!0,Ja(Jt,`RPC '${e}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),Y.a_(new se(K.UNAVAILABLE,"The operation could not be completed")))})),te(R,wl.EventType.MESSAGE,(W=>{if(!q){const ue=W.data[0];Qe(!!ue,16349);const le=ue,J=le?.error||le[0]?.error;if(J){ae(Jt,`RPC '${e}' stream ${l} received error:`,J);const de=J.status;let pe=(function(w){const I=St[w];if(I!==void 0)return XE(I)})(de),we=J.message;pe===void 0&&(pe=K.INTERNAL,we="Unknown error status: "+de+" with message "+J.message),q=!0,Y.a_(new se(pe,we)),R.close()}else ae(Jt,`RPC '${e}' stream ${l} received:`,ue),Y.u_(ue)}})),te(p,dE.STAT_EVENT,(W=>{W.stat===om.PROXY?ae(Jt,`RPC '${e}' stream ${l} detected buffering proxy`):W.stat===om.NOPROXY&&ae(Jt,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Y.__()}),0),Y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Kd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(r){return new PI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&ae("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="PersistentStream";class cT{constructor(e,n,s,l,c,d,p,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(nr(n.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{e((()=>{const l=new se(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ae(Wv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ae(Wv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class M2 extends cT{constructor(e,n,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=jI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ae.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ae.min():d.readTime?Ti(d.readTime):Ae.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=_m(this.serializer),n.addTarget=(function(c,d){let p;const g=d.target;if(p=fm(g)?{documents:qI(c,g)}:{query:HI(c,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=WE(c,d.resumeToken);const y=pm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ae.min())>0){p.readTime=ih(c,d.snapshotVersion.toTimestamp());const y=pm(c,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=FI(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=_m(this.serializer),n.removeTarget=e,this.q_(n)}}class V2 extends cT{constructor(e,n,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=BI(e.writeResults,e.commitTime),s=Ti(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=_m(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>zI(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{}class P2 extends k2{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,gm(n,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(K.UNKNOWN,c.toString())}))}Ho(e,n,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,gm(n,s),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new se(K.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class U2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nr(n),this.aa=!1):ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="RemoteStore";class L2{constructor(e,n,s,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Ys(this)&&(ae(Fs,"Restarting streams for network reachability change."),await(async function(g){const y=be(g);y.Ea.add(4),await eu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await wh(y)})(this))}))})),this.Ra=new U2(s,l)}}async function wh(r){if(Ys(r))for(const e of r.da)await e(!0)}async function eu(r){for(const e of r.da)await e(!1)}function hT(r,e){const n=be(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ip(n)?np(n):fo(n).O_()&&tp(n,e))}function ep(r,e){const n=be(r),s=fo(n);n.Ia.delete(e),s.O_()&&fT(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ys(n)&&n.Ra.set("Unknown"))}function tp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fo(r).Y_(e)}function fT(r,e){r.Va.Ue(e),fo(r).Z_(e)}function np(r){r.Va=new OI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),fo(r).start(),r.Ra.ua()}function ip(r){return Ys(r)&&!fo(r).x_()&&r.Ia.size>0}function Ys(r){return be(r).Ea.size===0}function dT(r){r.Va=void 0}async function j2(r){r.Ra.set("Online")}async function z2(r){r.Ia.forEach(((e,n)=>{tp(r,e)}))}async function B2(r,e){dT(r),ip(r)?(r.Ra.ha(e),np(r)):r.Ra.set("Unknown")}async function q2(r,e,n){if(r.Ra.set("Online"),e instanceof ZE&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(r,e)}catch(s){ae(Fs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await sh(r,s)}else if(e instanceof Bc?r.Va.Ze(e):e instanceof $E?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ae.min()))try{const s=await lT(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(Xt.EMPTY_BYTE_STRING,T.snapshotVersion)),fT(c,g);const R=new Lr(T.target,g,y,T.sequenceNumber);tp(c,R)})),c.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){ae(Fs,"Failed to raise snapshot:",s),await sh(r,s)}}async function sh(r,e,n){if(!co(e))throw e;r.Ea.add(1),await eu(r),r.Ra.set("Offline"),n||(n=()=>lT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ae(Fs,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await wh(r)}))}function mT(r,e){return e().catch((n=>sh(r,n,e)))}async function Sh(r){const e=be(r),n=Xr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zm;for(;H2(e);)try{const l=await w2(e.localStore,s);if(l===null){e.Ta.length===0&&n.L_();break}s=l.batchId,G2(e,l)}catch(l){await sh(e,l)}pT(e)&&gT(e)}function H2(r){return Ys(r)&&r.Ta.length<10}function G2(r,e){r.Ta.push(e);const n=Xr(r);n.O_()&&n.X_&&n.ea(e.mutations)}function pT(r){return Ys(r)&&!Xr(r).x_()&&r.Ta.length>0}function gT(r){Xr(r).start()}async function F2(r){Xr(r).ra()}async function Q2(r){const e=Xr(r);for(const n of r.Ta)e.ea(n.mutations)}async function K2(r,e,n){const s=r.Ta.shift(),l=Km.from(s,e,n);await mT(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Sh(r)}async function Y2(r,e){e&&Xr(r).X_&&await(async function(s,l){if((function(d){return xI(d)&&d!==K.ABORTED})(l.code)){const c=s.Ta.shift();Xr(s).B_(),await mT(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Sh(s)}})(r,e),pT(r)&&gT(r)}async function Jv(r,e){const n=be(r);n.asyncQueue.verifyOperationInProgress(),ae(Fs,"RemoteStore received new credentials");const s=Ys(n);n.Ea.add(3),await eu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wh(n)}async function X2(r,e){const n=be(r);e?(n.Ea.delete(2),await wh(n)):e||(n.Ea.add(2),await eu(n),n.Ra.set("Unknown"))}function fo(r){return r.ma||(r.ma=(function(n,s,l){const c=be(n);return c.sa(),new M2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:j2.bind(null,r),t_:z2.bind(null,r),r_:B2.bind(null,r),H_:q2.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),ip(r)?np(r):r.Ra.set("Unknown")):(await r.ma.stop(),dT(r))}))),r.ma}function Xr(r){return r.fa||(r.fa=(function(n,s,l){const c=be(n);return c.sa(),new V2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:F2.bind(null,r),r_:Y2.bind(null,r),ta:Q2.bind(null,r),na:K2.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Sh(r)):(await r.fa.stop(),r.Ta.length>0&&(ae(Fs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,s,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,l,c){const d=Date.now()+s,p=new rp(e,n,d,l,c);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sp(r,e){if(nr("AsyncQueue",`${e}: ${r}`),co(r))return new se(K.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{static emptySet(e){return new $a(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||me.comparator(n.key,s.key):(n,s)=>me.comparator(n.key,s.key),this.keyedMap=Sl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $a)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new $a;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){this.ga=new ct(me.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class ro{constructor(e,n,s,l,c,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new ro(e,n,$a.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Z2{constructor(){this.queries=t0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=be(n),c=l.queries;l.queries=t0(),c.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new se(K.ABORTED,"Firestore shutting down"))}}function t0(){return new Ks((r=>UE(r)),_h)}async function yT(r,e){const n=be(r);let s=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new $2,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=sp(d,`Initialization of query '${Ha(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&ap(n)}async function _T(r,e){const n=be(r),s=e.query;let l=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function W2(r,e){const n=be(r);let s=!1;for(const l of e){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(s=!0);d.wa=l}}s&&ap(n)}function J2(r,e,n){const s=be(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);s.queries.delete(e)}function ap(r){r.Ca.forEach((e=>{e.next()}))}var Tm,n0;(n0=Tm||(Tm={})).Ma="default",n0.Cache="cache";class vT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new ro(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.key=e}}class TT{constructor(e){this.key=e}}class eC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=LE(e),this.tu=new $a(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new e0,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((T,R)=>{const x=l.get(T),q=vh(this.query,R)?R:null,Y=!!x&&this.mutatedKeys.has(x.key),te=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let W=!1;x&&q?x.data.isEqual(q.data)?Y!==te&&(s.track({type:3,doc:q}),W=!0):this.su(x,q)||(s.track({type:2,doc:q}),W=!0,(g&&this.eu(q,g)>0||y&&this.eu(q,y)<0)&&(p=!0)):!x&&q?(s.track({type:0,doc:q}),W=!0):x&&!q&&(s.track({type:1,doc:x}),W=!0,(g||y)&&(p=!0)),W&&(q?(d=d.add(q),c=te?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,R)=>(function(q,Y){const te=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:W})}};return te(q)-te(Y)})(T.type,R.type)||this.eu(T.doc,R.doc))),this.ou(s),l=l??!1;const p=n&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new ro(this.query,e.tu,c,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new e0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new TT(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new ET(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const op="SyncEngine";class tC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class nC{constructor(e){this.key=e,this.hu=!1}}class iC{constructor(e,n,s,l,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ks((p=>UE(p)),_h),this.Iu=new Map,this.Eu=new Set,this.du=new ct(me.comparator),this.Au=new Map,this.Ru=new $m,this.Vu={},this.mu=new Map,this.fu=io.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rC(r,e,n=!0){const s=IT(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await AT(s,e,n,!0),l}async function sC(r,e){const n=IT(r);await AT(n,e,!0,!1)}async function AT(r,e,n,s){const l=await S2(r.localStore,Ei(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let p;return s&&(p=await aC(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&hT(r.remoteStore,l),p}async function aC(r,e,n,s,l){r.pu=(R,x,q)=>(async function(te,W,ue,le){let J=W.view.ru(ue);J.Cs&&(J=await Yv(te.localStore,W.query,!1).then((({documents:M})=>W.view.ru(M,J))));const de=le&&le.targetChanges.get(W.targetId),pe=le&&le.targetMismatches.get(W.targetId)!=null,we=W.view.applyChanges(J,te.isPrimaryClient,de,pe);return r0(te,W.targetId,we.au),we.snapshot})(r,R,x,q);const c=await Yv(r.localStore,e,!0),d=new eC(e,c.Qs),p=d.ru(c.documents),g=Jl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),y=d.applyChanges(p,r.isPrimaryClient,g);r0(r,n,y.au);const T=new tC(e,n,d);return r.Tu.set(e,T),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function oC(r,e,n){const s=be(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!_h(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await vm(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&ep(s.remoteStore,l.targetId),Am(s,l.targetId)})).catch(uo)):(Am(s,l.targetId),await vm(s.localStore,l.targetId,!0))}async function lC(r,e){const n=be(r),s=n.Tu.get(e),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),ep(n.remoteStore,s.targetId))}async function uC(r,e,n){const s=gC(r);try{const l=await(function(d,p){const g=be(d),y=st.now(),T=p.reduce(((q,Y)=>q.add(Y.key)),Pe());let R,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let Y=ir(),te=Pe();return g.Ns.getEntries(q,T).next((W=>{Y=W,Y.forEach(((ue,le)=>{le.isValidDocument()||(te=te.add(ue))}))})).next((()=>g.localDocuments.getOverlayedDocuments(q,Y))).next((W=>{R=W;const ue=[];for(const le of p){const J=wI(le,R.get(le.key).overlayedDocument);J!=null&&ue.push(new ts(le.key,J,xE(J.value.mapValue),Gn.exists(!0)))}return g.mutationQueue.addMutationBatch(q,y,ue,p)})).next((W=>{x=W;const ue=W.applyToLocalDocumentSet(R,te);return g.documentOverlayCache.saveOverlays(q,W.batchId,ue)}))})).then((()=>({batchId:x.batchId,changes:zE(R)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new ct(ke)),y=y.insert(p,g),d.Vu[d.currentUser.toKey()]=y})(s,l.batchId,n),await tu(s,l.changes),await Sh(s.remoteStore)}catch(l){const c=sp(l,"Failed to persist write");n.reject(c)}}async function bT(r,e){const n=be(r);try{const s=await A2(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(Qe(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Qe(d.hu,14607):l.removedDocuments.size>0&&(Qe(d.hu,42227),d.hu=!1))})),await tu(n,s,e)}catch(s){await uo(s)}}function i0(r,e,n){const s=be(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=be(d);g.onlineState=p;let y=!1;g.queries.forEach(((T,R)=>{for(const x of R.Sa)x.va(p)&&(y=!0)})),y&&ap(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function cC(r,e,n){const s=be(r);s.sharedClientState.updateQueryState(e,"rejected",n);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new ct(me.comparator);d=d.insert(c,tn.newNoDocument(c,Ae.min()));const p=Pe().add(c),g=new Ah(Ae.min(),new Map,new ct(ke),d,p);await bT(s,g),s.du=s.du.remove(c),s.Au.delete(e),lp(s)}else await vm(s.localStore,e,!1).then((()=>Am(s,e,n))).catch(uo)}async function hC(r,e){const n=be(r),s=e.batch.batchId;try{const l=await T2(n.localStore,e);ST(n,s,null),wT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await tu(n,l)}catch(l){await uo(l)}}async function fC(r,e,n){const s=be(r);try{const l=await(function(d,p){const g=be(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return g.mutationQueue.lookupMutationBatch(y,p).next((R=>(Qe(R!==null,37113),T=R.keys(),g.mutationQueue.removeMutationBatch(y,R)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>g.localDocuments.getDocuments(y,T)))}))})(s.localStore,e);ST(s,e,n),wT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await tu(s,l)}catch(l){await uo(l)}}function wT(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function ST(r,e,n){const s=be(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function Am(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||RT(r,s)}))}function RT(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(ep(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),lp(r))}function r0(r,e,n){for(const s of n)s instanceof ET?(r.Ru.addReference(s.key,e),dC(r,s)):s instanceof TT?(ae(op,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||RT(r,s.key)):Ee(19791,{wu:s})}function dC(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ae(op,"New document in limbo: "+n),r.Eu.add(s),lp(r))}function lp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new me(it.fromString(e)),s=r.fu.next();r.Au.set(s,new nC(n)),r.du=r.du.insert(n,s),hT(r.remoteStore,new Lr(Ei(yh(n.path)),s,"TargetPurposeLimboResolution",mh.ce))}}async function tu(r,e,n){const s=be(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){l.push(y);const T=Wm.As(g.targetId,y);c.push(T)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,y){const T=be(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>$.forEach(y,(x=>$.forEach(x.Es,(q=>T.persistence.referenceDelegate.addReference(R,x.targetId,q))).next((()=>$.forEach(x.ds,(q=>T.persistence.referenceDelegate.removeReference(R,x.targetId,q)))))))))}catch(R){if(!co(R))throw R;ae(Jm,"Failed to update sequence numbers: "+R)}for(const R of y){const x=R.targetId;if(!R.fromCache){const q=T.Ms.get(x),Y=q.snapshotVersion,te=q.withLastLimboFreeSnapshotVersion(Y);T.Ms=T.Ms.insert(x,te)}}})(s.localStore,c))}async function mC(r,e){const n=be(r);if(!n.currentUser.isEqual(e)){ae(op,"User change. New user:",e.toKey());const s=await oT(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new se(K.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await tu(n,s.Ls)}}function pC(r,e){const n=be(r),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let l=Pe();const c=n.Iu.get(e);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function IT(r){const e=be(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=bT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cC.bind(null,e),e.Pu.H_=W2.bind(null,e.eventManager),e.Pu.yu=J2.bind(null,e.eventManager),e}function gC(r){const e=be(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fC.bind(null,e),e}class ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return E2(this.persistence,new y2,e.initialUser,this.serializer)}Cu(e){return new aT(Zm.mi,this.serializer)}Du(e){return new I2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ah.provider={build:()=>new ah};class yC extends ah{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof rh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new n2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new aT((s=>rh.mi(s,n)),this.serializer)}}class bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>i0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=mC.bind(null,this.syncEngine),await X2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Z2})()}createDatastore(e){const n=bh(e.databaseInfo.databaseId),s=(function(c){return new O2(c)})(e.databaseInfo);return(function(c,d,p,g){return new P2(c,d,p,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,l,c,d,p){return new L2(s,l,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>i0(this.syncEngine,n,0)),(function(){return Zv.v()?new Zv:new C2})())}createSyncEngine(e,n){return(function(l,c,d,p,g,y,T){const R=new iC(l,c,d,p,g,y);return T&&(R.gu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=be(n);ae(Fs,"RemoteStore shutting down."),s.Ea.add(5),await eu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bm.provider={build:()=>new bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class _C{constructor(e,n,s,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=en.UNAUTHENTICATED,this.clientId=jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{ae($r,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(ae($r,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=sp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Yd(r,e){r.asyncQueue.verifyOperationInProgress(),ae($r,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await oT(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function s0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await vC(r);ae($r,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>Jv(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>Jv(e.remoteStore,l))),r._onlineComponents=e}async function vC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ae($r,"Using user provided OfflineComponentProvider");try{await Yd(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===K.FAILED_PRECONDITION||l.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Ja("Error using user provided cache. Falling back to memory cache: "+n),await Yd(r,new ah)}}else ae($r,"Using default OfflineComponentProvider"),await Yd(r,new yC(void 0));return r._offlineComponents}async function xT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ae($r,"Using user provided OnlineComponentProvider"),await s0(r,r._uninitializedComponentsProvider._online)):(ae($r,"Using default OnlineComponentProvider"),await s0(r,new bm))),r._onlineComponents}function EC(r){return xT(r).then((e=>e.syncEngine))}async function wm(r){const e=await xT(r),n=e.eventManager;return n.onListen=rC.bind(null,e.syncEngine),n.onUnlisten=oC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lC.bind(null,e.syncEngine),n}function TC(r,e,n={}){const s=new Hr;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,g,y){const T=new CT({next:x=>{T.Nu(),d.enqueueAndForget((()=>_T(c,R)));const q=x.docs.has(p);!q&&x.fromCache?y.reject(new se(K.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&x.fromCache&&g&&g.source==="server"?y.reject(new se(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),R=new vT(yh(p.path),T,{includeMetadataChanges:!0,qa:!0});return yT(c,R)})(await wm(r),r.asyncQueue,e,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="firestore.googleapis.com",o0=!0;class l0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=NT,this.ssl=o0}else this.host=e.host,this.ssl=e.ssl??o0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<e2)throw new se(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rh{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new CR;switch(s.type){case"firstParty":return new OR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=a0.get(n);s&&(ae("ComponentProvider","Removing Datastore"),a0.delete(n),s.terminate())})(this),Promise.resolve()}}function AC(r,e,n,s={}){r=Hn(r,Rh);const l=so(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;l&&(A0(`https://${p}`),b0("Firestore",!0)),c.host!==NT&&c.host!==p&&Ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:s};if(!zs(g,d)&&(r._setSettings(g),s.mockUserToken)){let y,T;if(typeof s.mockUserToken=="string")y=s.mockUserToken,T=en.MOCK_USER;else{y=LA(s.mockUserToken,r._app?.options.projectId);const R=s.mockUserToken.sub||s.mockUserToken.user_id;if(!R)throw new se(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new en(R)}r._authCredentials=new xR(new yE(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class pt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Zl(n,pt._jsonSchema))return new pt(e,s||null,new me(it.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:It("string",pt._jsonSchemaVersion),referencePath:It("string")};class Gr extends Xs{constructor(e,n,s){super(e,n,yh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new me(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function Ls(r,e,...n){if(r=kt(r),_E("collection","path",e),r instanceof Rh){const s=it.fromString(e,...n);return Tv(s),new Gr(r,null,s)}{if(!(r instanceof pt||r instanceof Gr))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(it.fromString(e,...n));return Tv(s),new Gr(r.firestore,null,s)}}function $i(r,e,...n){if(r=kt(r),arguments.length===1&&(e=jm.newId()),_E("doc","path",e),r instanceof Rh){const s=it.fromString(e,...n);return Ev(s),new pt(r,null,new me(s))}{if(!(r instanceof pt||r instanceof Gr))throw new se(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(it.fromString(e,...n));return Ev(s),new pt(r.firestore,r instanceof Gr?r.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="AsyncQueue";class c0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uT(this,"async_queue_retry"),this._c=()=>{const s=Kd();s&&ae(u0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Kd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Kd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!co(e))throw e;ae(u0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,nr("INTERNAL UNHANDLED ERROR: ",h0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=rp.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ee(47125,{Pc:h0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function h0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Zr extends Rh{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new c0,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c0(e),this._firestoreClient=void 0,await e}}}function bC(r,e){const n=typeof r=="object"?r:I0(),s=typeof r=="string"?r:Wc,l=xm(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=PA("firestore");c&&AC(l,...c)}return l}function up(r){if(r._terminated)throw new se(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||wC(r),r._firestoreClient}function wC(r){const e=r._freezeSettings(),n=(function(l,c,d,p){return new XR(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,DT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new _C(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(Xt.fromBase64String(e))}catch(n){throw new se(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zl(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:It("string",qn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(Zl(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:It("string",Ai._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zl(e,bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new bi(e.vectorValues);throw new se(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bi._jsonSchemaVersion="firestore/vectorValue/1.0",bi._jsonSchema={type:It("string",bi._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=/^__.*__$/;class RC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wl(e,this.data,n,this.fieldTransforms)}}class OT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function MT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:r})}}class hp{constructor(e,n,s,l,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return oh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(MT(this.Ac)&&SC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class IC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||bh(e)}Cc(e,n,s,l=!1){return new hp({Ac:e,methodName:n,Dc:s,path:Yt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ch(r){const e=r._freezeSettings(),n=bh(r._databaseId);return new IC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function VT(r,e,n,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,n,l);fp("Data must be an object, but it was:",d,s);const p=kT(s,d);let g,y;if(c.merge)g=new In(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const R of c.mergeFields){const x=Sm(e,R,n);if(!d.contains(x))throw new se(K.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);UT(T,x)||T.push(x)}g=new In(T),y=d.fieldTransforms.filter((R=>g.covers(R.field)))}else g=null,y=d.fieldTransforms;return new RC(new pn(p),g,y)}class xh extends cp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xh}}function CC(r,e,n,s){const l=r.Cc(1,e,n);fp("Data must be an object, but it was:",l,s);const c=[],d=pn.empty();es(s,((g,y)=>{const T=dp(e,g,n);y=kt(y);const R=l.yc(T);if(y instanceof xh)c.push(T);else{const x=nu(y,R);x!=null&&(c.push(T),d.set(T,x))}}));const p=new In(c);return new OT(d,p,l.fieldTransforms)}function xC(r,e,n,s,l,c){const d=r.Cc(1,e,n),p=[Sm(e,s,n)],g=[l];if(c.length%2!=0)throw new se(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)p.push(Sm(e,c[x])),g.push(c[x+1]);const y=[],T=pn.empty();for(let x=p.length-1;x>=0;--x)if(!UT(y,p[x])){const q=p[x];let Y=g[x];Y=kt(Y);const te=d.yc(q);if(Y instanceof xh)y.push(q);else{const W=nu(Y,te);W!=null&&(y.push(q),T.set(q,W))}}const R=new In(y);return new OT(T,R,d.fieldTransforms)}function DC(r,e,n,s=!1){return nu(n,r.Cc(s?4:3,e))}function nu(r,e){if(PT(r=kt(r)))return fp("Unsupported field value:",e,r),kT(r,e);if(r instanceof cp)return(function(s,l){if(!MT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const p of s){let g=nu(p,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=kt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return _I(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=st.fromDate(s);return{timestampValue:ih(l.serializer,c)}}if(s instanceof st){const c=new st(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ih(l.serializer,c)}}if(s instanceof Ai)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof qn)return{bytesValue:WE(l.serializer,s._byteString)};if(s instanceof pt){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Xm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof bi)return(function(d,p){return{mapValue:{fields:{[IE]:{stringValue:CE},[Jc]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Fm(p.serializer,y)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${dh(s)}`)})(r,e)}function kT(r,e){const n={};return TE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(r,((s,l)=>{const c=nu(l,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function PT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof st||r instanceof Ai||r instanceof qn||r instanceof pt||r instanceof cp||r instanceof bi)}function fp(r,e,n){if(!PT(n)||!vE(n)){const s=dh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Sm(r,e,n){if((e=kt(e))instanceof Ih)return e._internalPath;if(typeof e=="string")return dp(r,e);throw oh("Field path arguments must be of type string or ",r,!1,void 0,n)}const NC=new RegExp("[~\\*/\\[\\]]");function dp(r,e,n){if(e.search(NC)>=0)throw oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Ih(...e.split("."))._internalPath}catch{throw oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function oh(r,e,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new se(K.INVALID_ARGUMENT,p+r+g)}function UT(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,s,l,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OC extends LT{data(){return super.data()}}function mp(r,e){return typeof e=="string"?dp(r,e):e instanceof Ih?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new se(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pp{}class jT extends pp{}function Xd(r,e,...n){let s=[];e instanceof pp&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof yp)).length,p=c.filter((g=>g instanceof gp)).length;if(d>1||d>0&&p>0)throw new se(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class gp extends jT{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new gp(e,n,s)}_apply(e){const n=this._parse(e);return zT(e._query,n),new Xs(e.firestore,e.converter,dm(e._query,n))}_parse(e){const n=Ch(e.firestore);return(function(c,d,p,g,y,T,R){let x;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new se(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){m0(R,T);const Y=[];for(const te of R)Y.push(d0(g,c,te));x={arrayValue:{values:Y}}}else x=d0(g,c,R)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||m0(R,T),x=DC(p,d,R,T==="in"||T==="not-in");return Rt.create(y,T,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class yp extends pp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yp(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let d=l;const p=c.getFlattenedFilters();for(const g of p)zT(d,g),d=dm(d,g)})(e._query,n),new Xs(e.firestore,e.converter,dm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _p extends jT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _p(e,n)}_apply(e){const n=(function(l,c,d){if(l.startAt!==null)throw new se(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new se(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bl(c,d)})(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new ho(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function $d(r,e="asc"){const n=e,s=mp("orderBy",r);return _p._create(s,n)}function d0(r,e,n){if(typeof(n=kt(n))=="string"){if(n==="")throw new se(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PE(e)&&n.indexOf("/")!==-1)throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(it.fromString(n));if(!me.isDocumentKey(s))throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return xv(r,new me(s))}if(n instanceof pt)return xv(r,n._key);throw new se(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dh(n)}.`)}function m0(r,e){if(!Array.isArray(r)||r.length===0)throw new se(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zT(r,e){const n=(function(l,c){for(const d of l)for(const p of d.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new se(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class VC{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return es(e,((l,c)=>{s[l]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[Jc].arrayValue?.values?.map((s=>vt(s.doubleValue)));return new bi(n)}convertGeoPoint(e){return new Ai(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=gh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){const n=Qr(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=it.fromString(e);Qe(rT(s),9688,{name:e});const l=new jl(s.get(1),s.get(3)),c=new me(s.popFirst(5));return l.isEqual(n)||nr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class Il{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class js extends LT{constructor(e,n,s,l,c,d){super(e,n,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(mp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=js._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}js._jsonSchemaVersion="firestore/documentSnapshot/1.0",js._jsonSchema={type:It("string",js._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class qc extends js{data(e={}){return super.data(e)}}class Za{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Il(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new qc(this._firestore,this._userDataWriter,s.key,s,new Il(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new qc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Il(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new qc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Il(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,T=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:kC(p.type),doc:g,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(r){r=Hn(r,pt);const e=Hn(r.firestore,Zr);return TC(up(e),r._key).then((n=>HT(e,r,n)))}Za._jsonSchemaVersion="firestore/querySnapshot/1.0",Za._jsonSchema={type:It("string",Za._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class qT extends VC{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function PC(r,e,n){r=Hn(r,pt);const s=Hn(r.firestore,Zr),l=BT(r.converter,e,n);return Dh(s,[VT(Ch(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Gn.none())])}function UC(r,e,n,...s){r=Hn(r,pt);const l=Hn(r.firestore,Zr),c=Ch(l);let d;return d=typeof(e=kt(e))=="string"||e instanceof Ih?xC(c,"updateDoc",r._key,e,n,s):CC(c,"updateDoc",r._key,e),Dh(l,[d.toMutation(r._key,Gn.exists(!0))])}function Zd(r){return Dh(Hn(r.firestore,Zr),[new Qm(r._key,Gn.none())])}function lh(r,e){const n=Hn(r.firestore,Zr),s=$i(r),l=BT(r.converter,e);return Dh(n,[VT(Ch(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Gn.exists(!1))]).then((()=>s))}function Oc(r,...e){r=kt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||f0(e[s])||(n=e[s++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(f0(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let c,d,p;if(r instanceof pt)d=Hn(r.firestore,Zr),p=yh(r._key.path),c={next:g=>{e[s]&&e[s](HT(d,r,g))},error:e[s+1],complete:e[s+2]};else{const g=Hn(r,Xs);d=Hn(g.firestore,Zr),p=g._query;const y=new qT(d);c={next:T=>{e[s]&&e[s](new Za(d,y,g,T))},error:e[s+1],complete:e[s+2]},MC(r._query)}return(function(y,T,R,x){const q=new CT(x),Y=new vT(T,q,R);return y.asyncQueue.enqueueAndForget((async()=>yT(await wm(y),Y))),()=>{q.Nu(),y.asyncQueue.enqueueAndForget((async()=>_T(await wm(y),Y)))}})(up(d),p,l,c)}function Dh(r,e){return(function(s,l){const c=new Hr;return s.asyncQueue.enqueueAndForget((async()=>uC(await EC(s),l,c))),c.promise})(up(r),e)}function HT(r,e,n){const s=n.docs.get(e._key),l=new qT(r);return new js(r,l,e._key,s,new Il(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(l){lo=l})(ao),Wa(new Bs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),p=new Zr(new DR(s.getProvider("auth-internal")),new MR(d,s.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new se(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(y.options.projectId,T)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Br(gv,yv,e),Br(gv,yv,"esm2020")})();const LC={apiKey:"AIzaSyCnQevJTgS4Hk-sr8EiK3fOLPxmrKT5F90",authDomain:"chatbot-2086b.firebaseapp.com",projectId:"chatbot-2086b",storageBucket:"chatbot-2086b.appspot.com",messagingSenderId:"102147147231",appId:"1:102147147231:web:3e06c1f6945913c7dbb06a"},GT="AIzaSyCu3l1SyGm_gIc8i96Kw2RfawVU4DFxB3A",FT=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${GT}`,jC=`https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${GT}`,QT=R0(LC),Gl=RR(QT),un=bC(QT),zC=()=>b.jsx("style",{children:`
        :root {
            --background-color: #0d0c0f; --surface-color: #1a1a1d; --primary-color: #c724b1;
            --primary-gradient: linear-gradient(to right, #e024a2 0%, #8b34ea 100%);
            --secondary-color: #4ac9ff; --accent-color: #4ac9ff; --text-primary-color: #f0f0f0;
            --text-secondary-color: #a0a0a0; --border-color: #333; --error-color: #ff4757;
            --success-color: #2ed573; --font-family: 'Kanit', sans-serif;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; scrollbar-width: thin; scrollbar-color: var(--primary-color) var(--surface-color); }
        *::-webkit-scrollbar { width: 8px; }
        *::-webkit-scrollbar-track { background: var(--surface-color); }
        *::-webkit-scrollbar-thumb { background-color: var(--primary-color); border-radius: 10px; border: 2px solid var(--surface-color); }
        html, body { font-family: var(--font-family); background-color: var(--background-color); color: var(--text-primary-color); line-height: 1.6; height: 100%; overflow: hidden; }
        .container { display: flex; flex-direction: column; height: 100vh; max-width: 1600px; margin: 0 auto; padding: 1rem; }
        button, input, select, textarea { font-family: var(--font-family); border-radius: 8px; border: 1px solid var(--border-color); background-color: #252528; color: var(--text-primary-color); padding: 0.75rem 1rem; }
        button { cursor: pointer; transition: all 0.2s ease; font-weight: 500; }
        button:hover { opacity: 0.9; transform: translateY(-2px); }
        button:active { transform: scale(0.98) translateY(0); }
        button:disabled { cursor: not-allowed; opacity: 0.5; transform: none; }
        .header { background-color: var(--surface-color); padding: 1rem 1.5rem; border-radius: 12px; margin-bottom: 1rem; border: 1px solid var(--border-color); flex-shrink: 0; }
        .header-top { display: flex; justify-content: space-between; align-items: center; }
        .header-left { display: flex; align-items: center; gap: 1rem; }
        .mobile-menu-btn { display: none; background: transparent; border: none; color: var(--text-secondary-color); font-size: 1.5rem; padding: 0.5rem; }
        .logo { display: flex; align-items: center; gap: 0.75rem; }
        .logo-icon svg { width: 40px; height: 40px; color: var(--primary-color); }
        .logo-text h1 { font-size: 1.5rem; margin: 0; color: var(--text-primary-color); }
        .logo-text p { font-size: 0.9rem; color: var(--text-secondary-color); margin: 0; }
        .auth-section { display: flex; align-items: center; gap: 1rem; }
        .user-profile { display: none; align-items: center; gap: 0.75rem; }
        .user-profile.visible { display: flex; }
        #user-greeting { font-size: 0.9rem; color: var(--text-secondary-color); }
        .logout-btn { background-color: #444; color: var(--text-secondary-color); padding: 0.5rem 1rem; }
        .logout-btn:hover { background-color: var(--error-color); color: white; }
        .mode-selector-wrapper { overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; scrollbar-width: none; margin-top: 1rem; }
        .mode-selector-wrapper::-webkit-scrollbar { display: none; }
        .mode-selector { display: flex; flex-wrap: nowrap; gap: 0.5rem; padding-bottom: 0.5rem; }
        .mode-btn { flex: 0 0 auto; padding: 0.75rem 1rem; font-size: 0.9rem; border: 1px solid var(--border-color); background-color: #252528; display: flex; align-items: center; justify-content: center; gap: 0.5rem; }
        .mode-btn svg { width: 18px; height: 18px; opacity: 0.7; flex-shrink: 0; }
        .mode-btn.active { background: var(--primary-gradient); color: white; font-weight: 600; border: none; }
        .mode-btn.active svg { opacity: 1; color: white; }
        .main-content { display: flex; flex-grow: 1; gap: 1rem; overflow: hidden; position: relative; }
        .side-panel { width: 35%; background-color: var(--surface-color); padding: 1.5rem; border-radius: 12px; overflow-y: auto; border: 1px solid var(--border-color); transition: transform 0.3s ease-in-out; }
        .side-panel h3 { color: var(--primary-color); margin-bottom: 1rem; border-bottom: 2px solid var(--primary-color); padding-bottom: 0.5rem; }
        .tip-card { background-color: #252528; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; border-left: 3px solid var(--accent-color); box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
        .tip-card h4 { margin-bottom: 0.5rem; color: var(--accent-color); }
        .tip-card p { font-size: 0.9rem; color: var(--text-secondary-color); }
        .chat-panel { width: 65%; display: flex; flex-direction: column; background-color: var(--surface-color); border-radius: 12px; overflow: hidden; border: 1px solid var(--border-color); }
        .chat-messages { flex-grow: 1; padding: 1.5rem; overflow-y: auto; }
        .message { display: flex; margin-bottom: 1.5rem; max-width: 90%; }
        .message-avatar { font-size: 1.5rem; margin-right: 1rem; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background-color: var(--background-color); flex-shrink: 0; overflow: hidden; }
        .message-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .message-content { background-color: #2a2a2a; padding: 1rem; border-radius: 12px; flex-grow: 1; word-wrap: break-word; position: relative; }
        .message-content h3 { margin-top: 1rem; color: var(--secondary-color); } .message-content strong { color: var(--primary-color); }
        .message.user { margin-left: auto; flex-direction: row-reverse; }
        .message.user .message-avatar { margin-left: 1rem; margin-right: 0; }
        .message.user .message-content { background: #3c2a3f; }
        .message-content pre { background-color: #111; padding: 1rem; border-radius: 8px; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word; margin-top: 0.5rem; margin-bottom: 0.5rem; }
        .message-actions { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem; border-top: 1px solid var(--border-color); padding-top: 0.75rem; }
        .action-btn { font-size: 0.8rem; padding: 0.25rem 0.75rem; background-color: #3a3a3a; }
        .generated-image { max-width: 100%; border-radius: 8px; margin-top: 1rem; border: 1px solid var(--border-color); }
        .image-loading-placeholder { background-color: #2a2a2a; border-radius: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 2rem; margin-top: 1rem; border: 1px dashed var(--border-color); }
        .image-loading-spinner { border: 4px solid rgba(255, 255, 255, 0.2); border-left-color: var(--secondary-color); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .message.loading .message-content { display: flex; align-items: center; gap: 10px; }
        .typing-indicator { display: flex; gap: 4px; }
        .typing-indicator span { width: 8px; height: 8px; background-color: var(--text-secondary-color); border-radius: 50%; animation: typing 1s infinite ease-in-out; }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; } .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .chat-input-area { padding: 1rem; background-color: var(--background-color); border-top: 1px solid var(--border-color); }
        .input-wrapper { display: flex; gap: 0.5rem; }
        .message-input { flex-grow: 1; resize: none; }
        .send-btn { padding: 0.75rem 1.5rem; background: var(--primary-gradient); background-size: 200% auto; color: white; font-weight: 600; border: none; display: flex; align-items: center; gap: 0.5rem; }
        .send-btn:hover { background-position: right center; }
        .send-btn svg { width: 18px; height: 18px; }
        .status-bar { display: flex; justify-content: space-between; align-items: center; font-size: 0.8rem; padding-top: 0.5rem; color: var(--text-secondary-color); flex-shrink: 0; }
        .status-indicator { display: flex; align-items: center; gap: 0.5rem; }
        .status-dot { width: 10px; height: 10px; border-radius: 50%; background-color: #444; }
        .status-dot.active { background-color: var(--success-color); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(46, 213, 115, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(46, 213, 115, 0); } 100% { box-shadow: 0 0 0 0 rgba(46, 213, 115, 0); } }
        .backdrop { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
        @media (max-width: 1024px) {
            .container { padding: 0; }
            .header, .status-bar { border-radius: 0; padding-left: 1rem; padding-right: 1rem; }
            .main-content { flex-grow: 1; height: calc(100vh - 165px); }
            .chat-panel { width: 100%; border-radius: 0; }
            .side-panel { position: fixed; left: 0; top: 0; width: 80%; max-width: 320px; height: 100%; z-index: 1001; transform: translateX(-100%); border-radius: 0; box-shadow: 5px 0 15px rgba(0,0,0,0.2); }
            .side-panel.show { transform: translateX(0); }
            .backdrop.show { display: block; }
            .mobile-menu-btn { display: block; }
        }
        @media (max-width: 768px) {
            .logo-text h1 { font-size: 1.2rem; }
            .logo-text p { display: none; }
            #user-greeting { display: none; }
            .mode-btn { font-size: 0.8rem; padding: 0.5rem 0.75rem; }
            .main-content { height: calc(100vh - 155px); }
        }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); align-items: center; justify-content: center; }
        .modal.show { display: flex; }
        .modal-content { background-color: var(--surface-color); margin: auto; padding: 2rem; border: 1px solid var(--border-color); width: 90%; max-width: 800px; border-radius: 12px; position: relative; max-height: 90vh; display: flex; flex-direction: column; }
        #loginModal .modal-content { max-width: 400px; }
        .close-btn { position: absolute; top: 1rem; right: 1rem; color: #aaa; font-size: 28px; font-weight: bold; background: none; border: none; cursor: pointer; }
        .modal-content h2 { margin-bottom: 1.5rem; color: var(--primary-color); text-align: center; }
        #loginModal a { color: var(--secondary-color); cursor: pointer; }
        .form-group { flex-grow: 1; min-width: 200px; margin-bottom: 1rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; color: var(--text-secondary-color); }
        #loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 9999; color: white; flex-direction: column; gap: 1rem; }
        #gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 1rem; }
        .gallery-item { aspect-ratio: 1 / 1; border-radius: 8px; overflow: hidden; cursor: pointer; transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; position: relative; }
        .gallery-item:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(187, 134, 252, 0.5); }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; }
        .gallery-item .delete-btn { position: absolute; top: 8px; right: 8px; background: rgba(0,0,0,0.6); border: none; color: white; border-radius: 50%; width: 30px; height: 30px; font-size: 16px; line-height: 30px; text-align: center; opacity: 0; transition: opacity 0.2s ease; }
        .gallery-item:hover .delete-btn { opacity: 1; }
        #image-viewer-modal .modal-content { background: transparent; border: none; width: 90vw; height: 90vh; padding: 0; max-width: 1200px; }
        .image-viewer-container { display: flex; flex-direction: column; width: 100%; height: 100%; }
        .image-viewer-container img { flex-grow: 1; object-fit: contain; width: 100%; height: 80%; border-radius: 8px; }
        .image-viewer-prompt { background: rgba(0,0,0,0.7); color: white; padding: 1rem; border-radius: 8px; margin-top: 1rem; font-size: 0.9rem; max-height: 20%; overflow-y: auto; }
    `}),KT={logo:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),send:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"})})},BC=[{id:"general-chat",label:"คุยทั่วไป",icon:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})},{id:"promptmaster",label:"Prompt Master",icon:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),b.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),b.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),b.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),b.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),b.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),b.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"}),b.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"})]})},{id:"novel-writer",label:"นักเขียนนิยาย",icon:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),b.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]})},{id:"char-chat",label:"คุยกับตัวละคร",icon:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),b.jsx("circle",{cx:"9",cy:"7",r:"4"}),b.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),b.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},{id:"storyboard",label:"Storyboard",icon:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),b.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),b.jsx("line",{x1:"3",y1:"15",x2:"21",y2:"15"}),b.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"}),b.jsx("line",{x1:"15",y1:"3",x2:"15",y2:"21"})]})},{id:"image",label:"Image Prompt",icon:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),b.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),b.jsx("polyline",{points:"21 15 16 10 5 21"})]})},{id:"gallery",label:"My Gallery",icon:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),b.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),b.jsx("path",{d:"M21 15l-5-5L5 21"})]})},{id:"analyzer",label:"Prompt Analyzer",icon:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("circle",{cx:"11",cy:"11",r:"8"}),b.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),b.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),b.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]})},{id:"character",label:"สร้างตัวละคร",icon:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),b.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),b.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),b.jsx("line",{x1:"17",y1:"11",x2:"23",y2:"11"})]})},{id:"library",label:"คลังตัวละคร",icon:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})})},{id:"favorites",label:"Prompt โปรด",icon:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:b.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}],qC={"general-chat":'You are Nova AI, a helpful and creative assistant. Engage in a friendly conversation with the user in Thai. Use emojis and clear line breaks. Always end with an open-ended follow-up question, like "มีอะไรให้ผมช่วยอีกไหมครับ?"',promptmaster:`You are an expert prompt engineer for text-to-video AI. Your task is to take a user's idea and generate a single, detailed, professional, cinematic prompt IN ENGLISH. Incorporate previous context if the user is refining. The prompt must include details about cinematography, lighting, mood, and visual style. After providing the prompt, end your response in Thai with a friendly tone, using emojis and line breaks, and ask for feedback or next steps, like "ชอบ Prompt นี้ไหมครับ? ✨ ต้องการให้ปรับแก้ส่วนไหนเพิ่มเติมบอกได้เลยนะ!".`,storyboard:`You are an expert scriptwriter. Take a user's idea and break it down into 3-5 distinct scenes for a short video. For each scene, create a detailed text-to-video prompt IN ENGLISH. The output should be in THAI, clearly structured using Markdown for each scene. After presenting the storyboard, end your response in Thai with a friendly tone and ask a follow-up question, like "นี่คือ Storyboard ที่ร่างไว้ครับ 📜 ชอบโครงเรื่องแบบนี้ไหม หรืออยากจะพัฒนาฉากไหนเป็นพิเศษครับ?".`,image:`You are an expert prompt creator for image generation AI. Transform the user's idea into a highly detailed, comma-separated keyword prompt IN ENGLISH. After providing the prompt, end your response in Thai with a friendly tone, using emojis and line breaks, and ask a follow-up question, for example: "นี่คือ Prompt สำหรับสร้างภาพครับ 🎨 ลองนำไปใช้ดูนะครับ หรืออยากให้เพิ่ม/ลดรายละเอียดส่วนไหนไหมครับ?".`,analyzer:`You are a world-class prompt engineering analyst. Analyze the user's provided prompt. Provide a structured analysis in THAI with markdown: '**จุดแข็ง:**', '**ข้อเสนอแนะ:**', and '**Prompt ที่ปรับปรุงแล้ว:**'. After the analysis, end your response in Thai with a friendly tone and ask a follow-up question, like "นี่คือผลการวิเคราะห์ครับ 🧐 หวังว่าจะเป็นประโยชน์นะครับ มี Prompt อื่นให้ผมช่วยดูอีกไหมครับ?".`,character:`You are a creative writer. Based on the user's input, generate a detailed character profile in THAI, structured with '**ชื่อ/บทบาท:**', '**ลักษณะภายนอก:**', and '**บุคลิก:**'. After presenting the profile, end your response in Thai with a friendly tone, using emojis, and ask for next steps, like "สร้างโปรไฟล์ตัวละครให้แล้วครับ 🧙‍♀️ ต้องการให้เพิ่มรายละเอียดส่วนไหน หรือจะให้ผมนำตัวละครนี้ไปสร้างเรื่องราวต่อเลยดีครับ?".`,"novel-writer":`You are a professional novel writer. Write a compelling short story (around 300-500 words) in Thai based on the user's request. Write in an engaging, narrative style. If the user says 'เขียนต่อ' or similar, continue the story logically. Always end your response by asking if they like the direction of the story and what should happen next, e.g., "เรื่องราวดำเนินมาถึงตรงนี้แล้วครับ 📖 คุณคิดว่าเหตุการณ์ต่อไปควรเป็นอย่างไรดีครับ?".`};function HC(){const[r,e]=Me.useState(null),[n,s]=Me.useState(null),[l,c]=Me.useState(!0),[d,p]=Me.useState(!1),[g,y]=Me.useState("general-chat"),[T,R]=Me.useState({}),[x,q]=Me.useState([]),[Y,te]=Me.useState(""),[W,ue]=Me.useState(!1),[le,J]=Me.useState(!1),[de,pe]=Me.useState(null),[we,M]=Me.useState([]),[w,I]=Me.useState([]),[O,V]=Me.useState([]),[P,C]=Me.useState(!1),[Ct,rt]=Me.useState(null),[G,re]=Me.useState(!1),[ce,Be]=Me.useState({src:"",prompt:""}),D=Me.useRef(null),Z=Me.useCallback(async(Se,Re)=>{try{const qe=await fetch(Se,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Re)});if(!qe.ok)throw new Error(`API error: ${qe.status} ${qe.statusText}`);return await qe.json()}catch(qe){return console.error("API call failed:",qe),{error:"ขออภัยครับ เกิดข้อผิดพลาดในการเชื่อมต่อกับ AI"}}},[]);Me.useEffect(()=>{const Se=mS(Gl,Re=>{Re?(e(Re),s(Re.uid),p(!1)):(e(null),s(null),p(!0)),c(!1)});return()=>Se()},[]),Me.useEffect(()=>{if(!n){R({}),M([]),I([]),V([]);return}const Se=$i(un,"users",n),Re=Oc(Se,rn=>{R(rn.exists()&&rn.data().chatHistory?rn.data().chatHistory:{})}),qe=Xd(Ls(un,`users/${n}/characters`),$d("createdAt","desc")),at=Oc(qe,rn=>{M(rn.docs.map(cn=>({id:cn.id,...cn.data()})))}),gn=Xd(Ls(un,`users/${n}/favorites`),$d("createdAt","desc")),Fn=Oc(gn,rn=>{I(rn.docs.map(cn=>({id:cn.id,...cn.data()})))}),yn=Xd(Ls(un,`users/${n}/gallery`),$d("createdAt","desc")),ht=Oc(yn,rn=>{V(rn.docs.map(cn=>({id:cn.id,...cn.data()})))});return()=>{Re(),at(),Fn(),ht()}},[n]);const ne=Me.useCallback(()=>g==="char-chat"&&de?`char-chat-${de.id}`:g,[g,de]),ee=Me.useCallback(async Se=>{if(!n)return;const Re=$i(un,"users",n);await PC(Re,{chatHistory:Se},{merge:!0})},[n]),he=Me.useCallback((Se,Re)=>{const qe=ne(),at={role:Re,parts:[{text:Se}]};let Fn=[...T[qe]||[]];(Re==="user"||Re==="assistant")&&Fn.push({role:Re==="user"?"user":"model",parts:at.parts});const yn={...T,[qe]:Fn};R(yn),ee(yn),q(ht=>[...ht,at])},[T,ne,ee]),Ie=Me.useCallback(async Se=>{if(!Se||W)return;te(""),he(Se,"user"),ue(!0);const Re=Date.now();q(ht=>[...ht,{role:"loading",id:Re}]);const qe=ne();let at=(T[qe]||[]).slice(-10),gn=qC[g];g==="char-chat"&&de&&(gn=`You must act as the character '${de.nickname}'. Personality: '${de.personality}'. Appearance: '${de.appearance}'. Respond in character at all times, in Thai. Use emojis and clear line breaks. Always end with a follow-up question.`);const yn=await Z(FT,{contents:at,systemInstruction:{parts:[{text:gn}]}});if(q(ht=>ht.filter(rn=>rn.id!==Re)),yn.error)he(yn.error,"assistant");else{const ht=yn.candidates?.[0]?.content?.parts?.[0]?.text||"ไม่ได้รับคำตอบที่ถูกต้องจาก AI";he(ht,"assistant")}ue(!1)},[W,he,ne,T,g,de,Z]);Me.useEffect(()=>{const Se=ne(),Re=(T[Se]||[]).map(qe=>({role:qe.role==="model"?"assistant":"user",parts:qe.parts}));if(Re.length===0){let at={"general-chat":"สวัสดีครับ! มีอะไรให้ผมช่วยในวันนี้ครับ? ลองถามอะไรก็ได้เลย",promptmaster:'เริ่มต้นด้วยการบรรยายฉากที่ต้องการ เช่น "ชายคนหนึ่งวิ่งหนีบนตึกระฟ้าตอนฝนตก"',"novel-writer":"กรอกแนวเรื่องและพล็อตเริ่มต้นทางด้านซ้ายเพื่อเริ่มสร้างนิยายของคุณ","char-chat":"เลือกตัวละครจากด้านซ้ายเพื่อเริ่มการสนทนา",storyboard:"ใส่ไอเดียหรือเรื่องย่อสั้นๆ แล้วผมจะช่วยแตกเป็นฉากๆ ให้ครับ",image:'บรรยายภาพที่คุณจินตนาการไว้ เช่น "นักบินอวกาศขี่ม้าบนดาวอังคาร"',analyzer:"วาง Prompt ที่คุณต้องการให้ผมช่วยวิเคราะห์ลงในช่องแชทได้เลยครับ",character:'บรรยายลักษณะตัวละครที่คุณอยากสร้าง เช่น "นักรบหญิงในชุดเกราะสีเงิน"',library:'ที่นี่คือคลังตัวละครของคุณ คุณสามารถเลือก "ใช้งาน" เพื่อนำข้อมูลไปใช้ในโหมดอื่น หรือ "ลบ" ได้',favorites:'ที่นี่คือคลัง Prompt ที่คุณชื่นชอบ สามารถเลือก "ใช้งาน" เพื่อนำกลับมาใช้ใหม่ได้เลย',gallery:"ที่นี่คือคลังภาพส่วนตัวของคุณ คลิกที่รูปเพื่อดูภาพขนาดเต็ม"}[g]||`เริ่มต้นใช้งานโหมด '${g}' ได้เลย!`;g==="char-chat"&&de&&(at=`เริ่มต้นการสนทนากับ ${de.nickname} ได้เลย!`),q([{role:"assistant",parts:[{text:at}]}])}else q(Re)},[g,T,de,ne]),Me.useEffect(()=>{D.current?.scrollIntoView({behavior:"smooth"})},[x]);const ye=Se=>{y(Se),pe(null),window.innerWidth<=1024&&J(!1)},Et=()=>{if(window.confirm("คุณต้องการล้างประวัติการสนทนาในโหมดนี้ใช่หรือไม่?")){const Se=ne(),Re={...T,[Se]:[]};R(Re),ee(Re)}};if(l)return b.jsxs("div",{id:"loader",children:[b.jsx("div",{className:"image-loading-spinner"}),b.jsx("p",{children:"กำลังโหลด..."})]});const Ke=r&&r.email?r.email.split("@")[0]:"",Cn=Ke.charAt(0).toUpperCase()+Ke.slice(1);return b.jsxs(b.Fragment,{children:[b.jsx(zC,{}),d&&b.jsx(XC,{}),r&&b.jsxs("div",{className:"container",children:[b.jsx(GC,{userName:Cn,currentMode:g,onSwitchMode:ye,onToggleMenu:()=>J(!le)}),b.jsxs("div",{className:"main-content",children:[b.jsx("div",{className:`backdrop${le?" show":""}`,onClick:()=>J(!1)}),b.jsx(FC,{isOpen:le,currentMode:g,characters:we,favorites:w,galleryItems:O,onOpenCharModal:Se=>{rt(Se||null),C(!0)},onUseCharacter:async Se=>{const Re=$i(un,`users/${n}/characters/${Se}`),qe=await p0(Re);if(qe.exists()){const at=qe.data();ye("promptmaster"),te(`ตัวละคร: ${at.nickname}
ลักษณะ: ${at.appearance}
นิสัย: ${at.personality}`)}},onDeleteCharacter:async Se=>{window.confirm("คุณต้องการลบตัวละครนี้ใช่หรือไม่?")&&await Zd($i(un,`users/${n}/characters/${Se}`))},onUseFavorite:async Se=>{const Re=$i(un,`users/${n}/favorites/${Se}`),qe=await p0(Re);if(qe.exists()){const at=qe.data();ye(at.mode),te(at.prompt)}},onDeleteFavorite:async Se=>{window.confirm("คุณต้องการลบ Prompt นี้ใช่หรือไม่?")&&await Zd($i(un,`users/${n}/favorites/${Se}`))},onImageViewerOpen:(Se,Re)=>{Be({src:Se,prompt:Re}),re(!0)},onDeleteGalleryItem:async Se=>{window.confirm("คุณต้องการลบรูปภาพนี้ใช่หรือไม่?")&&await Zd($i(un,`users/${n}/gallery/${Se}`))},activeCharacterForChat:de,onStartCharChat:Se=>{const Re=we.find(qe=>qe.id===Se);Re&&pe(Re)},onEndCharChat:()=>pe(null),onSendMessage:Ie,setInputValue:te}),b.jsx(QC,{messages:x,inputValue:Y,setInputValue:te,onSendMessage:()=>Ie(Y),isLoading:W,currentMode:g,activeCharacterForChat:de,chatMessagesEndRef:D,callApi:Z,userId:n})]}),b.jsx(YC,{isLoading:W,onClearHistory:Et})]}),P&&b.jsx($C,{character:Ct,onClose:()=>{C(!1),rt(null)},userId:n}),G&&b.jsx(ZC,{src:ce.src,prompt:ce.prompt,onClose:()=>re(!1)})]})}const GC=({userName:r,currentMode:e,onSwitchMode:n,onToggleMenu:s})=>b.jsxs("div",{className:"header",children:[b.jsxs("div",{className:"header-top",children:[b.jsxs("div",{className:"header-left",children:[b.jsx("button",{id:"mobile-menu-btn",className:"mobile-menu-btn",onClick:s,children:"☰"}),b.jsxs("div",{className:"logo",children:[b.jsx("div",{className:"logo-icon",children:KT.logo}),b.jsxs("div",{className:"logo-text",children:[b.jsx("h1",{children:"Nova AI"}),b.jsx("p",{children:"ผู้ช่วยสร้างสรรค์อัจฉริยะ"})]})]})]}),b.jsx("div",{className:"auth-section",children:b.jsxs("div",{className:"user-profile visible",children:[b.jsxs("span",{id:"user-greeting",children:["สวัสดี, ",r]}),b.jsx("button",{className:"logout-btn",onClick:()=>pS(Gl),children:"ออกจากระบบ"})]})})]}),b.jsx("div",{className:"mode-selector-wrapper",children:b.jsx("div",{className:"mode-selector",children:BC.map(l=>b.jsxs("button",{className:`mode-btn ${e===l.id?"active":""}`,onClick:()=>n(l.id),children:[l.icon,l.label]},l.id))})})]}),FC=({isOpen:r,currentMode:e,characters:n,onOpenCharModal:s,onUseCharacter:l,onDeleteCharacter:c,favorites:d,onUseFavorite:p,onDeleteFavorite:g,galleryItems:y,onImageViewerOpen:T,onDeleteGalleryItem:R,activeCharacterForChat:x,onStartCharChat:q,onEndCharChat:Y,onSendMessage:te})=>{const W=async J=>{const de=document.getElementById("galleryImageUrl"),pe=document.getElementById("galleryImageDesc"),we=de.value.trim(),M=pe.value.trim();!we||!J||(await lh(Ls(un,`users/${J}/gallery`),{imageUrl:we,prompt:M,createdAt:new Date}),de.value="",pe.value="")},ue=async()=>{const J=document.getElementById("novelGenre"),de=document.getElementById("novelPlot"),pe=document.getElementById("novelCharacterSelect"),we=J.value.trim(),M=de.value.trim(),w=pe.value;if(!we||!M){alert('กรุณากรอก "แนวเรื่อง" และ "ไอเดีย/พล็อตเรื่อง"');return}let I=`แนวเรื่อง: ${we}
พล็อต: ${M}`;if(w){const O=n.find(V=>V.id===w);O&&(I+=`
ตัวละครเอก: ${O.nickname} (ลักษณะ: ${O.appearance}, นิสัย: ${O.personality})`)}te(I)},le=()=>{switch(e){case"general-chat":return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"💬 คุยทั่วไป"}),b.jsxs("div",{className:"tip-card",children:[b.jsx("h4",{children:"ผู้ช่วยสร้างสรรค์"}),b.jsx("p",{children:"คุณสามารถพูดคุยกับ AI ได้ทุกเรื่อง, ระดมสมอง, หรือบรีฟงานต่างๆ ได้อย่างอิสระในโหมดนี้"})]})]});case"promptmaster":return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"🎥 Prompt Master"}),b.jsxs("div",{className:"tip-card",children:[b.jsx("h4",{children:"สร้าง Prompt วิดีโอระดับมืออาชีพ"}),b.jsx("p",{children:"แค่บอกไอเดียของคุณ แล้ว Gemini จะช่วยเปลี่ยนให้เป็น Prompt ที่ละเอียดและพร้อมใช้งานทันที คุณสามารถคุยต่อเพื่อปรับแก้ได้"})]})]});case"storyboard":return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"📜 Storyboard Mode"}),b.jsxs("div",{className:"tip-card",children:[b.jsx("h4",{children:"สร้าง Storyboard จากเรื่องย่อ"}),b.jsx("p",{children:"ใส่ไอเดียหรือพล็อตเรื่องสั้นๆ ของคุณ แล้ว Gemini จะช่วยแตกออกมาเป็น Prompt สำหรับแต่ละฉาก (Scene) 3-5 ฉากให้โดยอัตโนมัติ"})]})]});case"image":return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"🖼️ Image Prompt Creator"}),b.jsxs("div",{className:"tip-card",children:[b.jsx("h4",{children:"สร้าง Prompt สำหรับรูปภาพ"}),b.jsx("p",{children:"บรรยายภาพในจินตนาการของคุณ แล้ว Gemini จะสร้าง Prompt ที่ละเอียดเพื่อให้ AI สร้างภาพได้ตรงใจที่สุด"})]}),b.jsxs("div",{className:"tip-card",children:[b.jsx("h4",{children:"🚫 Negative Prompt (สิ่งที่ไม่ต้องการ)"}),b.jsx("div",{className:"form-group",children:b.jsx("textarea",{id:"negativePromptInput",className:"template-textarea",rows:2,placeholder:"เช่น text, watermark, ugly, deformed..."})})]})]});case"analyzer":return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"🧐 Prompt Analyzer"}),b.jsxs("div",{className:"tip-card",children:[b.jsx("h4",{children:"วิเคราะห์และปรับปรุง Prompt"}),b.jsx("p",{children:"วาง Prompt ที่คุณมีอยู่ แล้ว Gemini จะช่วยวิเคราะห์จุดแข็ง จุดอ่อน และให้คำแนะนำเพื่อปรับปรุงให้ดีขึ้น"})]})]});case"character":return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"🧙 สร้างตัวละคร"}),b.jsxs("div",{className:"tip-card",children:[b.jsx("h4",{children:"ตอนนี้คุณสามารถพิมพ์เพื่อสร้างตัวละครในช่องแชทได้โดยตรง"}),b.jsx("p",{children:"หรือใช้ปุ่มด้านล่างเพื่อเปิดฟอร์มแบบละเอียด"})]}),b.jsx("button",{onClick:()=>s(),style:{width:"100%",padding:"0.75rem",marginTop:"1rem",background:"var(--primary-gradient)",color:"white",border:"none"},children:"+ เปิดฟอร์มสร้างตัวละคร"})]});case"library":return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"🗂️ คลังตัวละคร"}),b.jsx("p",{style:{color:"var(--text-secondary-color)",fontSize:"0.9rem",marginBottom:"1rem"},children:"ตัวละครของคุณจะถูกซิงค์ข้ามอุปกรณ์"}),b.jsx("div",{children:n.length>0?n.map(J=>b.jsxs("div",{className:"tip-card",children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[b.jsx("img",{src:J.imageUrl||"https://placehold.co/100x100/2a2a2a/a0a0a0?text=🎭",style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"},alt:J.nickname}),b.jsxs("div",{style:{flexGrow:1},children:[b.jsx("h4",{children:J.nickname}),b.jsxs("p",{children:[J.appearance.substring(0,80),"..."]})]})]}),b.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem"},children:[b.jsx("button",{onClick:()=>l(J.id),children:"ใช้งาน"}),b.jsx("button",{onClick:()=>s(J),children:"แก้ไข"}),b.jsx("button",{onClick:()=>c(J.id),style:{backgroundColor:"var(--error-color)"},children:"ลบ"})]})]},J.id)):b.jsx("div",{className:"tip-card",children:b.jsx("p",{children:"ยังไม่มีตัวละครที่บันทึกไว้"})})})]});case"favorites":return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"⭐ Prompt โปรด"}),b.jsx("p",{style:{color:"var(--text-secondary-color)",fontSize:"0.9rem",marginBottom:"1rem"},children:"Prompt ที่คุณบันทึกไว้จะถูกซิงค์ข้ามอุปกรณ์"}),b.jsx("div",{children:d.length>0?d.map(J=>b.jsxs("div",{className:"tip-card",children:[b.jsxs("h4",{children:["[",J.mode,"]"]}),b.jsxs("p",{children:[J.prompt.substring(0,150),"..."]}),b.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem"},children:[b.jsx("button",{onClick:()=>p(J.id),children:"ใช้งาน"}),b.jsx("button",{onClick:()=>g(J.id),style:{backgroundColor:"var(--error-color)"},children:"ลบ"})]})]},J.id)):b.jsx("div",{className:"tip-card",children:b.jsx("p",{children:"ยังไม่มี Prompt ที่บันทึกไว้"})})})]});case"gallery":return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"🎨 My Gallery"}),b.jsxs("div",{className:"tip-card",children:[b.jsx("h4",{children:"เพิ่มรูปภาพใหม่จากลิงก์"}),b.jsx("div",{className:"form-group",children:b.jsx("input",{type:"url",id:"galleryImageUrl",className:"template-input",placeholder:"วาง URL ของรูปภาพ"})}),b.jsx("div",{className:"form-group",children:b.jsx("textarea",{id:"galleryImageDesc",className:"template-textarea",rows:2,placeholder:"คำอธิบายสั้นๆ (ถ้ามี)"})}),b.jsx("button",{onClick:()=>W(Gl.currentUser?.uid),style:{width:"100%",background:"var(--primary-gradient)",color:"white",border:"none"},children:"+ เพิ่มไปยังแกลเลอรี"})]}),b.jsx("p",{style:{color:"var(--text-secondary-color)",fontSize:"0.9rem",marginBottom:"1rem"},children:"ผลงานรูปภาพที่คุณบันทึกไว้"}),b.jsx("div",{id:"gallery-grid",children:y.length>0?y.map(J=>b.jsxs("div",{className:"gallery-item",children:[b.jsx("img",{src:J.imageUrl,alt:"Generated",onClick:()=>T(J.imageUrl,J.prompt)}),b.jsx("button",{className:"delete-btn",onClick:()=>R(J.id),children:"×"})]},J.id)):b.jsx("div",{className:"tip-card",children:b.jsx("p",{children:"ยังไม่มีรูปภาพที่บันทึกไว้"})})})]});case"char-chat":return x?b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"💬 คุยกับตัวละคร"}),b.jsxs("div",{className:"tip-card",children:[b.jsx("h4",{children:"กำลังคุยกับ:"}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[b.jsx("img",{src:x.imageUrl||"https://placehold.co/100x100/1e1e1e/a0a0a0?text=🎭",style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"},alt:x.nickname}),b.jsx("p",{style:{color:"var(--secondary-color)",fontSize:"1.2rem",fontWeight:"bold"},children:x.nickname})]}),b.jsx("button",{onClick:Y,style:{width:"100%",padding:"0.5rem",marginTop:"1rem",backgroundColor:"var(--error-color)"},children:"จบการสนทนา"})]})]}):b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"💬 คุยกับตัวละคร"}),n.length>0?n.map(J=>b.jsxs("div",{className:"tip-card",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[b.jsx("img",{src:J.imageUrl||"https://placehold.co/100x100/2a2a2a/a0a0a0?text=🎭",style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"},alt:J.nickname}),b.jsxs("div",{style:{flexGrow:1},children:[b.jsx("h5",{children:J.nickname}),b.jsx("button",{onClick:()=>q(J.id),style:{width:"100%"},children:"เริ่มคุย"})]})]},J.id)):b.jsx("div",{className:"tip-card",children:b.jsx("p",{children:'ยังไม่มีตัวละครที่บันทึกไว้ ไปที่โหมด "สร้างตัวละคร" เพื่อสร้างตัวละครของคุณก่อน'})})]});case"novel-writer":return b.jsxs(b.Fragment,{children:[b.jsx("h3",{children:"📖 นักเขียนนิยาย"}),b.jsxs("div",{className:"tip-card",children:[b.jsx("h4",{children:"ตั้งค่าเรื่องราวของคุณ"}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"แนวเรื่อง (Genre)"}),b.jsx("input",{type:"text",id:"novelGenre",className:"template-input",list:"genres",placeholder:"เช่น แฟนตาซี, สืบสวน, รักโรแมนติก"}),b.jsxs("datalist",{id:"genres",children:[b.jsx("option",{value:"แฟนตาซี"}),b.jsx("option",{value:"ไซไฟ"}),b.jsx("option",{value:"สืบสวนสอบสวน"}),b.jsx("option",{value:"รักโรแมนติก"}),b.jsx("option",{value:"สยองขวัญ"})]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"เลือกตัวละครเอก (ถ้ามี)"}),b.jsxs("select",{id:"novelCharacterSelect",className:"template-select",children:[b.jsx("option",{value:"",children:"-- ไม่เลือก --"}),n.map(J=>b.jsx("option",{value:J.id,children:J.nickname},J.id))]})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"ไอเดีย/พล็อตเรื่องเริ่มต้น"}),b.jsx("textarea",{id:"novelPlot",className:"template-textarea",rows:4,placeholder:"เช่น ชายหนุ่มคนหนึ่งตื่นขึ้นมาในโลกที่ไม่คุ้นเคย..."})]}),b.jsx("button",{onClick:ue,style:{width:"100%",padding:"0.75rem",marginTop:"1rem",backgroundColor:"var(--secondary-color)",color:"black",fontWeight:600},children:"เริ่มเขียนนิยาย ✨"})]})]});default:return b.jsx("h3",{children:"Select a mode"})}};return b.jsx("div",{className:`side-panel${r?" show":""}`,children:le()})},QC=({messages:r,inputValue:e,setInputValue:n,onSendMessage:s,isLoading:l,currentMode:c,activeCharacterForChat:d,chatMessagesEndRef:p,callApi:g,userId:y})=>{const T={"general-chat":"คุยกับ AI ได้ทุกเรื่องที่นี่...",promptmaster:"สร้างฉากไล่ล่าในเมืองตอนกลางคืน...",storyboard:"เรื่องย่อ: นักบินอวกาศค้นพบดาวเคราะห์ดวงใหม่...",image:"แมวใส่แว่นกันแดดบนชายหาด...",analyzer:"วาง Prompt ที่ต้องการวิเคราะห์ที่นี่...",character:"บรรยายลักษณะตัวละครที่คุณอยากสร้าง...","char-chat":"เลือกตัวละครจากด้านซ้ายเพื่อเริ่มคุย...","novel-writer":"ใช้เทมเพลตด้านซ้ายเพื่อเริ่มเรื่องราว...",library:"เลือกตัวละครเพื่อใช้งาน",favorites:"เลือก Prompt ที่ชื่นชอบเพื่อใช้งาน",gallery:"คลังภาพส่วนตัวของคุณ"},R=l||["library","favorites","gallery"].includes(c)||c==="char-chat"&&!d,x=async()=>{if(l||R)return;const te=(await g(FT,{contents:[{role:"user",parts:[{text:"Suggest an idea"}]}],systemInstruction:{parts:[{text:"You are a creative idea generator. Provide a single, concise, and inspiring idea in Thai based on the user's selected mode. Do not add any extra text or explanation."}]}})).candidates?.[0]?.content?.parts?.[0]?.text;te&&!te.includes("ขออภัย")&&n(te)};return b.jsxs("div",{className:"chat-panel",children:[b.jsxs("div",{className:"chat-messages",children:[r.map((q,Y)=>b.jsx(KC,{message:q,activeCharacterForChat:d,currentMode:c,callApi:g,userId:y},Y)),b.jsx("div",{ref:p})]}),b.jsx("div",{className:"chat-input-area",children:b.jsxs("div",{className:"input-wrapper",children:[b.jsx("button",{className:"idea-btn",title:"✨ แนะนำไอเดีย",onClick:x,disabled:R,children:"💡"}),b.jsx("textarea",{className:"message-input",placeholder:T[c]||"พิมพ์ข้อความของคุณที่นี่...",rows:1,value:e,onChange:q=>n(q.target.value),onKeyDown:q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),s())},disabled:R}),b.jsxs("button",{className:"send-btn",onClick:s,disabled:R,children:["สร้าง ",KT.send]})]})})]})},KC=({message:r,activeCharacterForChat:e,currentMode:n,callApi:s,userId:l})=>{const[c,d]=Me.useState(!1),[p,g]=Me.useState(null),y=async ue=>{d(!0);const J=document.getElementById("negativePromptInput")?.value.trim()||"",pe={instances:[{prompt:ue+(J?` --no ${J}`:"")}],parameters:{sampleCount:1}},we=await s(jC,pe);if(d(!1),we.error||!we.predictions?.[0]?.bytesBase64Encoded)console.error("Image generation failed");else{const w=`data:image/png;base64,${we.predictions[0].bytesBase64Encoded}`;g(w)}},T=async(ue,le)=>{l&&(await lh(Ls(un,`users/${l}/favorites`),{prompt:ue,mode:n,createdAt:new Date}),le.textContent="⭐ บันทึกแล้ว!",le.disabled=!0,setTimeout(()=>{le.textContent="⭐ บันทึก",le.disabled=!1},2e3))},R=async(ue,le,J)=>{l&&(await lh(Ls(un,`users/${l}/gallery`),{imageUrl:ue,prompt:le,createdAt:new Date}),J.textContent="💾 บันทึกแล้ว!",J.disabled=!0)},{role:x,parts:q}=r,Y=q?.[0]?.text??"",te=()=>x==="user"?"👤":x==="assistant"&&n==="char-chat"&&e?e.imageUrl?b.jsx("img",{src:e.imageUrl,alt:e.nickname}):"🎭":"🤖",W=()=>{if(x==="loading")return b.jsxs("div",{className:"typing-indicator",children:[b.jsx("span",{}),b.jsx("span",{}),b.jsx("span",{})]});if(x==="assistant"){const ue=Y,J={__html:["promptmaster","image"].includes(n)?`<pre><code>${Y}</code></pre>`:Y.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/```([\s\S]*?)```/g,"<pre><code>$1</code></pre>").replace(/\n/g,"<br />")};return b.jsxs(b.Fragment,{children:[b.jsx("div",{dangerouslySetInnerHTML:J}),c&&b.jsxs("div",{className:"image-loading-placeholder",children:[b.jsx("div",{className:"image-loading-spinner"}),b.jsx("p",{children:"กำลังสร้างภาพ..."})]}),p&&b.jsx("div",{children:b.jsx("img",{src:p,className:"generated-image",alt:"generated content"})}),b.jsxs("div",{className:"message-actions",children:[b.jsx("button",{className:"action-btn",onClick:de=>{navigator.clipboard.writeText(ue),de.currentTarget.textContent="คัดลอกแล้ว!",setTimeout(()=>de.currentTarget.textContent="คัดลอก",2e3)},children:"คัดลอก"}),b.jsx("button",{className:"action-btn",onClick:de=>T(ue,de.currentTarget),children:"⭐ บันทึก"}),n==="image"&&!p&&b.jsx("button",{className:"action-btn",onClick:()=>y(ue),children:"🎨 สร้างภาพ"}),p&&b.jsx("button",{className:"action-btn",onClick:de=>R(p,ue,de.currentTarget),children:"💾 บันทึก"})]})]})}return Y};return b.jsxs("div",{className:`message ${x}`,children:[b.jsx("div",{className:"message-avatar",children:te()}),b.jsx("div",{className:"message-content",children:W()})]})},YC=({isLoading:r,onClearHistory:e})=>b.jsxs("div",{className:"status-bar",children:[b.jsxs("div",{className:"status-indicator",children:[b.jsx("span",{className:`status-dot ${r?"":"active"}`}),b.jsx("span",{children:r?"AI กำลังประมวลผล...":"พร้อมใช้งาน"})]}),b.jsx("button",{onClick:e,style:{fontSize:"0.8rem",padding:"0.25rem 0.5rem",background:"#555"},children:"ล้างประวัติ"})]}),XC=()=>{const[r,e]=Me.useState(!0),[n,s]=Me.useState(""),[l,c]=Me.useState(""),[d,p]=Me.useState(""),g=async y=>{if(y.preventDefault(),p(""),!n||!l){p("กรุณากรอกอีเมลและรหัสผ่าน");return}try{r?await hS(Gl,n,l):await cS(Gl,n,l)}catch(T){let R="เกิดข้อผิดพลาด กรุณาลองใหม่";switch(T.code){case"auth/wrong-password":R="รหัสผ่านไม่ถูกต้อง";break;case"auth/user-not-found":R="ไม่พบผู้ใช้นี้";break;case"auth/email-already-in-use":R="อีเมลนี้ถูกใช้งานแล้ว";break;case"auth/weak-password":R="รหัสผ่านต้องมีความยาวอย่างน้อย 6 ตัวอักษร";break}p(R)}};return b.jsx("div",{id:"loginModal",className:"modal show",children:b.jsxs("div",{className:"modal-content",children:[b.jsx("h2",{children:r?"เข้าสู่ระบบ":"สมัครสมาชิก"}),d&&b.jsx("div",{style:{color:"var(--error-color)",marginBottom:"1rem",textAlign:"center"},children:d}),b.jsxs("form",{onSubmit:g,children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"email",children:"อีเมล"}),b.jsx("input",{type:"email",value:n,onChange:y=>s(y.target.value),required:!0})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{htmlFor:"password",children:"รหัสผ่าน"}),b.jsx("input",{type:"password",value:l,onChange:y=>c(y.target.value),required:!0})]}),b.jsx("button",{type:"submit",style:{width:"100%",padding:"0.75rem",background:"var(--primary-gradient)",color:"white",fontWeight:600,border:"none"},children:r?"เข้าสู่ระบบ":"สมัครสมาชิก"})]}),b.jsxs("p",{style:{textAlign:"center",marginTop:"1rem",color:"var(--text-secondary-color)"},children:[b.jsx("span",{children:r?"ยังไม่มีบัญชี?":"มีบัญชีอยู่แล้ว?"}),b.jsx("a",{href:"#",onClick:y=>{y.preventDefault(),e(!r),p("")},children:r?"สมัครสมาชิก":"เข้าสู่ระบบ"})]})]})})},$C=({character:r,onClose:e,userId:n})=>{const[s,l]=Me.useState({imageUrl:r?.imageUrl||"",nickname:r?.nickname||"",appearance:r?.appearance||"",personality:r?.personality||""}),c=p=>{const{id:g,value:y}=p.target;l(T=>({...T,[g]:y}))},d=async p=>{if(p.preventDefault(),!s.nickname||!s.appearance||!n){alert('กรุณากรอก "ชื่อเรียก/บทบาท" และ "ลักษณะภายนอก"');return}const g={...s,createdAt:new Date};try{r?.id?await UC($i(un,`users/${n}/characters`,r.id),g):await lh(Ls(un,`users/${n}/characters`),g),e()}catch(y){console.error("Error saving character:",y),alert("เกิดข้อผิดพลาดในการบันทึก")}};return b.jsx("div",{className:"modal show",children:b.jsxs("div",{className:"modal-content",children:[b.jsx("span",{className:"close-btn",onClick:e,children:"×"}),b.jsx("h2",{children:"🧙 สร้าง/แก้ไข ตัวละคร"}),b.jsxs("form",{onSubmit:d,style:{overflowY:"auto",paddingRight:"1rem"},children:[b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"ลิงก์รูปโปรไฟล์ (Profile Image URL)"}),b.jsx("input",{type:"url",id:"imageUrl",value:s.imageUrl,onChange:c,placeholder:"วาง URL ของรูปภาพที่นี่"})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"ชื่อเรียก/บทบาท*"}),b.jsx("input",{type:"text",id:"nickname",value:s.nickname,onChange:c,required:!0,placeholder:'เช่น "CEO สาว", "นักสืบพเนจร"'})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"รายละเอียดลักษณะภายนอก*"}),b.jsx("textarea",{id:"appearance",rows:4,value:s.appearance,onChange:c,required:!0,placeholder:"เช่น หญิงสาวอายุ 25 ปี, ผมสีดำยาว, ตาสีน้ำตาล..."})]}),b.jsxs("div",{className:"form-group",children:[b.jsx("label",{children:"บุคลิกและนิสัย"}),b.jsx("textarea",{id:"personality",rows:3,value:s.personality,onChange:c,placeholder:"เช่น มั่นใจ, ฉลาด, อบอุ่น..."})]}),b.jsx("button",{type:"submit",style:{width:"100%",padding:"0.75rem",background:"var(--primary-gradient)",color:"white",fontWeight:600,border:"none"},children:"บันทึกตัวละคร"})]})]})})},ZC=({src:r,prompt:e,onClose:n})=>b.jsxs("div",{className:"modal show",id:"image-viewer-modal",onClick:n,children:[b.jsx("span",{className:"close-btn",style:{color:"white",fontSize:"40px"},children:"×"}),b.jsx("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:b.jsxs("div",{className:"image-viewer-container",children:[b.jsx("img",{src:r,alt:e}),b.jsx("div",{className:"image-viewer-prompt",children:e})]})})]});IA.createRoot(document.getElementById("root")).render(b.jsx(Me.StrictMode,{children:b.jsx(HC,{})}));
